shadow$provide.module$node_modules$opentype_DOT_js$dist$opentype=function(global$jscomp$0,require,module,exports$jscomp$0){var Buffer=require("module$node_modules$buffer$index").Buffer;(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0):"function"===typeof define&&define.amd?define(["exports"],factory):(global=global||self,factory(global.opentype={}))})(this,function(exports){function Tree(){this.table=new Uint16Array(16);this.trans=
new Uint16Array(288)}function Data(source,dest){this.source=source;this.bitcount=this.tag=this.sourceIndex=0;this.dest=dest;this.destLen=0;this.ltree=new Tree;this.dtree=new Tree}function tinf_build_bits_base(bits,base,delta,first){var i;for(i=0;i<delta;++i)bits[i]=0;for(i=0;i<30-delta;++i)bits[i+delta]=i/delta|0;delta=first;for(i=0;30>i;++i)base[i]=delta,delta+=1<<bits[i]}function tinf_build_tree(t,lengths,off,num){var i,sum;for(i=0;16>i;++i)t.table[i]=0;for(i=0;i<num;++i)t.table[lengths[off+i]]++;
for(i=sum=t.table[0]=0;16>i;++i)offs[i]=sum,sum+=t.table[i];for(i=0;i<num;++i)lengths[off+i]&&(t.trans[offs[lengths[off+i]]++]=i)}function tinf_read_bits(d,num,base){if(!num)return base;for(;24>d.bitcount;)d.tag|=d.source[d.sourceIndex++]<<d.bitcount,d.bitcount+=8;var val=d.tag&65535>>>16-num;d.tag>>>=num;d.bitcount-=num;return val+base}function tinf_decode_symbol(d,t){for(;24>d.bitcount;)d.tag|=d.source[d.sourceIndex++]<<d.bitcount,d.bitcount+=8;var sum=0,cur=0,len=0,tag=d.tag;do cur=2*cur+(tag&
1),tag>>>=1,++len,sum+=t.table[len],cur-=t.table[len];while(0<=cur);d.tag=tag;d.bitcount-=len;return t.trans[sum+cur]}function tinf_inflate_block_data(d,lt,dt){for(;;){var sym=tinf_decode_symbol(d,lt);if(256===sym)return 0;if(256>sym)d.dest[d.destLen++]=sym;else{var i;sym-=257;sym=tinf_read_bits(d,length_bits[sym],length_base[sym]);var dist=tinf_decode_symbol(d,dt);for(i=dist=d.destLen-tinf_read_bits(d,dist_bits[dist],dist_base[dist]);i<dist+sym;++i)d.dest[d.destLen++]=d.dest[i]}}}function derive(v0,
v1,v2,v3,t){return Math.pow(1-t,3)*v0+3*Math.pow(1-t,2)*t*v1+3*(1-t)*Math.pow(t,2)*v2+Math.pow(t,3)*v3}function BoundingBox(){this.y2=this.x2=this.y1=this.x1=Number.NaN}function Path(){this.commands=[];this.fill="black";this.stroke=null;this.strokeWidth=1}function fail(message){throw Error(message);}function argument(predicate,message){predicate||fail(message)}function constant(v){return function(){return v}}function Table(tableName,fields,options){for(var i=0;i<fields.length;i+=1){var field=fields[i];
this[field.name]=field.value}this.tableName=tableName;this.fields=fields;if(options)for(tableName=Object.keys(options),fields=0;fields<tableName.length;fields+=1)i=tableName[fields],field=options[i],void 0!==this[i]&&(this[i]=field)}function ushortList(itemName,list,count){void 0===count&&(count=list.length);var fields=Array(list.length+1);fields[0]={name:itemName+"Count",type:"USHORT",value:count};for(count=0;count<list.length;count++)fields[count+1]={name:itemName+count,type:"USHORT",value:list[count]};
return fields}function tableList(itemName,records,itemCallback){var count=records.length,fields=Array(count+1);fields[0]={name:itemName+"Count",type:"USHORT",value:count};for(var i=0;i<count;i++)fields[i+1]={name:itemName+i,type:"TABLE",value:itemCallback(records[i],i)};return fields}function recordList(itemName,records,itemCallback){var count=records.length,fields=[];fields[0]={name:itemName+"Count",type:"USHORT",value:count};for(itemName=0;itemName<count;itemName++)fields=fields.concat(itemCallback(records[itemName],
itemName));return fields}function Coverage(coverageTable){1===coverageTable.format?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ushortList("glyph",coverageTable.glyphs))):check.assert(!1,"Can't create coverage table format 2 yet.")}function ScriptList(scriptListTable){Table.call(this,"scriptListTable",recordList("scriptRecord",scriptListTable,function(scriptRecord,i$jscomp$0){var script=scriptRecord.script,defaultLangSys=script.defaultLangSys;check.assert(!!defaultLangSys,
"Unable to write GSUB: script "+scriptRecord.tag+" has no default language system.");return[{name:"scriptTag"+i$jscomp$0,type:"TAG",value:scriptRecord.tag},{name:"script"+i$jscomp$0,type:"TABLE",value:new Table("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Table("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:defaultLangSys.reqFeatureIndex}].concat(ushortList("featureIndex",defaultLangSys.featureIndexes)))}].concat(recordList("langSys",
script.langSysRecords,function(langSysRecord,i){var langSys=langSysRecord.langSys;return[{name:"langSysTag"+i,type:"TAG",value:langSysRecord.tag},{name:"langSys"+i,type:"TABLE",value:new Table("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:langSys.reqFeatureIndex}].concat(ushortList("featureIndex",langSys.featureIndexes)))}]})))}]}))}function FeatureList(featureListTable){Table.call(this,"featureListTable",recordList("featureRecord",featureListTable,
function(featureRecord,i){var feature=featureRecord.feature;return[{name:"featureTag"+i,type:"TAG",value:featureRecord.tag},{name:"feature"+i,type:"TABLE",value:new Table("featureTable",[{name:"featureParams",type:"USHORT",value:feature.featureParams}].concat(ushortList("lookupListIndex",feature.lookupListIndexes)))}]}))}function LookupList(lookupListTable,subtableMakers){Table.call(this,"lookupListTable",tableList("lookup",lookupListTable,function(lookupTable){var subtableCallback=subtableMakers[lookupTable.lookupType];
check.assert(!!subtableCallback,"Unable to write GSUB lookup type "+lookupTable.lookupType+" tables.");return new Table("lookupTable",[{name:"lookupType",type:"USHORT",value:lookupTable.lookupType},{name:"lookupFlag",type:"USHORT",value:lookupTable.lookupFlag}].concat(tableList("subtable",lookupTable.subtables,subtableCallback)))}))}function getByte(dataView,offset){return dataView.getUint8(offset)}function getUShort(dataView,offset){return dataView.getUint16(offset,!1)}function getULong(dataView,
offset){return dataView.getUint32(offset,!1)}function getFixed(dataView,offset){var decimal=dataView.getInt16(offset,!1);dataView=dataView.getUint16(offset+2,!1);return decimal+dataView/65535}function Parser(data,offset){this.data=data;this.offset=offset;this.relativeOffset=0}function addSegment(t,code,glyphIndex){t.segments.push({end:code,start:code,delta:-(code-glyphIndex),offset:0,glyphIndex})}function DefaultEncoding(font){this.font=font}function CmapEncoding(cmap){this.cmap=cmap}function CffEncoding(encoding,
charset){this.encoding=encoding;this.charset=charset}function GlyphNames(post){switch(post.version){case 1:this.names=standardNames.slice();break;case 2:this.names=Array(post.numberOfGlyphs);for(var i=0;i<post.numberOfGlyphs;i++)this.names[i]=post.glyphNameIndex[i]<standardNames.length?standardNames[post.glyphNameIndex[i]]:post.names[post.glyphNameIndex[i]-standardNames.length];break;case 2.5:this.names=Array(post.numberOfGlyphs);for(i=0;i<post.numberOfGlyphs;i++)this.names[i]=standardNames[i+post.glyphNameIndex[i]];
break;case 3:this.names=[];break;default:this.names=[]}}function getPathDefinition(glyph,path){var _path=path||new Path;return{configurable:!0,get:function(){"function"===typeof _path&&(_path=_path());return _path},set:function(p){_path=p}}}function Glyph(options){this.bindConstructorValues(options)}function defineDependentProperty(glyph,externalName,internalName){Object.defineProperty(glyph,externalName,{get:function(){glyph.path;return glyph[internalName]},set:function(newValue){glyph[internalName]=
newValue},enumerable:!0,configurable:!0})}function GlyphSet(font,glyphs){this.font=font;this.glyphs={};if(Array.isArray(glyphs))for(var i=0;i<glyphs.length;i++){var glyph=glyphs[i];glyph.path.unitsPerEm=font.unitsPerEm;this.glyphs[i]=glyph}this.length=glyphs&&glyphs.length||0}function equals(a,b){if(a===b)return!0;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;i+=1)if(!equals(a[i],b[i]))return!1;return!0}return!1}function calcCFFSubroutineBias(subrs){return 1240>
subrs.length?107:33900>subrs.length?1131:32768}function parseCFFIndex(data,start,conversionFn){var offsets=[],objects=[],count=parse.getCard16(data,start);if(0!==count){var offsetSize=parse.getByte(data,start+2);var objectOffset=start+(count+1)*offsetSize+2;for(var pos=start+3,i=0;i<count+1;i+=1)offsets.push(parse.getOffset(data,pos,offsetSize)),pos+=offsetSize;count=objectOffset+offsets[count]}else count=start+2;for(offsetSize=0;offsetSize<offsets.length-1;offsetSize+=1)pos=parse.getBytes(data,objectOffset+
offsets[offsetSize],objectOffset+offsets[offsetSize+1]),conversionFn&&(pos=conversionFn(pos)),objects.push(pos);return{objects,startOffset:start,endOffset:count}}function parseCFFIndexLowMemory(data,start){var offsets=[],count=parse.getCard16(data,start);if(0!==count){var offsetSize=parse.getByte(data,start+2);var objectOffset=start+(count+1)*offsetSize+2;for(var pos=start+3,i=0;i<count+1;i+=1)offsets.push(parse.getOffset(data,pos,offsetSize)),pos+=offsetSize;data=objectOffset+offsets[count]}else data=
start+2;return{offsets,startOffset:start,endOffset:data}}function parseOperand(parser,b0){if(28===b0){var b1=parser.parseByte();b0=parser.parseByte();return b1<<8|b0}if(29===b0){b1=parser.parseByte();b0=parser.parseByte();var b3=parser.parseByte();parser=parser.parseByte();return b1<<24|b0<<16|b3<<8|parser}if(30===b0){b1="";for(b0=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var b=parser.parseByte();b3=b>>4;b&=15;if(15===b3)break;b1+=b0[b3];if(15===b)break;b1+=b0[b]}return parseFloat(b1)}if(32<=
b0&&246>=b0)return b0-139;if(247<=b0&&250>=b0)return b1=parser.parseByte(),256*(b0-247)+b1+108;if(251<=b0&&254>=b0)return b1=parser.parseByte(),256*-(b0-251)-b1-108;throw Error("Invalid b0 "+b0);}function parseCFFDict(data,start,size){var parser=new parse.Parser(data,void 0!==start?start:0);start=[];var operands=[];for(size=void 0!==size?size:data.length;parser.relativeOffset<size;)data=parser.parseByte(),21>=data?(12===data&&(data=1200+parser.parseByte()),start.push([data,operands]),operands=[]):
operands.push(parseOperand(parser,data));size={};for(data=0;data<start.length;data+=1){parser=start[data][0];operands=start[data][1];operands=1===operands.length?operands[0]:operands;if(size.hasOwnProperty(parser)&&!isNaN(size[parser]))throw Error("Object "+size+" already has key "+parser);size[parser]=operands}return size}function getCFFString(strings,index){return index=390>=index?cffStandardStrings[index]:strings[index-391]}function interpretDict(dict,meta,strings){for(var newDict={},value,i=0;i<
meta.length;i+=1){var m=meta[i];if(Array.isArray(m.type)){var values=[];values.length=m.type.length;for(var j=0;j<m.type.length;j++)value=void 0!==dict[m.op]?dict[m.op][j]:void 0,void 0===value&&(value=void 0!==m.value&&void 0!==m.value[j]?m.value[j]:null),"SID"===m.type[j]&&(value=getCFFString(strings,value)),values[j]=value;newDict[m.name]=values}else value=dict[m.op],void 0===value&&(value=void 0!==m.value?m.value:null),"SID"===m.type&&(value=getCFFString(strings,value)),newDict[m.name]=value}return newDict}
function parseCFFHeader(data,start){var header={};header.formatMajor=parse.getCard8(data,start);header.formatMinor=parse.getCard8(data,start+1);header.size=parse.getCard8(data,start+2);header.offsetSize=parse.getCard8(data,start+3);header.startOffset=start;header.endOffset=start+4;return header}function parseCFFPrivateDict(data,start,size,strings){data=parseCFFDict(data,start,size);return interpretDict(data,PRIVATE_DICT_META,strings)}function gatherCFFTopDicts(data,start,cffIndex,strings){for(var topDictArray=
[],iTopDict=0;iTopDict<cffIndex.length;iTopDict+=1){var topDictData=new DataView((new Uint8Array(cffIndex[iTopDict])).buffer);var topDict=strings;topDictData=parseCFFDict(topDictData,0,topDictData.byteLength);topDict=interpretDict(topDictData,TOP_DICT_META,topDict);topDict._subrs=[];topDict._subrsBias=0;var privateSize=topDict.private[0];topDictData=topDict.private[1];0!==privateSize&&0!==topDictData&&(privateSize=parseCFFPrivateDict(data,topDictData+start,privateSize,strings),topDict._defaultWidthX=
privateSize.defaultWidthX,topDict._nominalWidthX=privateSize.nominalWidthX,0!==privateSize.subrs&&(topDictData=parseCFFIndex(data,topDictData+privateSize.subrs+start),topDict._subrs=topDictData.objects,topDict._subrsBias=calcCFFSubroutineBias(topDict._subrs)),topDict._privateDict=privateSize);topDictArray.push(topDict)}return topDictArray}function parseCFFCharset(data,start,nGlyphs,strings){var count;data=new parse.Parser(data,start);--nGlyphs;start=[".notdef"];var sid=data.parseCard8();if(0===sid)for(count=
0;count<nGlyphs;count+=1)sid=data.parseSID(),start.push(getCFFString(strings,sid));else if(1===sid)for(;start.length<=nGlyphs;){sid=data.parseSID();count=data.parseCard8();for(var i$1=0;i$1<=count;i$1+=1)start.push(getCFFString(strings,sid)),sid+=1}else if(2===sid)for(;start.length<=nGlyphs;)for(sid=data.parseSID(),count=data.parseCard16(),i$1=0;i$1<=count;i$1+=1)start.push(getCFFString(strings,sid)),sid+=1;else throw Error("Unknown charset format "+sid);return start}function parseCFFEncoding(data,
start,charset){var enc={};data=new parse.Parser(data,start);start=data.parseCard8();if(0===start)for(var nCodes=data.parseCard8(),i=0;i<nCodes;i+=1)start=data.parseCard8(),enc[start]=i;else if(1===start)for(nCodes=data.parseCard8(),start=1,i=0;i<nCodes;i+=1)for(var first=data.parseCard8(),nLeft=data.parseCard8(),j=first;j<=first+nLeft;j+=1)enc[j]=start,start+=1;else throw Error("Unknown encoding format "+start);return new CffEncoding(enc,charset)}function parseCFFCharstring(font,glyph,code$jscomp$0){function newContour(x,
y){open&&p.closePath();p.moveTo(x,y);open=!0}function parseStems(){0===stack.length%2||haveWidth||(width=stack.shift()+nominalWidthX);nStems+=stack.length>>1;stack.length=0;haveWidth=!0}function parse(code){for(var b1,b2,b3,b4,c4x,c4y,i=0;i<code.length;)switch(b2=code[i],i+=1,b2){case 1:parseStems();break;case 3:parseStems();break;case 4:1<stack.length&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0);y$jscomp$0+=stack.pop();newContour(x$jscomp$0,y$jscomp$0);break;case 5:for(;0<stack.length;)x$jscomp$0+=
stack.shift(),y$jscomp$0+=stack.shift(),p.lineTo(x$jscomp$0,y$jscomp$0);break;case 6:for(;0<stack.length;){x$jscomp$0+=stack.shift();p.lineTo(x$jscomp$0,y$jscomp$0);if(0===stack.length)break;y$jscomp$0+=stack.shift();p.lineTo(x$jscomp$0,y$jscomp$0)}break;case 7:for(;0<stack.length;){y$jscomp$0+=stack.shift();p.lineTo(x$jscomp$0,y$jscomp$0);if(0===stack.length)break;x$jscomp$0+=stack.shift();p.lineTo(x$jscomp$0,y$jscomp$0)}break;case 8:for(;0<stack.length;)c1x=x$jscomp$0+stack.shift(),c1y=y$jscomp$0+
stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x$jscomp$0=c2x+stack.shift(),y$jscomp$0=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x$jscomp$0,y$jscomp$0);break;case 10:b1=stack.pop()+subrsBias;(b1=subrs[b1])&&parse(b1);break;case 11:return;case 12:b2=code[i];i+=1;switch(b2){case 35:c1x=x$jscomp$0+stack.shift();c1y=y$jscomp$0+stack.shift();c2x=c1x+stack.shift();c2y=c1y+stack.shift();b1=c2x+stack.shift();b2=c2y+stack.shift();b3=b1+stack.shift();b4=b2+stack.shift();c4x=b3+stack.shift();c4y=
b4+stack.shift();x$jscomp$0=c4x+stack.shift();y$jscomp$0=c4y+stack.shift();stack.shift();p.curveTo(c1x,c1y,c2x,c2y,b1,b2);p.curveTo(b3,b4,c4x,c4y,x$jscomp$0,y$jscomp$0);break;case 34:c1x=x$jscomp$0+stack.shift();c1y=y$jscomp$0;c2x=c1x+stack.shift();c2y=c1y+stack.shift();b1=c2x+stack.shift();b2=c2y;b3=b1+stack.shift();b4=c2y;c4x=b3+stack.shift();c4y=y$jscomp$0;x$jscomp$0=c4x+stack.shift();p.curveTo(c1x,c1y,c2x,c2y,b1,b2);p.curveTo(b3,b4,c4x,c4y,x$jscomp$0,y$jscomp$0);break;case 36:c1x=x$jscomp$0+stack.shift();
c1y=y$jscomp$0+stack.shift();c2x=c1x+stack.shift();c2y=c1y+stack.shift();b1=c2x+stack.shift();b2=c2y;b3=b1+stack.shift();b4=c2y;c4x=b3+stack.shift();c4y=b4+stack.shift();x$jscomp$0=c4x+stack.shift();p.curveTo(c1x,c1y,c2x,c2y,b1,b2);p.curveTo(b3,b4,c4x,c4y,x$jscomp$0,y$jscomp$0);break;case 37:c1x=x$jscomp$0+stack.shift();c1y=y$jscomp$0+stack.shift();c2x=c1x+stack.shift();c2y=c1y+stack.shift();b1=c2x+stack.shift();b2=c2y+stack.shift();b3=b1+stack.shift();b4=b2+stack.shift();c4x=b3+stack.shift();c4y=
b4+stack.shift();Math.abs(c4x-x$jscomp$0)>Math.abs(c4y-y$jscomp$0)?x$jscomp$0=c4x+stack.shift():y$jscomp$0=c4y+stack.shift();p.curveTo(c1x,c1y,c2x,c2y,b1,b2);p.curveTo(b3,b4,c4x,c4y,x$jscomp$0,y$jscomp$0);break;default:console.log("Glyph "+glyph.index+": unknown operator 1200"+b2),stack.length=0}break;case 14:0<stack.length&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0);open&&(p.closePath(),open=!1);break;case 18:parseStems();break;case 19:case 20:parseStems();i+=nStems+7>>3;break;
case 21:2<stack.length&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0);y$jscomp$0+=stack.pop();x$jscomp$0+=stack.pop();newContour(x$jscomp$0,y$jscomp$0);break;case 22:1<stack.length&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0);x$jscomp$0+=stack.pop();newContour(x$jscomp$0,y$jscomp$0);break;case 23:parseStems();break;case 24:for(;2<stack.length;)c1x=x$jscomp$0+stack.shift(),c1y=y$jscomp$0+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x$jscomp$0=c2x+stack.shift(),
y$jscomp$0=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x$jscomp$0,y$jscomp$0);x$jscomp$0+=stack.shift();y$jscomp$0+=stack.shift();p.lineTo(x$jscomp$0,y$jscomp$0);break;case 25:for(;6<stack.length;)x$jscomp$0+=stack.shift(),y$jscomp$0+=stack.shift(),p.lineTo(x$jscomp$0,y$jscomp$0);c1x=x$jscomp$0+stack.shift();c1y=y$jscomp$0+stack.shift();c2x=c1x+stack.shift();c2y=c1y+stack.shift();x$jscomp$0=c2x+stack.shift();y$jscomp$0=c2y+stack.shift();p.curveTo(c1x,c1y,c2x,c2y,x$jscomp$0,y$jscomp$0);break;case 26:for(stack.length%
2&&(x$jscomp$0+=stack.shift());0<stack.length;)c1x=x$jscomp$0,c1y=y$jscomp$0+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x$jscomp$0=c2x,y$jscomp$0=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x$jscomp$0,y$jscomp$0);break;case 27:for(stack.length%2&&(y$jscomp$0+=stack.shift());0<stack.length;)c1x=x$jscomp$0+stack.shift(),c1y=y$jscomp$0,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x$jscomp$0=c2x+stack.shift(),y$jscomp$0=c2y,p.curveTo(c1x,c1y,c2x,c2y,x$jscomp$0,y$jscomp$0);break;case 28:b1=
code[i];b2=code[i+1];stack.push((b1<<24|b2<<16)>>16);i+=2;break;case 29:b1=stack.pop()+font.gsubrsBias;(b1=font.gsubrs[b1])&&parse(b1);break;case 30:for(;0<stack.length;){c1x=x$jscomp$0;c1y=y$jscomp$0+stack.shift();c2x=c1x+stack.shift();c2y=c1y+stack.shift();x$jscomp$0=c2x+stack.shift();y$jscomp$0=c2y+(1===stack.length?stack.shift():0);p.curveTo(c1x,c1y,c2x,c2y,x$jscomp$0,y$jscomp$0);if(0===stack.length)break;c1x=x$jscomp$0+stack.shift();c1y=y$jscomp$0;c2x=c1x+stack.shift();c2y=c1y+stack.shift();
y$jscomp$0=c2y+stack.shift();x$jscomp$0=c2x+(1===stack.length?stack.shift():0);p.curveTo(c1x,c1y,c2x,c2y,x$jscomp$0,y$jscomp$0)}break;case 31:for(;0<stack.length;){c1x=x$jscomp$0+stack.shift();c1y=y$jscomp$0;c2x=c1x+stack.shift();c2y=c1y+stack.shift();y$jscomp$0=c2y+stack.shift();x$jscomp$0=c2x+(1===stack.length?stack.shift():0);p.curveTo(c1x,c1y,c2x,c2y,x$jscomp$0,y$jscomp$0);if(0===stack.length)break;c1x=x$jscomp$0;c1y=y$jscomp$0+stack.shift();c2x=c1x+stack.shift();c2y=c1y+stack.shift();x$jscomp$0=
c2x+stack.shift();y$jscomp$0=c2y+(1===stack.length?stack.shift():0);p.curveTo(c1x,c1y,c2x,c2y,x$jscomp$0,y$jscomp$0)}break;default:32>b2?console.log("Glyph "+glyph.index+": unknown operator "+b2):247>b2?stack.push(b2-139):251>b2?(b1=code[i],i+=1,stack.push(256*(b2-247)+b1+108)):255>b2?(b1=code[i],i+=1,stack.push(256*-(b2-251)-b1-108)):(b1=code[i],b2=code[i+1],b3=code[i+2],b4=code[i+3],i+=4,stack.push((b1<<24|b2<<16|b3<<8|b4)/65536))}}var c1x,c1y,c2x,c2y,p=new Path,stack=[],nStems=0,haveWidth=!1,open=
!1,x$jscomp$0=0,y$jscomp$0=0;if(font.isCIDFont){var fdDict=font.tables.cff.topDict._fdArray[font.tables.cff.topDict._fdSelect[glyph.index]];var subrs=fdDict._subrs;var subrsBias=fdDict._subrsBias;var defaultWidthX=fdDict._defaultWidthX;var nominalWidthX=fdDict._nominalWidthX}else subrs=font.tables.cff.topDict._subrs,subrsBias=font.tables.cff.topDict._subrsBias,defaultWidthX=font.tables.cff.topDict._defaultWidthX,nominalWidthX=font.tables.cff.topDict._nominalWidthX;var width=defaultWidthX;parse(code$jscomp$0);
glyph.advanceWidth=width;return p}function parseCFFFDSelect(data,start,nGlyphs,fdArrayCount){var fdSelect=[];data=new parse.Parser(data,start);start=data.parseCard8();if(0===start)for(var iGid=0;iGid<nGlyphs;iGid++){start=data.parseCard8();if(start>=fdArrayCount)throw Error("CFF table CID Font FDSelect has bad FD index value "+start+" (FD count "+fdArrayCount+")");fdSelect.push(start)}else if(3===start){var nRanges=data.parseCard16(),first=data.parseCard16();if(0!==first)throw Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+
first);for(var iRange=0;iRange<nRanges;iRange++){start=data.parseCard8();iGid=data.parseCard16();if(start>=fdArrayCount)throw Error("CFF table CID Font FDSelect has bad FD index value "+start+" (FD count "+fdArrayCount+")");if(iGid>nGlyphs)throw Error("CFF Table CID Font FDSelect format 3 range has bad GID "+iGid);for(;first<iGid;first++)fdSelect.push(start);first=iGid}if(iGid!==nGlyphs)throw Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+iGid);}else throw Error("CFF Table CID Font FDSelect table has unsupported format "+
start);return fdSelect}function encodeString(s,strings){cffStandardStrings.indexOf(s);var sid=strings.indexOf(s);0<=sid?sid+=cffStandardStrings.length:(sid=cffStandardStrings.length+strings.length,strings.push(s));return sid}function makeDict(meta,attrs,strings){for(var m={},i=0;i<meta.length;i+=1){var entry=meta[i],value=attrs[entry.name];void 0===value||equals(value,entry.value)||("SID"===entry.type&&(value=encodeString(value,strings)),m[entry.op]={name:entry.name,type:entry.type,value})}return m}
function makeTopDict(attrs,strings){var t=new table.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);t.dict=makeDict(TOP_DICT_META,attrs,strings);return t}function makeTopDictIndex(topDict){var t=new table.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);t.topDicts=[{name:"topDict_0",type:"TABLE",value:topDict}];return t}function getEncoding(platformID,encodingID,languageID){switch(platformID){case 0:return"utf-16";case 1:return macLanguageEncodings[languageID]||macScriptEncodings[encodingID];
case 3:if(1===encodingID||10===encodingID)return"utf-16"}}function reverseDict(dict){var result={},key;for(key in dict)result[dict[key]]=parseInt(key);return result}function makeNameRecord(platformID,encodingID,languageID,nameID,length,offset){return new table.Record("NameRecord",[{name:"platformID",type:"USHORT",value:platformID},{name:"encodingID",type:"USHORT",value:encodingID},{name:"languageID",type:"USHORT",value:languageID},{name:"nameID",type:"USHORT",value:nameID},{name:"length",type:"USHORT",
value:length},{name:"offset",type:"USHORT",value:offset}])}function addStringToPool(s,pool){a:{var offset=s.length;var limit=pool.length-offset+1,pos=0;b:for(;pos<limit;pos++)for(;pos<limit;){for(var k=0;k<offset;k++)if(pool[pos+k]!==s[k])continue b;offset=pos;break a}offset=-1}if(0>offset)for(offset=pool.length,limit=0,pos=s.length;limit<pos;++limit)pool.push(s[limit]);return offset}function computeCheckSum(bytes){for(;0!==bytes.length%4;)bytes.push(0);for(var sum=0,i=0;i<bytes.length;i+=4)sum+=
(bytes[i]<<24)+(bytes[i+1]<<16)+(bytes[i+2]<<8)+bytes[i+3];return sum%=Math.pow(2,32)}function makeTableRecord(tag,checkSum,offset,length){return new table.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==tag?tag:""},{name:"checkSum",type:"ULONG",value:void 0!==checkSum?checkSum:0},{name:"offset",type:"ULONG",value:void 0!==offset?offset:0},{name:"length",type:"ULONG",value:void 0!==length?length:0}])}function makeSfntTable(tables){var sfnt=new table.Table("sfnt",[{name:"version",type:"TAG",
value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);sfnt.tables=tables;sfnt.numTables=tables.length;var highestPowerOf2=Math.pow(2,Math.log(sfnt.numTables)/Math.log(2)|0);sfnt.searchRange=16*highestPowerOf2;sfnt.entrySelector=Math.log(highestPowerOf2)/Math.log(2)|0;sfnt.rangeShift=16*sfnt.numTables-sfnt.searchRange;highestPowerOf2=[];for(var tableFields=[],offset=
sfnt.sizeOf()+makeTableRecord().sizeOf()*sfnt.numTables;0!==offset%4;)offset+=1,tableFields.push({name:"padding",type:"BYTE",value:0});for(var i=0;i<tables.length;i+=1){var t=tables[i];check.argument(4===t.tableName.length,"Table name"+t.tableName+" is invalid.");var tableLength=t.sizeOf(),tableRecord=makeTableRecord(t.tableName,computeCheckSum(t.encode()),offset,tableLength);highestPowerOf2.push({name:tableRecord.tag+" Table Record",type:"RECORD",value:tableRecord});tableFields.push({name:t.tableName+
" table",type:"RECORD",value:t});offset+=tableLength;for(check.argument(!isNaN(offset),"Something went wrong calculating the offset.");0!==offset%4;)offset+=1,tableFields.push({name:"padding",type:"BYTE",value:0})}highestPowerOf2.sort(function(r1,r2){return r1.value.tag>r2.value.tag?1:-1});sfnt.fields=sfnt.fields.concat(highestPowerOf2);sfnt.fields=sfnt.fields.concat(tableFields);return sfnt}function metricsForChar(font,chars,notFoundMetrics){for(var i=0;i<chars.length;i+=1){var glyphIndex=font.charToGlyphIndex(chars[i]);
if(0<glyphIndex)return font.glyphs.get(glyphIndex).getMetrics()}return notFoundMetrics}function searchTag(arr,tag){for(var imin=0,imax=arr.length-1;imin<=imax;){var imid=imin+imax>>>1,val=arr[imid].tag;if(val===tag)return imid;val<tag?imin=imid+1:imax=imid-1}return-imin-1}function binSearch(arr,value){for(var imin=0,imax=arr.length-1;imin<=imax;){var imid=imin+imax>>>1,val=arr[imid];if(val===value)return imid;val<value?imin=imid+1:imax=imid-1}return-imin-1}function searchRange(ranges,value){for(var range,
imin=0,imax=ranges.length-1;imin<=imax;){var imid=imin+imax>>>1;range=ranges[imid];var start=range.start;if(start===value)return range;start<value?imin=imid+1:imax=imid-1}if(0<imin)return range=ranges[imin-1],value>range.end?0:range}function Layout(font,tableName){this.font=font;this.tableName=tableName}function Position(font){Layout.call(this,font,"gpos")}function Substitution(font){Layout.call(this,font,"gsub")}function getSubstFormat(lookupTable,format,defaultSubtable){lookupTable=lookupTable.subtables;
for(var i=0;i<lookupTable.length;i++){var subtable=lookupTable[i];if(subtable.substFormat===format)return subtable}if(defaultSubtable)return lookupTable.push(defaultSubtable),defaultSubtable}function nodeBufferToArrayBuffer(buffer){for(var ab=new ArrayBuffer(buffer.length),view=new Uint8Array(ab),i=0;i<buffer.length;++i)view[i]=buffer[i];return ab}function parseGlyphCoordinate(p,flag,previousValue,shortVectorBitMask,sameBitMask){0<(flag&shortVectorBitMask)?(p=p.parseByte(),0===(flag&sameBitMask)&&
(p=-p),p=previousValue+p):p=0<(flag&sameBitMask)?previousValue:previousValue+p.parseShort();return p}function parseGlyph(glyph,data,start){data=new parse.Parser(data,start);glyph.numberOfContours=data.parseShort();glyph._xMin=data.parseShort();glyph._yMin=data.parseShort();glyph._xMax=data.parseShort();glyph._yMax=data.parseShort();var flags;if(0<glyph.numberOfContours){var endPointIndices=glyph.endPointIndices=[];for(flags=0;flags<glyph.numberOfContours;flags+=1)endPointIndices.push(data.parseUShort());
glyph.instructionLength=data.parseUShort();glyph.instructions=[];for(flags=0;flags<glyph.instructionLength;flags+=1)glyph.instructions.push(data.parseByte());var numberOfCoordinates=endPointIndices[endPointIndices.length-1]+1;flags=[];for(var i$2=0;i$2<numberOfCoordinates;i$2+=1)if(start=data.parseByte(),flags.push(start),0<(start&8))for(var repeatCount=data.parseByte(),j=0;j<repeatCount;j+=1)flags.push(start),i$2+=1;check.argument(flags.length===numberOfCoordinates,"Bad flags.");if(0<endPointIndices.length){i$2=
[];if(0<numberOfCoordinates){for(j=0;j<numberOfCoordinates;j+=1)start=flags[j],repeatCount={},repeatCount.onCurve=!!(start&1),repeatCount.lastPointOfContour=0<=endPointIndices.indexOf(j),i$2.push(repeatCount);for(j=endPointIndices=0;j<numberOfCoordinates;j+=1)start=flags[j],repeatCount=i$2[j],repeatCount.x=parseGlyphCoordinate(data,start,endPointIndices,2,16),endPointIndices=repeatCount.x;for(j=endPointIndices=0;j<numberOfCoordinates;j+=1)start=flags[j],repeatCount=i$2[j],repeatCount.y=parseGlyphCoordinate(data,
start,endPointIndices,4,32),endPointIndices=repeatCount.y}glyph.points=i$2}else glyph.points=[]}else if(0===glyph.numberOfContours)glyph.points=[];else{glyph.isComposite=!0;glyph.points=[];glyph.components=[];for(start=!0;start;)flags=data.parseUShort(),start={glyphIndex:data.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0},0<(flags&1)?0<(flags&2)?(start.dx=data.parseShort(),start.dy=data.parseShort()):start.matchedPoints=[data.parseUShort(),data.parseUShort()]:0<(flags&2)?(start.dx=
data.parseChar(),start.dy=data.parseChar()):start.matchedPoints=[data.parseByte(),data.parseByte()],0<(flags&8)?start.xScale=start.yScale=data.parseF2Dot14():0<(flags&64)?(start.xScale=data.parseF2Dot14(),start.yScale=data.parseF2Dot14()):0<(flags&128)&&(start.xScale=data.parseF2Dot14(),start.scale01=data.parseF2Dot14(),start.scale10=data.parseF2Dot14(),start.yScale=data.parseF2Dot14()),glyph.components.push(start),start=!!(flags&32);if(flags&256)for(glyph.instructionLength=data.parseUShort(),glyph.instructions=
[],flags=0;flags<glyph.instructionLength;flags+=1)glyph.instructions.push(data.parseByte())}}function transformPoints(points,transform){for(var newPoints=[],i=0;i<points.length;i+=1){var pt=points[i];newPoints.push({x:transform.xScale*pt.x+transform.scale01*pt.y+transform.dx,y:transform.scale10*pt.x+transform.yScale*pt.y+transform.dy,onCurve:pt.onCurve,lastPointOfContour:pt.lastPointOfContour})}return newPoints}function getPath(points){var p=new Path;if(!points)return p;for(var contours=[],currentContour=
[],i=0;i<points.length;i+=1){var pt=points[i];currentContour.push(pt);pt.lastPointOfContour&&(contours.push(currentContour),currentContour=[])}check.argument(0===currentContour.length,"There are still points left in the current contour.");for(points=0;points<contours.length;++points){currentContour=contours[points];i=currentContour[currentContour.length-1];pt=currentContour[0];i.onCurve?p.moveTo(i.x,i.y):pt.onCurve?p.moveTo(pt.x,pt.y):p.moveTo(.5*(i.x+pt.x),.5*(i.y+pt.y));for(var i$jscomp$0=0;i$jscomp$0<
currentContour.length;++i$jscomp$0)if(i=pt,pt=currentContour[(i$jscomp$0+1)%currentContour.length],i.onCurve)p.lineTo(i.x,i.y);else{var next2=pt;pt.onCurve||(next2={x:.5*(i.x+pt.x),y:.5*(i.y+pt.y)});p.quadraticCurveTo(i.x,i.y,next2.x,next2.y)}p.closePath()}return p}function buildPath(glyphs,glyph){if(glyph.isComposite)for(var j=0;j<glyph.components.length;j+=1){var component=glyph.components[j],componentGlyph=glyphs.get(component.glyphIndex);componentGlyph.getPath();if(componentGlyph.points){if(void 0===
component.matchedPoints)componentGlyph=transformPoints(componentGlyph.points,component);else{if(component.matchedPoints[0]>glyph.points.length-1||component.matchedPoints[1]>componentGlyph.points.length-1)throw Error("Matched points out of range in "+glyph.name);var firstPt=glyph.points[component.matchedPoints[0]],secondPt=componentGlyph.points[component.matchedPoints[1]];component={xScale:component.xScale,scale01:component.scale01,scale10:component.scale10,yScale:component.yScale,dx:0,dy:0};secondPt=
transformPoints([secondPt],component)[0];component.dx=firstPt.x-secondPt.x;component.dy=firstPt.y-secondPt.y;componentGlyph=transformPoints(componentGlyph.points,component)}glyph.points=glyph.points.concat(componentGlyph)}}return getPath(glyph.points)}function parseGlyfTableOnLowMemory(data,start,loca,font){var glyphs=new glyphset.GlyphSet(font);font._push=function(i){var offset=loca[i];offset!==loca[i+1]?glyphs.push(i,glyphset.ttfGlyphLoader(font,i,parseGlyph,data,start+offset,buildPath)):glyphs.push(i,
glyphset.glyphLoader(font,i))};return glyphs}function Hinting(font){this.font=font;this.getCommands=function(hPoints){return glyf.getPath(hPoints).commands};this._fpgmState=this._prepState=void 0;this._errorState=0}function roundOff(v){return v}function roundToGrid(v){return Math.sign(v)*Math.round(Math.abs(v))}function roundToDoubleGrid(v){return Math.sign(v)*Math.round(Math.abs(2*v))/2}function roundToHalfGrid(v){return Math.sign(v)*(Math.round(Math.abs(v)+.5)-.5)}function roundUpToGrid(v){return Math.sign(v)*
Math.ceil(Math.abs(v))}function roundDownToGrid(v){return Math.sign(v)*Math.floor(Math.abs(v))}function UnitVector(x,y){this.x=x;this.y=y;this.axis=void 0;this.slope=y/x;this.normalSlope=-x/y;Object.freeze(this)}function getUnitVector(x,y){var d=Math.sqrt(x*x+y*y);x/=d;y/=d;return 1===x&&0===y?xUnitVector:0===x&&1===y?yUnitVector:new UnitVector(x,y)}function HPoint(x,y,lastPointOfContour,onCurve){this.x=this.xo=Math.round(64*x)/64;this.y=this.yo=Math.round(64*y)/64;this.lastPointOfContour=lastPointOfContour;
this.onCurve=onCurve;this.nextPointOnContour=this.prevPointOnContour=void 0;this.yTouched=this.xTouched=!1;Object.preventExtensions(this)}function State(env,prog){this.env=env;this.stack=[];this.prog=prog;switch(env){case "glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case "prep":this.fv=this.pv=this.dpv=xUnitVector,this.round=roundToGrid}}function initTZone(state){state=state.tZone=Array(state.gZone.length);for(var i=0;i<state.length;i++)state[i]=new HPoint(0,0)}function skip(state,
handleElse){var prog=state.prog,ip=state.ip,nesting=1;do{var ins=prog[++ip];if(88===ins)nesting++;else if(89===ins)nesting--;else if(64===ins)ip+=prog[ip+1]+1;else if(65===ins)ip+=2*prog[ip+1]+1;else if(176<=ins&&183>=ins)ip+=ins-176+1;else if(184<=ins&&191>=ins)ip+=2*(ins-184+1);else if(handleElse&&1===nesting&&27===ins)break}while(0<nesting);state.ip=ip}function SVTCA(v,state){exports.DEBUG&&console.log(state.step,"SVTCA["+v.axis+"]");state.fv=state.pv=state.dpv=v}function SPVTCA(v,state){exports.DEBUG&&
console.log(state.step,"SPVTCA["+v.axis+"]");state.pv=state.dpv=v}function SFVTCA(v,state){exports.DEBUG&&console.log(state.step,"SFVTCA["+v.axis+"]");state.fv=v}function SPVTL(a,state){var stack=state.stack,p2i=stack.pop(),p1i=stack.pop();stack=state.z2[p2i];var p1=state.z1[p1i];exports.DEBUG&&console.log("SPVTL["+a+"]",p2i,p1i);a?(a=stack.y-p1.y,p2i=p1.x-stack.x):(a=p1.x-stack.x,p2i=p1.y-stack.y);state.pv=state.dpv=getUnitVector(a,p2i)}function SFVTL(a,state){var stack=state.stack,p2i=stack.pop(),
p1i=stack.pop();stack=state.z2[p2i];var p1=state.z1[p1i];exports.DEBUG&&console.log("SFVTL["+a+"]",p2i,p1i);a?(a=stack.y-p1.y,p2i=p1.x-stack.x):(a=p1.x-stack.x,p2i=p1.y-stack.y);state.fv=getUnitVector(a,p2i)}function POP(state){exports.DEBUG&&console.log(state.step,"POP[]");state.stack.pop()}function MDAP(round,state){var pi=state.stack.pop(),p=state.z0[pi],fv=state.fv,pv=state.pv;exports.DEBUG&&console.log(state.step,"MDAP["+round+"]",pi);var d=pv.distance(p,HPZero);round&&(d=state.round(d));fv.setRelative(p,
HPZero,d,pv);fv.touch(p);state.rp0=state.rp1=pi}function IUP(v,state){var z2=state.z2,pLen=z2.length-2;exports.DEBUG&&console.log(state.step,"IUP["+v.axis+"]");for(var i=0;i<pLen;i++)if(state=z2[i],!v.touched(state)){var pp=state.prevTouched(v);if(pp!==state){var np=state.nextTouched(v);pp===np&&v.setRelative(state,state,v.distance(pp,pp,!1,!0),v,!0);v.interpolate(state,pp,np,v)}}}function SHP(a,state){for(var stack=state.stack,rp=(a?state.z0:state.z1)[a?state.rp1:state.rp2],fv=state.fv,pv=state.pv,
loop=state.loop,z2=state.z2;loop--;){var pi=stack.pop(),p=z2[pi],d=pv.distance(rp,rp,!1,!0);fv.setRelative(p,p,d,pv);fv.touch(p);exports.DEBUG&&console.log(state.step,(1<state.loop?"loop "+(state.loop-loop)+": ":"")+"SHP["+(a?"rp1":"rp2")+"]",pi)}state.loop=1}function SHC(a,state){var rp=(a?state.z0:state.z1)[a?state.rp1:state.rp2],fv=state.fv,pv=state.pv,ci=state.stack.pop(),sp=state.z2[state.contours[ci]],p=sp;exports.DEBUG&&console.log(state.step,"SHC["+a+"]",ci);a=pv.distance(rp,rp,!1,!0);do p!==
rp&&fv.setRelative(p,p,a,pv),p=p.nextPointOnContour;while(p!==sp)}function SHZ(a,state){var rp=(a?state.z0:state.z1)[a?state.rp1:state.rp2],fv=state.fv,pv=state.pv,e=state.stack.pop();exports.DEBUG&&console.log(state.step,"SHZ["+a+"]",e);switch(e){case 0:a=state.tZone;break;case 1:a=state.gZone;break;default:throw Error("Invalid zone");}state=pv.distance(rp,rp,!1,!0);e=a.length-2;for(var i=0;i<e;i++)rp=a[i],fv.setRelative(rp,rp,state,pv)}function MSIRP(a,state){var stack=state.stack,d=stack.pop()/
64;stack=stack.pop();var p=state.z1[stack],fv=state.fv;fv.setRelative(p,state.z0[state.rp0],d,state.pv);fv.touch(p);exports.DEBUG&&console.log(state.step,"MSIRP["+a+"]",d,stack);state.rp1=state.rp0;state.rp2=stack;a&&(state.rp0=stack)}function MIAP(round,state){var stack=state.stack,n=stack.pop();stack=stack.pop();var p=state.z0[stack],fv=state.fv,pv=state.pv,cv=state.cvt[n];exports.DEBUG&&console.log(state.step,"MIAP["+round+"]",n,"(",cv,")",stack);n=pv.distance(p,HPZero);round&&(Math.abs(n-cv)<
state.cvCutIn&&(n=cv),n=state.round(n));fv.setRelative(p,HPZero,n,pv);0===state.zp0&&(p.xo=p.x,p.yo=p.y);fv.touch(p);state.rp0=state.rp1=stack}function GC(a,state){var stack=state.stack,pi=stack.pop(),p=state.z2[pi];exports.DEBUG&&console.log(state.step,"GC["+a+"]",pi);stack.push(64*state.dpv.distance(p,HPZero,a,!1))}function MD(a,state){var stack=state.stack,pi2=stack.pop();stack=stack.pop();var d=state.dpv.distance(state.z0[stack],state.z1[pi2],a,a);exports.DEBUG&&console.log(state.step,"MD["+a+
"]",pi2,stack,"-\x3e",d);state.stack.push(Math.round(64*d))}function DELTAP123(b,state){var stack=state.stack,n=stack.pop(),fv=state.fv,pv=state.pv,ppem=state.ppem,base=state.deltaBase+16*(b-1),ds=state.deltaShift,z0=state.z0;exports.DEBUG&&console.log(state.step,"DELTAP["+b+"]",n,stack);for(b=0;b<n;b++){var pi=stack.pop(),arg=stack.pop();base+((arg&240)>>4)===ppem&&(arg=(arg&15)-8,0<=arg&&arg++,exports.DEBUG&&console.log(state.step,"DELTAPFIX",pi,"by",arg*ds),pi=z0[pi],fv.setRelative(pi,pi,arg*ds,
pv))}}function ROUND(dt,state){dt=state.stack;var n=dt.pop();exports.DEBUG&&console.log(state.step,"ROUND[]");dt.push(64*state.round(n/64))}function DELTAC123(b,state){var stack=state.stack,n=stack.pop(),ppem=state.ppem,base=state.deltaBase+16*(b-1),ds=state.deltaShift;exports.DEBUG&&console.log(state.step,"DELTAC["+b+"]",n,stack);for(b=0;b<n;b++){var c=stack.pop(),arg=stack.pop();base+((arg&240)>>4)===ppem&&(arg=(arg&15)-8,0<=arg&&arg++,arg*=ds,exports.DEBUG&&console.log(state.step,"DELTACFIX",c,
"by",arg),state.cvt[c]+=arg)}}function SDPVTL(a,state){var stack=state.stack,p2i=stack.pop(),p1i=stack.pop();stack=state.z2[p2i];var p1=state.z1[p1i];exports.DEBUG&&console.log(state.step,"SDPVTL["+a+"]",p2i,p1i);a?(a=stack.y-p1.y,p2i=p1.x-stack.x):(a=p1.x-stack.x,p2i=p1.y-stack.y);state.dpv=getUnitVector(a,p2i)}function PUSHB(n,state){var stack=state.stack,prog=state.prog,ip=state.ip;exports.DEBUG&&console.log(state.step,"PUSHB["+n+"]");for(var i=0;i<n;i++)stack.push(prog[++ip]);state.ip=ip}function PUSHW(n,
state){var ip=state.ip,prog=state.prog,stack=state.stack;exports.DEBUG&&console.log(state.ip,"PUSHW["+n+"]");for(var i=0;i<n;i++){var w=prog[++ip]<<8|prog[++ip];w&32768&&(w=-((w^65535)+1));stack.push(w)}state.ip=ip}function MDRP_MIRP(indirect,setRp0,keepD,ro,dt,state){var stack=state.stack,cvte=indirect&&stack.pop();stack=stack.pop();var rp=state.z0[state.rp0],p=state.z1[stack],md=state.minDis,fv=state.fv,pv=state.dpv,od;var d=od=pv.distance(p,rp,!0,!0);var sign=0<=d?1:-1;d=Math.abs(d);if(indirect){var cv=
state.cvt[cvte];ro&&Math.abs(d-cv)<state.cvCutIn&&(d=cv)}keepD&&d<md&&(d=md);ro&&(d=state.round(d));fv.setRelative(p,rp,sign*d,pv);fv.touch(p);exports.DEBUG&&console.log(state.step,(indirect?"MIRP[":"MDRP[")+(setRp0?"M":"m")+(keepD?"\x3e":"_")+(ro?"R":"_")+(0===dt?"Gr":1===dt?"Bl":2===dt?"Wh":"")+"]",indirect?cvte+"("+state.cvt[cvte]+","+cv+")":"",stack,"(d \x3d",od,"-\x3e",sign*d,")");state.rp1=state.rp0;state.rp2=stack;setRp0&&(state.rp0=stack)}function Token(char){this.char=char;this.state={};
this.activeState=null}function ContextRange(startIndex,endOffset,contextName){this.contextName=contextName;this.startIndex=startIndex;this.endOffset=endOffset}function ContextChecker(contextName,checkStart,checkEnd){this.contextName=contextName;this.openRange=null;this.ranges=[];this.checkStart=checkStart;this.checkEnd=checkEnd}function ContextParams(context,currentIndex){this.context=context;this.index=currentIndex;this.length=context.length;this.current=context[currentIndex];this.backtrack=context.slice(0,
currentIndex);this.lookahead=context.slice(currentIndex+1)}function Event(eventId){this.eventId=eventId;this.subscribers=[]}function initializeCoreEvents(events){var this$1=this,coreEvents="start end next newToken contextStart contextEnd insertToken removeToken removeRange replaceToken replaceRange composeRUD updateContextsRanges".split(" ");coreEvents.forEach(function(eventId){Object.defineProperty(this$1.events,eventId,{value:new Event(eventId)})});events&&coreEvents.forEach(function(eventId){var event=
events[eventId];"function"===typeof event&&this$1.events[eventId].subscribe(event)});"insertToken removeToken removeRange replaceToken replaceRange composeRUD".split(" ").forEach(function(eventId){this$1.events[eventId].subscribe(this$1.updateContextsRanges)})}function Tokenizer(events){this.tokens=[];this.registeredContexts={};this.contextCheckers=[];this.events={};this.registeredModifiers=[];initializeCoreEvents.call(this,events)}function isArabicChar(c){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(c)}
function isIsolatedArabicChar(char){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(char)}function isTashkeelArabicChar(char){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(char)}
function FeatureQuery(font){this.font=font;this.features={}}function SubstitutionAction(action){this.id=action.id;this.tag=action.tag;this.substitution=action.substitution}function lookupCoverage(glyphIndex,coverage){if(!glyphIndex)return-1;switch(coverage.format){case 1:return coverage.glyphs.indexOf(glyphIndex);case 2:coverage=coverage.ranges;for(var i=0;i<coverage.length;i++){var range=coverage[i];if(glyphIndex>=range.start&&glyphIndex<=range.end)return range.index+(glyphIndex-range.start)}}return-1}
function singleSubstitutionFormat1(glyphIndex,subtable){return-1===lookupCoverage(glyphIndex,subtable.coverage)?null:glyphIndex+subtable.deltaGlyphId}function singleSubstitutionFormat2(glyphIndex,subtable){glyphIndex=lookupCoverage(glyphIndex,subtable.coverage);return-1===glyphIndex?null:subtable.substitute[glyphIndex]}function lookupCoverageList(coverageList,contextParams){for(var lookupList=[],i=0;i<coverageList.length;i++){var coverage=coverageList[i],glyphIndex=contextParams.current;glyphIndex=
Array.isArray(glyphIndex)?glyphIndex[0]:glyphIndex;coverage=lookupCoverage(glyphIndex,coverage);-1!==coverage&&lookupList.push(coverage)}return lookupList.length!==coverageList.length?-1:lookupList}function chainingSubstitutionFormat3(contextParams,subtable){if(contextParams.context.length<subtable.inputCoverage.length+subtable.lookaheadCoverage.length+subtable.backtrackCoverage.length)return[];var inputLookups=lookupCoverageList(subtable.inputCoverage,contextParams);if(-1===inputLookups||contextParams.lookahead.length<
subtable.lookaheadCoverage.length)return[];for(var lookaheadContext=contextParams.lookahead.slice(subtable.inputCoverage.length-1);lookaheadContext.length&&isTashkeelArabicChar(lookaheadContext[0].char);)lookaheadContext.shift();lookaheadContext=new ContextParams(lookaheadContext,0);var lookaheadLookups=lookupCoverageList(subtable.lookaheadCoverage,lookaheadContext);lookaheadContext=[].concat(contextParams.backtrack);for(lookaheadContext.reverse();lookaheadContext.length&&isTashkeelArabicChar(lookaheadContext[0].char);)lookaheadContext.shift();
if(lookaheadContext.length<subtable.backtrackCoverage.length)return[];lookaheadContext=new ContextParams(lookaheadContext,0);var backtrackLookups=lookupCoverageList(subtable.backtrackCoverage,lookaheadContext);lookaheadContext=[];if(inputLookups.length===subtable.inputCoverage.length&&lookaheadLookups.length===subtable.lookaheadCoverage.length&&backtrackLookups.length===subtable.backtrackCoverage.length)for(lookaheadLookups=0;lookaheadLookups<subtable.lookupRecords.length;lookaheadLookups++){backtrackLookups=
this.getLookupByIndex(subtable.lookupRecords[lookaheadLookups].lookupListIndex);for(var s=0;s<backtrackLookups.subtables.length;s++){var subtable$1=backtrackLookups.subtables[s],lookup=this.getLookupMethod(backtrackLookups,subtable$1);if("12"===this.getSubstitutionType(backtrackLookups,subtable$1))for(subtable$1=0;subtable$1<inputLookups.length;subtable$1++){var glyphIndex=contextParams.get(subtable$1);(glyphIndex=lookup(glyphIndex))&&lookaheadContext.push(glyphIndex)}}}return lookaheadContext}function ligatureSubstitutionFormat1(contextParams,
subtable){var ligSetIndex=lookupCoverage(contextParams.current,subtable.coverage);if(-1===ligSetIndex)return null;ligSetIndex=subtable.ligatureSets[ligSetIndex];for(var s=0;s<ligSetIndex.length;s++){subtable=ligSetIndex[s];for(var l=0;l<subtable.components.length&&contextParams.lookahead[l]===subtable.components[l];l++)if(l===subtable.components.length-1)return subtable}return null}function decompositionSubstitutionFormat1(glyphIndex,subtable){glyphIndex=lookupCoverage(glyphIndex,subtable.coverage);
return-1===glyphIndex?null:subtable.sequences[glyphIndex]}function applySubstitution(action,tokens,index){if(action instanceof SubstitutionAction&&SUBSTITUTIONS[action.id])SUBSTITUTIONS[action.id](action,tokens,index)}function willConnectPrev(charContextParams){charContextParams=[].concat(charContextParams.backtrack);for(var i=charContextParams.length-1;0<=i;i--){var prevChar=charContextParams[i],isolated=isIsolatedArabicChar(prevChar);prevChar=isTashkeelArabicChar(prevChar);if(!isolated&&!prevChar)return!0;
if(isolated)break}return!1}function willConnectNext(charContextParams){if(isIsolatedArabicChar(charContextParams.current))return!1;for(var i=0;i<charContextParams.lookahead.length;i++)if(!isTashkeelArabicChar(charContextParams.lookahead[i]))return!0;return!1}function arabicPresentationForms(range){var this$1=this,tags=this.featuresTags.arab,tokens=this.tokenizer.getRangeTokens(range);if(1!==tokens.length){var contextParams=new ContextParams(tokens.map(function(token){return token.getState("glyphIndex")}),
0),charContextParams=new ContextParams(tokens.map(function(token){return token.char}),0);tokens.forEach(function(token,index$jscomp$0){if(!isTashkeelArabicChar(token.char)){contextParams.setCurrentIndex(index$jscomp$0);charContextParams.setCurrentIndex(index$jscomp$0);token=0;willConnectPrev(charContextParams)&&(token|=1);willConnectNext(charContextParams)&&(token|=2);switch(token){case 1:var tag="fina";break;case 2:tag="init";break;case 3:tag="medi"}if(-1!==tags.indexOf(tag)){tag=this$1.query.lookupFeature({tag,
script:"arab",contextParams});if(tag instanceof Error)return console.info(tag.message);tag.forEach(function(action,index){action instanceof SubstitutionAction&&(applySubstitution(action,tokens,index),contextParams.context[index]=action.substitution)})}}})}}function getContextParams(tokens,index){tokens=tokens.map(function(token){return token.activeState.value});return new ContextParams(tokens,index||0)}function arabicRequiredLigatures(range){var this$1=this,tokens=this.tokenizer.getRangeTokens(range),
contextParams=getContextParams(tokens);contextParams.context.forEach(function(glyphIndex,index){contextParams.setCurrentIndex(index);glyphIndex=this$1.query.lookupFeature({tag:"rlig",script:"arab",contextParams});glyphIndex.length&&(glyphIndex.forEach(function(action){return applySubstitution(action,tokens,index)}),contextParams=getContextParams(tokens))})}function getContextParams$1(tokens,index){tokens=tokens.map(function(token){return token.activeState.value});return new ContextParams(tokens,index||
0)}function latinLigature(range){var this$1=this,tokens=this.tokenizer.getRangeTokens(range),contextParams=getContextParams$1(tokens);contextParams.context.forEach(function(glyphIndex,index){contextParams.setCurrentIndex(index);glyphIndex=this$1.query.lookupFeature({tag:"liga",script:"latn",contextParams});glyphIndex.length&&(glyphIndex.forEach(function(action){return applySubstitution(action,tokens,index)}),contextParams=getContextParams$1(tokens))})}function Bidi(baseDir){this.baseDir=baseDir||
"ltr";this.tokenizer=new Tokenizer;this.featuresTags={}}function registerContextChecker(checkId){var check=this.contextChecks[checkId+"Check"];return this.tokenizer.registerContextChecker(checkId,check.startCheck,check.endCheck)}function reverseArabicSentences(){var this$1=this;this.tokenizer.getContextRanges("arabicSentence").forEach(function(range){var rangeTokens=this$1.tokenizer.getRangeTokens(range);this$1.tokenizer.replaceRange(range.startIndex,range.endOffset,rangeTokens.reverse())})}function checkGlyphIndexStatus(){if(-1===
this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw Error("glyphIndex modifier is required to apply arabic presentation features.");}function applyArabicPresentationForms(){var this$1=this;this.featuresTags.hasOwnProperty("arab")&&(checkGlyphIndexStatus.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(range){arabicPresentationForms.call(this$1,range)}))}function applyArabicRequireLigatures(){var this$1=this;this.featuresTags.hasOwnProperty("arab")&&-1!==this.featuresTags.arab.indexOf("rlig")&&
(checkGlyphIndexStatus.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(range){arabicRequiredLigatures.call(this$1,range)}))}function applyLatinLigatures(){var this$1=this;this.featuresTags.hasOwnProperty("latn")&&-1!==this.featuresTags.latn.indexOf("liga")&&(checkGlyphIndexStatus.call(this),this.tokenizer.getContextRanges("latinWord").forEach(function(range){latinLigature.call(this$1,range)}))}function Font(options){options=options||{};options.tables=options.tables||{};if(!options.empty){if(!options.familyName)throw"When creating a new Font object, familyName is required.";
if(!options.styleName)throw"When creating a new Font object, styleName is required.";if(!options.unitsPerEm)throw"When creating a new Font object, unitsPerEm is required.";if(!options.ascender)throw"When creating a new Font object, ascender is required.";if(!(0>=options.descender))throw"When creating a new Font object, negative descender value is required.";this.names={fontFamily:{en:options.familyName||" "},fontSubfamily:{en:options.styleName||" "},fullName:{en:options.fullName||options.familyName+
" "+options.styleName},postScriptName:{en:options.postScriptName||(options.familyName+options.styleName).replace(/\s/g,"")},designer:{en:options.designer||" "},designerURL:{en:options.designerURL||" "},manufacturer:{en:options.manufacturer||" "},manufacturerURL:{en:options.manufacturerURL||" "},license:{en:options.license||" "},licenseURL:{en:options.licenseURL||" "},version:{en:options.version||"Version 0.1"},description:{en:options.description||" "},copyright:{en:options.copyright||" "},trademark:{en:options.trademark||
" "}};this.unitsPerEm=options.unitsPerEm||1E3;this.ascender=options.ascender;this.descender=options.descender;this.createdTimestamp=options.createdTimestamp;this.tables=Object.assign(options.tables,{os2:Object.assign({usWeightClass:options.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:options.widthClass||this.usWidthClasses.MEDIUM,fsSelection:options.fsSelection||this.fsSelectionValues.REGULAR},options.tables.os2)})}this.supported=!0;this.glyphs=new glyphset.GlyphSet(this,options.glyphs||
[]);this.encoding=new DefaultEncoding(this);this.position=new Position(this);this.substitution=new Substitution(this);this.tables=this.tables||{};this._push=null;this._hmtxTableData={};Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if("truetype"===this.outlinesFormat)return this._hinting=new Hinting(this)}})}function addName(name,names){var nameString=JSON.stringify(name),nameID=256,nameKey;for(nameKey in names){var n=parseInt(nameKey);if(n&&!(256>n)){if(JSON.stringify(names[nameKey])===
nameString)return n;nameID<=n&&(nameID=n+1)}}names[nameID]=name;return nameID}function makeFvarAxis(n,axis,names){names=addName(axis.name,names);return[{name:"tag_"+n,type:"TAG",value:axis.tag},{name:"minValue_"+n,type:"FIXED",value:axis.minValue<<16},{name:"defaultValue_"+n,type:"FIXED",value:axis.defaultValue<<16},{name:"maxValue_"+n,type:"FIXED",value:axis.maxValue<<16},{name:"flags_"+n,type:"USHORT",value:0},{name:"nameID_"+n,type:"USHORT",value:names}]}function parseFvarAxis(data,start,names){var axis=
{};data=new parse.Parser(data,start);axis.tag=data.parseTag();axis.minValue=data.parseFixed();axis.defaultValue=data.parseFixed();axis.maxValue=data.parseFixed();data.skip("uShort",1);axis.name=names[data.parseUShort()]||{};return axis}function makeFvarInstance(n,inst,axes,names){names=addName(inst.name,names);names=[{name:"nameID_"+n,type:"USHORT",value:names},{name:"flags_"+n,type:"USHORT",value:0}];for(var i=0;i<axes.length;++i){var axisTag=axes[i].tag;names.push({name:"axis_"+n+" "+axisTag,type:"FIXED",
value:inst.coordinates[axisTag]<<16})}return names}function parseFvarInstance(data,start,axes,names){var inst={};data=new parse.Parser(data,start);inst.name=names[data.parseUShort()]||{};data.skip("uShort",1);inst.coordinates={};for(names=0;names<axes.length;++names)inst.coordinates[axes[names].tag]=data.parseFixed();return inst}function loadFromFile(path,callback){require("shadow$empty").readFile(path,function(err,buffer){if(err)return callback(err.message);callback(null,nodeBufferToArrayBuffer(buffer))})}
function loadFromUrl(url,callback){var request=new XMLHttpRequest;request.open("get",url,!0);request.responseType="arraybuffer";request.onload=function(){return request.response?callback(null,request.response):callback("Font could not be loaded: "+request.statusText)};request.onerror=function(){callback("Font could not be loaded")};request.send()}function parseOpenTypeTableEntries(data,numTables){for(var tableEntries=[],p=12,i=0;i<numTables;i+=1){var tag=parse.getTag(data,p),checksum=parse.getULong(data,
p+4),offset=parse.getULong(data,p+8),length=parse.getULong(data,p+12);tableEntries.push({tag,checksum,offset,length,compression:!1});p+=16}return tableEntries}function uncompressTable(data,tableEntry){if("WOFF"===tableEntry.compression){var inBuffer=new Uint8Array(data.buffer,tableEntry.offset+2,tableEntry.compressedLength-2);data=new Uint8Array(tableEntry.length);inBuffer=new Data(inBuffer,data);do{var bfinal=inBuffer;bfinal.bitcount--||(bfinal.tag=bfinal.source[bfinal.sourceIndex++],bfinal.bitcount=
7);var btype=bfinal.tag&1;bfinal.tag>>>=1;bfinal=btype;btype=tinf_read_bits(inBuffer,2,0);switch(btype){case 0:for(btype=inBuffer;8<btype.bitcount;)btype.sourceIndex--,btype.bitcount-=8;var length=btype.source[btype.sourceIndex+1];length=256*length+btype.source[btype.sourceIndex];var i=btype.source[btype.sourceIndex+3];i=256*i+btype.source[btype.sourceIndex+2];if(length!==(~i&65535))btype=-3;else{btype.sourceIndex+=4;for(i=length;i;--i)btype.dest[btype.destLen++]=btype.source[btype.sourceIndex++];
btype=btype.bitcount=0}break;case 1:btype=tinf_inflate_block_data(inBuffer,sltree,sdtree);break;case 2:var num;length=inBuffer;var lt=inBuffer.ltree,dt=inBuffer.dtree;i=tinf_read_bits(length,5,257);btype=tinf_read_bits(length,5,1);var length$jscomp$0=tinf_read_bits(length,4,4);for(num=0;19>num;++num)lengths[num]=0;for(num=0;num<length$jscomp$0;++num){var clen=tinf_read_bits(length,3,0);lengths[clcidx[num]]=clen}tinf_build_tree(code_tree,lengths,0,19);for(num=0;num<i+btype;)switch(length$jscomp$0=
tinf_decode_symbol(length,code_tree),length$jscomp$0){case 16:clen=lengths[num-1];for(length$jscomp$0=tinf_read_bits(length,2,3);length$jscomp$0;--length$jscomp$0)lengths[num++]=clen;break;case 17:for(length$jscomp$0=tinf_read_bits(length,3,3);length$jscomp$0;--length$jscomp$0)lengths[num++]=0;break;case 18:for(length$jscomp$0=tinf_read_bits(length,7,11);length$jscomp$0;--length$jscomp$0)lengths[num++]=0;break;default:lengths[num++]=length$jscomp$0}tinf_build_tree(lt,lengths,0,i);tinf_build_tree(dt,
lengths,i,btype);btype=tinf_inflate_block_data(inBuffer,inBuffer.ltree,inBuffer.dtree);break;default:btype=-3}if(0!==btype)throw Error("Data error");}while(!bfinal);inBuffer.destLen<inBuffer.dest.length&&("function"===typeof inBuffer.dest.slice?inBuffer.dest.slice(0,inBuffer.destLen):inBuffer.dest.subarray(0,inBuffer.destLen));if(data.byteLength!==tableEntry.length)throw Error("Decompression error: "+tableEntry.tag+" decompressed length doesn't match recorded length");return{data:new DataView(data.buffer,
0),offset:0}}return{data,offset:tableEntry.offset}}function parseBuffer(buffer,opt){opt=void 0===opt||null===opt?{}:opt;var font=new Font({empty:!0});buffer=new DataView(buffer,0);var numTables=parse.getTag(buffer,0);if(numTables===String.fromCharCode(0,1,0,0)||"true"===numTables||"typ1"===numTables){font.outlinesFormat="truetype";numTables=parse.getUShort(buffer,4);var tableEntries=parseOpenTypeTableEntries(buffer,numTables)}else if("OTTO"===numTables)font.outlinesFormat="cff",numTables=parse.getUShort(buffer,
4),tableEntries=parseOpenTypeTableEntries(buffer,numTables);else if("wOFF"===numTables){tableEntries=parse.getTag(buffer,4);if(tableEntries===String.fromCharCode(0,1,0,0))font.outlinesFormat="truetype";else if("OTTO"===tableEntries)font.outlinesFormat="cff";else throw Error("Unsupported OpenType flavor "+numTables);tableEntries=numTables=parse.getUShort(buffer,12);for(var tableEntries$jscomp$0=[],p=44,i=0;i<tableEntries;i+=1){var tag=parse.getTag(buffer,p),offset=parse.getULong(buffer,p+4),compLength=
parse.getULong(buffer,p+8),origLength=parse.getULong(buffer,p+12);tableEntries$jscomp$0.push({tag,offset,compression:compLength<origLength?"WOFF":!1,compressedLength:compLength,length:origLength});p+=20}tableEntries=tableEntries$jscomp$0}else throw Error("Unsupported OpenType signature "+numTables);for(tableEntries$jscomp$0=0;tableEntries$jscomp$0<numTables;tableEntries$jscomp$0+=1)switch(p=tableEntries[tableEntries$jscomp$0],p.tag){case "cmap":i=uncompressTable(buffer,p);font.tables.cmap=cmap.parse(i.data,
i.offset);font.encoding=new CmapEncoding(font.tables.cmap);break;case "cvt ":i=uncompressTable(buffer,p);i=new parse.Parser(i.data,i.offset);font.tables.cvt=i.parseShortList(p.length/2);break;case "fvar":var fvarTableEntry=p;break;case "fpgm":i=uncompressTable(buffer,p);i=new parse.Parser(i.data,i.offset);font.tables.fpgm=i.parseByteList(p.length);break;case "head":i=uncompressTable(buffer,p);font.tables.head=head.parse(i.data,i.offset);font.unitsPerEm=font.tables.head.unitsPerEm;var indexToLocFormat=
font.tables.head.indexToLocFormat;break;case "hhea":i=uncompressTable(buffer,p);font.tables.hhea=hhea.parse(i.data,i.offset);font.ascender=font.tables.hhea.ascender;font.descender=font.tables.hhea.descender;font.numberOfHMetrics=font.tables.hhea.numberOfHMetrics;break;case "hmtx":var hmtxTableEntry=p;break;case "ltag":i=uncompressTable(buffer,p);var ltagTable=ltag.parse(i.data,i.offset);break;case "maxp":i=uncompressTable(buffer,p);font.tables.maxp=maxp.parse(i.data,i.offset);font.numGlyphs=font.tables.maxp.numGlyphs;
break;case "name":var nameTableEntry=p;break;case "OS/2":i=uncompressTable(buffer,p);font.tables.os2=os2.parse(i.data,i.offset);break;case "post":i=uncompressTable(buffer,p);font.tables.post=post.parse(i.data,i.offset);font.glyphNames=new GlyphNames(font.tables.post);break;case "prep":i=uncompressTable(buffer,p);i=new parse.Parser(i.data,i.offset);font.tables.prep=i.parseByteList(p.length);break;case "glyf":var glyfTableEntry=p;break;case "loca":var locaTableEntry=p;break;case "CFF ":var cffTableEntry=
p;break;case "kern":var kernTableEntry=p;break;case "GPOS":var gposTableEntry=p;break;case "GSUB":var gsubTableEntry=p;break;case "meta":var metaTableEntry=p}nameTableEntry=uncompressTable(buffer,nameTableEntry);font.tables.name=_name.parse(nameTableEntry.data,nameTableEntry.offset,ltagTable);font.names=font.tables.name;if(glyfTableEntry&&locaTableEntry)indexToLocFormat=0===indexToLocFormat,locaTableEntry=uncompressTable(buffer,locaTableEntry),locaTableEntry=loca.parse(locaTableEntry.data,locaTableEntry.offset,
font.numGlyphs,indexToLocFormat),glyfTableEntry=uncompressTable(buffer,glyfTableEntry),font.glyphs=glyf.parse(glyfTableEntry.data,glyfTableEntry.offset,locaTableEntry,font,opt);else if(cffTableEntry)glyfTableEntry=uncompressTable(buffer,cffTableEntry),cff.parse(glyfTableEntry.data,glyfTableEntry.offset,font,opt);else throw Error("Font doesn't contain TrueType or CFF outlines.");hmtxTableEntry=uncompressTable(buffer,hmtxTableEntry);hmtx.parse(font,hmtxTableEntry.data,hmtxTableEntry.offset,font.numberOfHMetrics,
font.numGlyphs,font.glyphs,opt);if(opt.lowMemory)for(font._IndexToUnicodeMap={},opt=font.tables.cmap.glyphIndexMap,hmtxTableEntry=Object.keys(opt),glyfTableEntry=0;glyfTableEntry<hmtxTableEntry.length;glyfTableEntry+=1)locaTableEntry=hmtxTableEntry[glyfTableEntry],indexToLocFormat=opt[locaTableEntry],void 0===font._IndexToUnicodeMap[indexToLocFormat]?font._IndexToUnicodeMap[indexToLocFormat]={unicodes:[parseInt(locaTableEntry)]}:font._IndexToUnicodeMap[indexToLocFormat].unicodes.push(parseInt(locaTableEntry));
else{hmtxTableEntry=font.tables.cmap.glyphIndexMap;glyfTableEntry=Object.keys(hmtxTableEntry);for(locaTableEntry=0;locaTableEntry<glyfTableEntry.length;locaTableEntry+=1)indexToLocFormat=glyfTableEntry[locaTableEntry],opt=font.glyphs.get(hmtxTableEntry[indexToLocFormat]),opt.addUnicode(parseInt(indexToLocFormat));for(hmtxTableEntry=0;hmtxTableEntry<font.glyphs.length;hmtxTableEntry+=1)opt=font.glyphs.get(hmtxTableEntry),font.cffEncoding?opt.name=font.isCIDFont?"gid"+hmtxTableEntry:font.cffEncoding.charset[hmtxTableEntry]:
font.glyphNames.names&&(opt.name=font.glyphNames.glyphIndexToName(hmtxTableEntry))}kernTableEntry?(kernTableEntry=uncompressTable(buffer,kernTableEntry),font.kerningPairs=kern.parse(kernTableEntry.data,kernTableEntry.offset)):font.kerningPairs={};gposTableEntry&&(gposTableEntry=uncompressTable(buffer,gposTableEntry),font.tables.gpos=gpos.parse(gposTableEntry.data,gposTableEntry.offset),font.position.init());gsubTableEntry&&(gsubTableEntry=uncompressTable(buffer,gsubTableEntry),font.tables.gsub=gsub.parse(gsubTableEntry.data,
gsubTableEntry.offset));fvarTableEntry&&(fvarTableEntry=uncompressTable(buffer,fvarTableEntry),font.tables.fvar=fvar.parse(fvarTableEntry.data,fvarTableEntry.offset,font.names));metaTableEntry&&(metaTableEntry=uncompressTable(buffer,metaTableEntry),font.tables.meta=meta.parse(metaTableEntry.data,metaTableEntry.offset),font.metas=font.tables.meta);return font}function load(url,callback,opt){var loadFn="undefined"===typeof window?loadFromFile:loadFromUrl;return new Promise(function(resolve,reject){loadFn(url,
function(err,arrayBuffer){if(err){if(callback)return callback(err);reject(err)}try{var font=parseBuffer(arrayBuffer,opt)}catch(e){if(callback)return callback(e,null);reject(e)}if(callback)return callback(null,font);resolve(font)})})}function loadSync(url,opt){url=require("shadow$empty").readFileSync(url);return parseBuffer(nodeBufferToArrayBuffer(url),opt)}String.prototype.codePointAt||function(){var defineProperty=function(){try{var object={},$defineProperty=Object.defineProperty,result=$defineProperty(object,
object,object)&&$defineProperty}catch(error){}return result}(),codePointAt=function(position){if(null==this)throw TypeError();var string=String(this),size=string.length,index=position?Number(position):0;index!=index&&(index=0);if(!(0>index||index>=size))return position=string.charCodeAt(index),55296<=position&&56319>=position&&size>index+1&&(string=string.charCodeAt(index+1),56320<=string&&57343>=string)?1024*(position-55296)+string-56320+65536:position};defineProperty?defineProperty(String.prototype,
"codePointAt",{value:codePointAt,configurable:!0,writable:!0}):String.prototype.codePointAt=codePointAt}();var sltree=new Tree,sdtree=new Tree,length_bits=new Uint8Array(30),length_base=new Uint16Array(30),dist_bits=new Uint8Array(30),dist_base=new Uint16Array(30),clcidx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),code_tree=new Tree,lengths=new Uint8Array(320),offs=new Uint16Array(16);(function(lt,dt){var i;for(i=0;7>i;++i)lt.table[i]=0;lt.table[7]=24;lt.table[8]=152;lt.table[9]=
112;for(i=0;24>i;++i)lt.trans[i]=256+i;for(i=0;144>i;++i)lt.trans[24+i]=i;for(i=0;8>i;++i)lt.trans[168+i]=280+i;for(i=0;112>i;++i)lt.trans[176+i]=144+i;for(i=0;5>i;++i)dt.table[i]=0;dt.table[5]=32;for(i=0;32>i;++i)dt.trans[i]=i})(sltree,sdtree);tinf_build_bits_base(length_bits,length_base,4,3);tinf_build_bits_base(dist_bits,dist_base,2,1);length_bits[28]=0;length_base[28]=258;BoundingBox.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};BoundingBox.prototype.addPoint=
function(x,y){if("number"===typeof x){if(isNaN(this.x1)||isNaN(this.x2))this.x2=this.x1=x;x<this.x1&&(this.x1=x);x>this.x2&&(this.x2=x)}if("number"===typeof y){if(isNaN(this.y1)||isNaN(this.y2))this.y2=this.y1=y;y<this.y1&&(this.y1=y);y>this.y2&&(this.y2=y)}};BoundingBox.prototype.addX=function(x){this.addPoint(x,null)};BoundingBox.prototype.addY=function(y){this.addPoint(null,y)};BoundingBox.prototype.addBezier=function(x0,y0,x1,y1,x2,y2,x,y){var p0=[x0,y0];x1=[x1,y1];x2=[x2,y2];y2=[x,y];this.addPoint(x0,
y0);this.addPoint(x,y);for(x0=0;1>=x0;x0++)y0=6*p0[x0]-12*x1[x0]+6*x2[x0],x=-3*p0[x0]+9*x1[x0]-9*x2[x0]+3*y2[x0],y=3*x1[x0]-3*p0[x0],0===x?0!==y0&&(y0=-y/y0,0<y0&&1>y0&&(0===x0&&this.addX(derive(p0[x0],x1[x0],x2[x0],y2[x0],y0)),1===x0&&this.addY(derive(p0[x0],x1[x0],x2[x0],y2[x0],y0)))):(y=Math.pow(y0,2)-4*y*x,0>y||(y1=(-y0+Math.sqrt(y))/(2*x),0<y1&&1>y1&&(0===x0&&this.addX(derive(p0[x0],x1[x0],x2[x0],y2[x0],y1)),1===x0&&this.addY(derive(p0[x0],x1[x0],x2[x0],y2[x0],y1))),y0=(-y0-Math.sqrt(y))/(2*
x),0<y0&&1>y0&&(0===x0&&this.addX(derive(p0[x0],x1[x0],x2[x0],y2[x0],y0)),1===x0&&this.addY(derive(p0[x0],x1[x0],x2[x0],y2[x0],y0)))))};BoundingBox.prototype.addQuad=function(x0,y0,x1,y1,x,y){x1=x0+2/3*(x1-x0);y1=y0+2/3*(y1-y0);this.addBezier(x0,y0,x1,y1,x1+1/3*(x-x0),y1+1/3*(y-y0),x,y)};Path.prototype.moveTo=function(x,y){this.commands.push({type:"M",x,y})};Path.prototype.lineTo=function(x,y){this.commands.push({type:"L",x,y})};Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(x1,y1,x2,
y2,x,y){this.commands.push({type:"C",x1,y1,x2,y2,x,y})};Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(x1,y1,x,y){this.commands.push({type:"Q",x1,y1,x,y})};Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})};Path.prototype.extend=function(pathOrCommands){if(pathOrCommands.commands)pathOrCommands=pathOrCommands.commands;else if(pathOrCommands instanceof BoundingBox){this.moveTo(pathOrCommands.x1,pathOrCommands.y1);this.lineTo(pathOrCommands.x2,pathOrCommands.y1);
this.lineTo(pathOrCommands.x2,pathOrCommands.y2);this.lineTo(pathOrCommands.x1,pathOrCommands.y2);this.close();return}Array.prototype.push.apply(this.commands,pathOrCommands)};Path.prototype.getBoundingBox=function(){for(var box=new BoundingBox,startX=0,startY=0,prevX=0,prevY=0,i=0;i<this.commands.length;i++){var cmd=this.commands[i];switch(cmd.type){case "M":box.addPoint(cmd.x,cmd.y);startX=prevX=cmd.x;startY=prevY=cmd.y;break;case "L":box.addPoint(cmd.x,cmd.y);prevX=cmd.x;prevY=cmd.y;break;case "Q":box.addQuad(prevX,
prevY,cmd.x1,cmd.y1,cmd.x,cmd.y);prevX=cmd.x;prevY=cmd.y;break;case "C":box.addBezier(prevX,prevY,cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y);prevX=cmd.x;prevY=cmd.y;break;case "Z":prevX=startX;prevY=startY;break;default:throw Error("Unexpected path command "+cmd.type);}}box.isEmpty()&&box.addPoint(0,0);return box};Path.prototype.draw=function(ctx){ctx.beginPath();for(var i=0;i<this.commands.length;i+=1){var cmd=this.commands[i];"M"===cmd.type?ctx.moveTo(cmd.x,cmd.y):"L"===cmd.type?ctx.lineTo(cmd.x,
cmd.y):"C"===cmd.type?ctx.bezierCurveTo(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type?ctx.quadraticCurveTo(cmd.x1,cmd.y1,cmd.x,cmd.y):"Z"===cmd.type&&ctx.closePath()}this.fill&&(ctx.fillStyle=this.fill,ctx.fill());this.stroke&&(ctx.strokeStyle=this.stroke,ctx.lineWidth=this.strokeWidth,ctx.stroke())};Path.prototype.toPathData=function(decimalPlaces){function packValues(){for(var arguments$1=arguments,s="",i=0;i<arguments.length;i+=1){var v=arguments$1[i];0<=v&&0<i&&(s+=" ");v=Math.round(v)===
v?""+Math.round(v):v.toFixed(decimalPlaces);s+=v}return s}decimalPlaces=void 0!==decimalPlaces?decimalPlaces:2;for(var d="",i$jscomp$0=0;i$jscomp$0<this.commands.length;i$jscomp$0+=1){var cmd=this.commands[i$jscomp$0];"M"===cmd.type?d+="M"+packValues(cmd.x,cmd.y):"L"===cmd.type?d+="L"+packValues(cmd.x,cmd.y):"C"===cmd.type?d+="C"+packValues(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type?d+="Q"+packValues(cmd.x1,cmd.y1,cmd.x,cmd.y):"Z"===cmd.type&&(d+="Z")}return d};Path.prototype.toSVG=function(decimalPlaces){decimalPlaces=
'\x3cpath d\x3d"'+this.toPathData(decimalPlaces);decimalPlaces+='"';this.fill&&"black"!==this.fill&&(decimalPlaces=null===this.fill?decimalPlaces+' fill\x3d"none"':decimalPlaces+(' fill\x3d"'+this.fill+'"'));this.stroke&&(decimalPlaces+=' stroke\x3d"'+this.stroke+'" stroke-width\x3d"'+this.strokeWidth+'"');return decimalPlaces+"/\x3e"};Path.prototype.toDOMElement=function(decimalPlaces){decimalPlaces=this.toPathData(decimalPlaces);var newPath=document.createElementNS("http://www.w3.org/2000/svg",
"path");newPath.setAttribute("d",decimalPlaces);return newPath};var check={fail,argument,assert:argument},decode={},encode={},sizeOf={};encode.BYTE=function(v){check.argument(0<=v&&255>=v,"Byte value should be between 0 and 255.");return[v]};sizeOf.BYTE=constant(1);encode.CHAR=function(v){return[v.charCodeAt(0)]};sizeOf.CHAR=constant(1);encode.CHARARRAY=function(v){for(var b=[],i=0;i<v.length;i+=1)b[i]=v.charCodeAt(i);return b};sizeOf.CHARARRAY=function(v){return v.length};encode.USHORT=function(v){return[v>>
8&255,v&255]};sizeOf.USHORT=constant(2);encode.SHORT=function(v){32768<=v&&(v=-(65536-v));return[v>>8&255,v&255]};sizeOf.SHORT=constant(2);encode.UINT24=function(v){return[v>>16&255,v>>8&255,v&255]};sizeOf.UINT24=constant(3);encode.ULONG=function(v){return[v>>24&255,v>>16&255,v>>8&255,v&255]};sizeOf.ULONG=constant(4);encode.LONG=function(v){2147483648<=v&&(v=-(4294967296-v));return[v>>24&255,v>>16&255,v>>8&255,v&255]};sizeOf.LONG=constant(4);encode.FIXED=encode.ULONG;sizeOf.FIXED=sizeOf.ULONG;encode.FWORD=
encode.SHORT;sizeOf.FWORD=sizeOf.SHORT;encode.UFWORD=encode.USHORT;sizeOf.UFWORD=sizeOf.USHORT;encode.LONGDATETIME=function(v){return[0,0,0,0,v>>24&255,v>>16&255,v>>8&255,v&255]};sizeOf.LONGDATETIME=constant(8);encode.TAG=function(v){check.argument(4===v.length,"Tag should be exactly 4 ASCII characters.");return[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]};sizeOf.TAG=constant(4);encode.Card8=encode.BYTE;sizeOf.Card8=sizeOf.BYTE;encode.Card16=encode.USHORT;sizeOf.Card16=sizeOf.USHORT;
encode.OffSize=encode.BYTE;sizeOf.OffSize=sizeOf.BYTE;encode.SID=encode.USHORT;sizeOf.SID=sizeOf.USHORT;encode.NUMBER=function(v){return-107<=v&&107>=v?[v+139]:108<=v&&1131>=v?(v-=108,[(v>>8)+247,v&255]):-1131<=v&&-108>=v?(v=-v-108,[(v>>8)+251,v&255]):-32768<=v&&32767>=v?encode.NUMBER16(v):encode.NUMBER32(v)};sizeOf.NUMBER=function(v){return encode.NUMBER(v).length};encode.NUMBER16=function(v){return[28,v>>8&255,v&255]};sizeOf.NUMBER16=constant(3);encode.NUMBER32=function(v){return[29,v>>24&255,v>>
16&255,v>>8&255,v&255]};sizeOf.NUMBER32=constant(5);encode.REAL=function(v){var value=v.toString(),m=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(value);m&&(value=parseFloat("1e"+((m[2]?+m[2]:0)+m[1].length)),value=(Math.round(v*value)/value).toString());v="";m=0;for(var ii=value.length;m<ii;m+=1){var c=value[m];v="e"===c?v+("-"===value[++m]?"c":"b"):"."===c?v+"a":"-"===c?v+"e":v+c}v+=v.length&1?"f":"ff";value=[30];m=0;for(ii=v.length;m<ii;m+=2)value.push(parseInt(v.substr(m,2),16));return value};
sizeOf.REAL=function(v){return encode.REAL(v).length};encode.NAME=encode.CHARARRAY;sizeOf.NAME=sizeOf.CHARARRAY;encode.STRING=encode.CHARARRAY;sizeOf.STRING=sizeOf.CHARARRAY;decode.UTF8=function(data,offset,numBytes){for(var codePoints=[],j=0;j<numBytes;j++,offset+=1)codePoints[j]=data.getUint8(offset);return String.fromCharCode.apply(null,codePoints)};decode.UTF16=function(data,offset,numBytes){var codePoints=[];numBytes/=2;for(var j=0;j<numBytes;j++,offset+=2)codePoints[j]=data.getUint16(offset);
return String.fromCharCode.apply(null,codePoints)};encode.UTF16=function(v){for(var b=[],i=0;i<v.length;i+=1){var codepoint=v.charCodeAt(i);b[b.length]=codepoint>>8&255;b[b.length]=codepoint&255}return b};sizeOf.UTF16=function(v){return 2*v.length};var eightBitMacEncodings={"x-mac-croatian":"","x-mac-cyrillic":"",
"x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"",
"x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};
decode.MACSTRING=function(dataView,offset,dataLength,encoding){encoding=eightBitMacEncodings[encoding];if(void 0!==encoding){for(var result="",i=0;i<dataLength;i++){var c=dataView.getUint8(offset+i);result=127>=c?result+String.fromCharCode(c):result+encoding[c&127]}return result}};var macEncodingTableCache="function"===typeof WeakMap&&new WeakMap,macEncodingCacheKeys;encode.MACSTRING=function(str,encoding){a:{if(!macEncodingCacheKeys)for(table in macEncodingCacheKeys={},eightBitMacEncodings)macEncodingCacheKeys[table]=
new String(table);var table=macEncodingCacheKeys[encoding];if(void 0!==table){if(macEncodingTableCache){var cachedTable=macEncodingTableCache.get(table);if(void 0!==cachedTable){table=cachedTable;break a}}encoding=eightBitMacEncodings[encoding];if(void 0!==encoding){cachedTable={};for(var i=0;i<encoding.length;i++)cachedTable[encoding.charCodeAt(i)]=i+128;macEncodingTableCache&&macEncodingTableCache.set(table,cachedTable);table=cachedTable;break a}}table=void 0}if(void 0!==table){encoding=[];for(cachedTable=
0;cachedTable<str.length;cachedTable++){i=str.charCodeAt(cachedTable);if(128<=i&&(i=table[i],void 0===i))return;encoding[cachedTable]=i}return encoding}};sizeOf.MACSTRING=function(str,encoding){str=encode.MACSTRING(str,encoding);return void 0!==str?str.length:0};encode.VARDELTAS=function(deltas){for(var pos=0,result=[];pos<deltas.length;){var value=deltas[pos];if(0===value){value=pos;pos=0;for(var numDeltas=deltas.length;value<numDeltas&&64>pos&&0===deltas[value];)++value,++pos;result.push(128|pos-
1);pos=value}else if(-128<=value&&127>=value){value=deltas;var offset=pos;pos=result;var runLength=0,numDeltas$jscomp$0=value.length;for(numDeltas=offset;numDeltas<numDeltas$jscomp$0&&64>runLength;){var value$jscomp$0=value[numDeltas];if(!(-128<=value$jscomp$0&&127>=value$jscomp$0))break;if(0===value$jscomp$0&&numDeltas+1<numDeltas$jscomp$0&&0===value[numDeltas+1])break;++numDeltas;++runLength}for(pos.push(runLength-1);offset<numDeltas;++offset)pos.push(value[offset]+256&255);pos=numDeltas}else{value=
deltas;offset=pos;pos=result;runLength=0;numDeltas$jscomp$0=value.length;for(numDeltas=offset;numDeltas<numDeltas$jscomp$0&&64>runLength;){value$jscomp$0=value[numDeltas];if(0===value$jscomp$0)break;if(value$jscomp$0=-128<=value$jscomp$0&&127>=value$jscomp$0&&numDeltas+1<numDeltas$jscomp$0)value$jscomp$0=value[numDeltas+1],value$jscomp$0=-128<=value$jscomp$0&&127>=value$jscomp$0;if(value$jscomp$0)break;++numDeltas;++runLength}for(pos.push(64|runLength-1);offset<numDeltas;++offset)runLength=value[offset],
pos.push(runLength+65536>>8&255,runLength+256&255);pos=numDeltas}}return result};encode.INDEX=function(l){for(var offset=1,offsets=[offset],data=[],i=0;i<l.length;i+=1){var v=encode.OBJECT(l[i]);Array.prototype.push.apply(data,v);offset+=v.length;offsets.push(offset)}if(0===data.length)return[0,0];i=[];offset=1+Math.floor(Math.log(offset)/Math.log(2))/8|0;v=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][offset];for(var i$1=0;i$1<offsets.length;i$1+=1){var encodedOffset=v(offsets[i$1]);
Array.prototype.push.apply(i,encodedOffset)}return Array.prototype.concat(encode.Card16(l.length),encode.OffSize(offset),i,data)};sizeOf.INDEX=function(v){return encode.INDEX(v).length};encode.DICT=function(m){for(var d=[],keys=Object.keys(m),length=keys.length,i=0;i<length;i+=1){var k=parseInt(keys[i],0),v=m[k];d=d.concat(encode.OPERAND(v.value,v.type));d=d.concat(encode.OPERATOR(k))}return d};sizeOf.DICT=function(m){return encode.DICT(m).length};encode.OPERATOR=function(v){return 1200>v?[v]:[12,
v-1200]};encode.OPERAND=function(v,type){var d=[];if(Array.isArray(type))for(var i=0;i<type.length;i+=1)check.argument(v.length===type.length,"Not enough arguments given for type"+type),d=d.concat(encode.OPERAND(v[i],type[i]));else if("SID"===type)d=d.concat(encode.NUMBER(v));else if("offset"===type)d=d.concat(encode.NUMBER32(v));else if("number"===type)d=d.concat(encode.NUMBER(v));else if("real"===type)d=d.concat(encode.REAL(v));else throw Error("Unknown operand type "+type);return d};encode.OP=
encode.BYTE;sizeOf.OP=sizeOf.BYTE;var wmm="function"===typeof WeakMap&&new WeakMap;encode.CHARSTRING=function(ops){if(wmm){var cachedValue=wmm.get(ops);if(void 0!==cachedValue)return cachedValue}cachedValue=[];for(var length=ops.length,i=0;i<length;i+=1){var op=ops[i];cachedValue=cachedValue.concat(encode[op.type](op.value))}wmm&&wmm.set(ops,cachedValue);return cachedValue};sizeOf.CHARSTRING=function(ops){return encode.CHARSTRING(ops).length};encode.OBJECT=function(v){var encodingFunction=encode[v.type];
check.argument(void 0!==encodingFunction,"No encoding function for type "+v.type);return encodingFunction(v.value)};sizeOf.OBJECT=function(v){var sizeOfFunction=sizeOf[v.type];check.argument(void 0!==sizeOfFunction,"No sizeOf function for type "+v.type);return sizeOfFunction(v.value)};encode.TABLE=function(table){for(var d=[],length=table.fields.length,subtables=[],subtableOffsets=[],i=0;i<length;i+=1){var field=table.fields[i],encodingFunction=encode[field.type];check.argument(void 0!==encodingFunction,
"No encoding function for field type "+field.type+" ("+field.name+")");var value=table[field.name];void 0===value&&(value=field.value);encodingFunction=encodingFunction(value);"TABLE"===field.type?(subtableOffsets.push(d.length),d=d.concat([0,0]),subtables.push(encodingFunction)):d=d.concat(encodingFunction)}for(length=0;length<subtables.length;length+=1)i=subtableOffsets[length],field=d.length,check.argument(65536>field,"Table "+table.tableName+" too big."),d[i]=field>>8,d[i+1]=field&255,d=d.concat(subtables[length]);
return d};sizeOf.TABLE=function(table){for(var numBytes=0,length=table.fields.length,i=0;i<length;i+=1){var field=table.fields[i],sizeOfFunction=sizeOf[field.type];check.argument(void 0!==sizeOfFunction,"No sizeOf function for field type "+field.type+" ("+field.name+")");var value=table[field.name];void 0===value&&(value=field.value);numBytes+=sizeOfFunction(value);"TABLE"===field.type&&(numBytes+=2)}return numBytes};encode.RECORD=encode.TABLE;sizeOf.RECORD=sizeOf.TABLE;encode.LITERAL=function(v){return v};
sizeOf.LITERAL=function(v){return v.length};Table.prototype.encode=function(){return encode.TABLE(this)};Table.prototype.sizeOf=function(){return sizeOf.TABLE(this)};Coverage.prototype=Object.create(Table.prototype);Coverage.prototype.constructor=Coverage;ScriptList.prototype=Object.create(Table.prototype);ScriptList.prototype.constructor=ScriptList;FeatureList.prototype=Object.create(Table.prototype);FeatureList.prototype.constructor=FeatureList;LookupList.prototype=Object.create(Table.prototype);
LookupList.prototype.constructor=LookupList;var table={Table,Record:Table,Coverage,ScriptList,FeatureList,LookupList,ushortList,tableList,recordList},typeOffsets={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};Parser.prototype.parseByte=function(){var v=this.data.getUint8(this.offset+this.relativeOffset);this.relativeOffset+=1;return v};Parser.prototype.parseChar=function(){var v=this.data.getInt8(this.offset+this.relativeOffset);this.relativeOffset+=1;return v};Parser.prototype.parseCard8=
Parser.prototype.parseByte;Parser.prototype.parseUShort=function(){var v=this.data.getUint16(this.offset+this.relativeOffset);this.relativeOffset+=2;return v};Parser.prototype.parseCard16=Parser.prototype.parseUShort;Parser.prototype.parseSID=Parser.prototype.parseUShort;Parser.prototype.parseOffset16=Parser.prototype.parseUShort;Parser.prototype.parseShort=function(){var v=this.data.getInt16(this.offset+this.relativeOffset);this.relativeOffset+=2;return v};Parser.prototype.parseF2Dot14=function(){var v=
this.data.getInt16(this.offset+this.relativeOffset)/16384;this.relativeOffset+=2;return v};Parser.prototype.parseULong=function(){var v=getULong(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return v};Parser.prototype.parseOffset32=Parser.prototype.parseULong;Parser.prototype.parseFixed=function(){var v=getFixed(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return v};Parser.prototype.parseString=function(length){var dataView=this.data,offset=this.offset+this.relativeOffset,
string="";this.relativeOffset+=length;for(var i=0;i<length;i++)string+=String.fromCharCode(dataView.getUint8(offset+i));return string};Parser.prototype.parseTag=function(){return this.parseString(4)};Parser.prototype.parseLongDateTime=function(){var v=getULong(this.data,this.offset+this.relativeOffset+4);this.relativeOffset+=8;return v-2082844800};Parser.prototype.parseVersion=function(minorBase){var major=getUShort(this.data,this.offset+this.relativeOffset),minor=getUShort(this.data,this.offset+
this.relativeOffset+2);this.relativeOffset+=4;void 0===minorBase&&(minorBase=4096);return major+minor/minorBase/10};Parser.prototype.skip=function(type,amount){void 0===amount&&(amount=1);this.relativeOffset+=typeOffsets[type]*amount};Parser.prototype.parseULongList=function(count){void 0===count&&(count=this.parseULong());for(var offsets=Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)offsets[i]=dataView.getUint32(offset),offset+=4;this.relativeOffset+=4*count;
return offsets};Parser.prototype.parseOffset16List=Parser.prototype.parseUShortList=function(count){void 0===count&&(count=this.parseUShort());for(var offsets=Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)offsets[i]=dataView.getUint16(offset),offset+=2;this.relativeOffset+=2*count;return offsets};Parser.prototype.parseShortList=function(count){for(var list=Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)list[i]=dataView.getInt16(offset),
offset+=2;this.relativeOffset+=2*count;return list};Parser.prototype.parseByteList=function(count){for(var list=Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)list[i]=dataView.getUint8(offset++);this.relativeOffset+=count;return list};Parser.prototype.parseList=function(count,itemCallback){itemCallback||(itemCallback=count,count=this.parseUShort());for(var list=Array(count),i=0;i<count;i++)list[i]=itemCallback.call(this);return list};Parser.prototype.parseList32=
function(count,itemCallback){itemCallback||(itemCallback=count,count=this.parseULong());for(var list=Array(count),i=0;i<count;i++)list[i]=itemCallback.call(this);return list};Parser.prototype.parseRecordList=function(count,recordDescription){recordDescription||(recordDescription=count,count=this.parseUShort());for(var records=Array(count),fields=Object.keys(recordDescription),i=0;i<count;i++){for(var rec={},j=0;j<fields.length;j++){var fieldName=fields[j];rec[fieldName]=recordDescription[fieldName].call(this)}records[i]=
rec}return records};Parser.prototype.parseRecordList32=function(count,recordDescription){recordDescription||(recordDescription=count,count=this.parseULong());for(var records=Array(count),fields=Object.keys(recordDescription),i=0;i<count;i++){for(var rec={},j=0;j<fields.length;j++){var fieldName=fields[j];rec[fieldName]=recordDescription[fieldName].call(this)}records[i]=rec}return records};Parser.prototype.parseStruct=function(description){if("function"===typeof description)return description.call(this);
for(var fields=Object.keys(description),struct={},j=0;j<fields.length;j++){var fieldName=fields[j];struct[fieldName]=description[fieldName].call(this)}return struct};Parser.prototype.parseValueRecord=function(valueFormat){void 0===valueFormat&&(valueFormat=this.parseUShort());if(0!==valueFormat){var valueRecord={};valueFormat&1&&(valueRecord.xPlacement=this.parseShort());valueFormat&2&&(valueRecord.yPlacement=this.parseShort());valueFormat&4&&(valueRecord.xAdvance=this.parseShort());valueFormat&8&&
(valueRecord.yAdvance=this.parseShort());valueFormat&16&&(valueRecord.xPlaDevice=void 0,this.parseShort());valueFormat&32&&(valueRecord.yPlaDevice=void 0,this.parseShort());valueFormat&64&&(valueRecord.xAdvDevice=void 0,this.parseShort());valueFormat&128&&(valueRecord.yAdvDevice=void 0,this.parseShort());return valueRecord}};Parser.prototype.parseValueRecordList=function(){for(var valueFormat=this.parseUShort(),valueCount=this.parseUShort(),values=Array(valueCount),i=0;i<valueCount;i++)values[i]=
this.parseValueRecord(valueFormat);return values};Parser.prototype.parsePointer=function(description){var structOffset=this.parseOffset16();if(0<structOffset)return(new Parser(this.data,this.offset+structOffset)).parseStruct(description)};Parser.prototype.parsePointer32=function(description){var structOffset=this.parseOffset32();if(0<structOffset)return(new Parser(this.data,this.offset+structOffset)).parseStruct(description)};Parser.prototype.parseListOfLists=function(itemCallback){for(var offsets=
this.parseOffset16List(),count=offsets.length,relativeOffset=this.relativeOffset,list=Array(count),i=0;i<count;i++){var start=offsets[i];if(0===start)list[i]=void 0;else if(this.relativeOffset=start,itemCallback){for(var subOffsets=this.parseOffset16List(),subList=Array(subOffsets.length),j=0;j<subOffsets.length;j++)this.relativeOffset=start+subOffsets[j],subList[j]=itemCallback.call(this);list[i]=subList}else list[i]=this.parseUShortList()}this.relativeOffset=relativeOffset;return list};Parser.prototype.parseCoverage=
function(){var startOffset=this.offset+this.relativeOffset,format=this.parseUShort(),count=this.parseUShort();if(1===format)return{format:1,glyphs:this.parseUShortList(count)};if(2===format){startOffset=Array(count);for(format=0;format<count;format++)startOffset[format]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:startOffset}}throw Error("0x"+startOffset.toString(16)+": Coverage format must be 1 or 2.");};Parser.prototype.parseClassDef=function(){var startOffset=
this.offset+this.relativeOffset,format=this.parseUShort();if(1===format)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===format)return{format:2,ranges:this.parseRecordList({start:Parser.uShort,end:Parser.uShort,classId:Parser.uShort})};throw Error("0x"+startOffset.toString(16)+": ClassDef format must be 1 or 2.");};Parser.list=function(count,itemCallback){return function(){return this.parseList(count,itemCallback)}};Parser.list32=function(count,itemCallback){return function(){return this.parseList32(count,
itemCallback)}};Parser.recordList=function(count,recordDescription){return function(){return this.parseRecordList(count,recordDescription)}};Parser.recordList32=function(count,recordDescription){return function(){return this.parseRecordList32(count,recordDescription)}};Parser.pointer=function(description){return function(){return this.parsePointer(description)}};Parser.pointer32=function(description){return function(){return this.parsePointer32(description)}};Parser.tag=Parser.prototype.parseTag;
Parser.byte=Parser.prototype.parseByte;Parser.uShort=Parser.offset16=Parser.prototype.parseUShort;Parser.uShortList=Parser.prototype.parseUShortList;Parser.uLong=Parser.offset32=Parser.prototype.parseULong;Parser.uLongList=Parser.prototype.parseULongList;Parser.struct=Parser.prototype.parseStruct;Parser.coverage=Parser.prototype.parseCoverage;Parser.classDef=Parser.prototype.parseClassDef;var langSysTable={reserved:Parser.uShort,reqFeatureIndex:Parser.uShort,featureIndexes:Parser.uShortList};Parser.prototype.parseScriptList=
function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,script:Parser.pointer({defaultLangSys:Parser.pointer(langSysTable),langSysRecords:Parser.recordList({tag:Parser.tag,langSys:Parser.pointer(langSysTable)})})}))||[]};Parser.prototype.parseFeatureList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,feature:Parser.pointer({featureParams:Parser.offset16,lookupListIndexes:Parser.uShortList})}))||[]};Parser.prototype.parseLookupList=function(lookupTableParsers){return this.parsePointer(Parser.list(Parser.pointer(function(){var lookupType=
this.parseUShort();check.argument(1<=lookupType&&9>=lookupType,"GPOS/GSUB lookup type "+lookupType+" unknown.");var lookupFlag=this.parseUShort(),useMarkFilteringSet=lookupFlag&16;return{lookupType,lookupFlag,subtables:this.parseList(Parser.pointer(lookupTableParsers[lookupType])),markFilteringSet:useMarkFilteringSet?this.parseUShort():void 0}})))||[]};Parser.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var majorVersion=this.parseUShort(),minorVersion=this.parseUShort();
check.argument(1===majorVersion&&1>minorVersion,"GPOS/GSUB feature variations table unknown.");return this.parseRecordList32({conditionSetOffset:Parser.offset32,featureTableSubstitutionOffset:Parser.offset32})})||[]};var parse={getByte,getCard8:getByte,getUShort,getCard16:getUShort,getShort:function(dataView,offset){return dataView.getInt16(offset,!1)},getULong,getFixed,getTag:function(dataView,offset){for(var tag="",i=offset;i<offset+4;i+=1)tag+=String.fromCharCode(dataView.getInt8(i));return tag},
getOffset:function(dataView,offset,offSize){for(var v=0,i=0;i<offSize;i+=1)v<<=8,v+=dataView.getUint8(offset+i);return v},getBytes:function(dataView,startOffset,endOffset){for(var bytes=[];startOffset<endOffset;startOffset+=1)bytes.push(dataView.getUint8(startOffset));return bytes},bytesToString:function(bytes){for(var s="",i=0;i<bytes.length;i+=1)s+=String.fromCharCode(bytes[i]);return s},Parser},cmap={parse:function(data,start){var cmap={};cmap.version=parse.getUShort(data,start);check.argument(0===
cmap.version,"cmap table version should be 0.");cmap.numTables=parse.getUShort(data,start+2);for(var offset=-1,i=cmap.numTables-1;0<=i;--i){var platformId=parse.getUShort(data,start+4+8*i),encodingId=parse.getUShort(data,start+4+8*i+2);if(3===platformId&&(0===encodingId||1===encodingId||10===encodingId)||0===platformId&&(0===encodingId||1===encodingId||2===encodingId||3===encodingId||4===encodingId)){offset=parse.getULong(data,start+4+8*i+4);break}}if(-1===offset)throw Error("No valid cmap sub-tables found.");
i=new parse.Parser(data,start+offset);cmap.format=i.parseUShort();if(12===cmap.format)for(i.parseUShort(),cmap.length=i.parseULong(),cmap.language=i.parseULong(),cmap.groupCount=data=i.parseULong(),cmap.glyphIndexMap={},offset=0;offset<data;offset+=1)for(start=i.parseULong(),platformId=i.parseULong(),encodingId=i.parseULong();start<=platformId;start+=1)cmap.glyphIndexMap[start]=encodingId,encodingId++;else if(4===cmap.format){var offset$jscomp$0=offset;cmap.length=i.parseUShort();cmap.language=i.parseUShort();
cmap.segCount=offset=i.parseUShort()>>1;i.skip("uShort",3);cmap.glyphIndexMap={};i=new parse.Parser(data,start+offset$jscomp$0+14);platformId=new parse.Parser(data,start+offset$jscomp$0+16+2*offset);encodingId=new parse.Parser(data,start+offset$jscomp$0+16+4*offset);start=new parse.Parser(data,start+offset$jscomp$0+16+6*offset);for(offset$jscomp$0=0;offset$jscomp$0<offset-1;offset$jscomp$0+=1)for(var endCount=i.parseUShort(),startCount=platformId.parseUShort(),idDelta=encodingId.parseShort(),idRangeOffset=
start.parseUShort(),c=startCount;c<=endCount;c+=1){if(0!==idRangeOffset){var glyphIndexOffset=start.offset+start.relativeOffset-2;glyphIndexOffset+=idRangeOffset;glyphIndexOffset+=2*(c-startCount);glyphIndexOffset=parse.getUShort(data,glyphIndexOffset);0!==glyphIndexOffset&&(glyphIndexOffset=glyphIndexOffset+idDelta&65535)}else glyphIndexOffset=c+idDelta&65535;cmap.glyphIndexMap[c]=glyphIndexOffset}}else throw Error("Only format 4 and 12 cmap tables are supported (found format "+cmap.format+").");
return cmap},make:function(glyphs){var isPlan0Only=!0,i;for(i=glyphs.length-1;0<i;--i)if(65535<glyphs.get(i).unicode){console.log("Adding CMAP format 12 (needed!)");isPlan0Only=!1;break}var cmapTable=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:isPlan0Only?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:isPlan0Only?12:20}];isPlan0Only||(cmapTable=cmapTable.concat([{name:"cmap12PlatformID",type:"USHORT",
value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}]));cmapTable=cmapTable.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);cmapTable=new table.Table("cmap",cmapTable);cmapTable.segments=[];for(i=0;i<
glyphs.length;i+=1){for(var glyph=glyphs.get(i),j=0;j<glyph.unicodes.length;j+=1)addSegment(cmapTable,glyph.unicodes[j],i);cmapTable.segments=cmapTable.segments.sort(function(a,b){return a.start-b.start})}cmapTable.segments.push({end:65535,start:65535,delta:1,offset:0});glyph=cmapTable.segments.length;j=0;var endCounts=[],startCounts=[],idDeltas=[],idRangeOffsets=[],glyphIds=[];glyphs=[];for(i=0;i<glyph;i+=1){var segment=cmapTable.segments[i];65535>=segment.end&&65535>=segment.start?(endCounts=endCounts.concat({name:"end_"+
i,type:"USHORT",value:segment.end}),startCounts=startCounts.concat({name:"start_"+i,type:"USHORT",value:segment.start}),idDeltas=idDeltas.concat({name:"idDelta_"+i,type:"SHORT",value:segment.delta}),idRangeOffsets=idRangeOffsets.concat({name:"idRangeOffset_"+i,type:"USHORT",value:segment.offset}),void 0!==segment.glyphId&&(glyphIds=glyphIds.concat({name:"glyph_"+i,type:"USHORT",value:segment.glyphId}))):j+=1;isPlan0Only||void 0===segment.glyphIndex||(glyphs=glyphs.concat({name:"cmap12Start_"+i,type:"ULONG",
value:segment.start}),glyphs=glyphs.concat({name:"cmap12End_"+i,type:"ULONG",value:segment.end}),glyphs=glyphs.concat({name:"cmap12Glyph_"+i,type:"ULONG",value:segment.glyphIndex}))}cmapTable.segCountX2=2*(glyph-j);cmapTable.searchRange=2*Math.pow(2,Math.floor(Math.log(glyph-j)/Math.log(2)));cmapTable.entrySelector=Math.log(cmapTable.searchRange/2)/Math.log(2);cmapTable.rangeShift=cmapTable.segCountX2-cmapTable.searchRange;cmapTable.fields=cmapTable.fields.concat(endCounts);cmapTable.fields.push({name:"reservedPad",
type:"USHORT",value:0});cmapTable.fields=cmapTable.fields.concat(startCounts);cmapTable.fields=cmapTable.fields.concat(idDeltas);cmapTable.fields=cmapTable.fields.concat(idRangeOffsets);cmapTable.fields=cmapTable.fields.concat(glyphIds);cmapTable.cmap4Length=2*endCounts.length+16+2*startCounts.length+2*idDeltas.length+2*idRangeOffsets.length+2*glyphIds.length;isPlan0Only||(isPlan0Only=16+4*glyphs.length,cmapTable.cmap12Offset=20+cmapTable.cmap4Length,cmapTable.fields=cmapTable.fields.concat([{name:"cmap12Format",
type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:isPlan0Only},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:glyphs.length/3}]),cmapTable.fields=cmapTable.fields.concat(glyphs));return cmapTable}},cffStandardStrings=".notdef;space;exclam;quotedbl;numbersign;dollar;percent;ampersand;quoteright;parenleft;parenright;asterisk;plus;comma;hyphen;period;slash;zero;one;two;three;four;five;six;seven;eight;nine;colon;semicolon;less;equal;greater;question;at;A;B;C;D;E;F;G;H;I;J;K;L;M;N;O;P;Q;R;S;T;U;V;W;X;Y;Z;bracketleft;backslash;bracketright;asciicircum;underscore;quoteleft;a;b;c;d;e;f;g;h;i;j;k;l;m;n;o;p;q;r;s;t;u;v;w;x;y;z;braceleft;bar;braceright;asciitilde;exclamdown;cent;sterling;fraction;yen;florin;section;currency;quotesingle;quotedblleft;guillemotleft;guilsinglleft;guilsinglright;fi;fl;endash;dagger;daggerdbl;periodcentered;paragraph;bullet;quotesinglbase;quotedblbase;quotedblright;guillemotright;ellipsis;perthousand;questiondown;grave;acute;circumflex;tilde;macron;breve;dotaccent;dieresis;ring;cedilla;hungarumlaut;ogonek;caron;emdash;AE;ordfeminine;Lslash;Oslash;OE;ordmasculine;ae;dotlessi;lslash;oslash;oe;germandbls;onesuperior;logicalnot;mu;trademark;Eth;onehalf;plusminus;Thorn;onequarter;divide;brokenbar;degree;thorn;threequarters;twosuperior;registered;minus;eth;multiply;threesuperior;copyright;Aacute;Acircumflex;Adieresis;Agrave;Aring;Atilde;Ccedilla;Eacute;Ecircumflex;Edieresis;Egrave;Iacute;Icircumflex;Idieresis;Igrave;Ntilde;Oacute;Ocircumflex;Odieresis;Ograve;Otilde;Scaron;Uacute;Ucircumflex;Udieresis;Ugrave;Yacute;Ydieresis;Zcaron;aacute;acircumflex;adieresis;agrave;aring;atilde;ccedilla;eacute;ecircumflex;edieresis;egrave;iacute;icircumflex;idieresis;igrave;ntilde;oacute;ocircumflex;odieresis;ograve;otilde;scaron;uacute;ucircumflex;udieresis;ugrave;yacute;ydieresis;zcaron;exclamsmall;Hungarumlautsmall;dollaroldstyle;dollarsuperior;ampersandsmall;Acutesmall;parenleftsuperior;parenrightsuperior;266 ff;onedotenleader;zerooldstyle;oneoldstyle;twooldstyle;threeoldstyle;fouroldstyle;fiveoldstyle;sixoldstyle;sevenoldstyle;eightoldstyle;nineoldstyle;commasuperior;threequartersemdash;periodsuperior;questionsmall;asuperior;bsuperior;centsuperior;dsuperior;esuperior;isuperior;lsuperior;msuperior;nsuperior;osuperior;rsuperior;ssuperior;tsuperior;ff;ffi;ffl;parenleftinferior;parenrightinferior;Circumflexsmall;hyphensuperior;Gravesmall;Asmall;Bsmall;Csmall;Dsmall;Esmall;Fsmall;Gsmall;Hsmall;Ismall;Jsmall;Ksmall;Lsmall;Msmall;Nsmall;Osmall;Psmall;Qsmall;Rsmall;Ssmall;Tsmall;Usmall;Vsmall;Wsmall;Xsmall;Ysmall;Zsmall;colonmonetary;onefitted;rupiah;Tildesmall;exclamdownsmall;centoldstyle;Lslashsmall;Scaronsmall;Zcaronsmall;Dieresissmall;Brevesmall;Caronsmall;Dotaccentsmall;Macronsmall;figuredash;hypheninferior;Ogoneksmall;Ringsmall;Cedillasmall;questiondownsmall;oneeighth;threeeighths;fiveeighths;seveneighths;onethird;twothirds;zerosuperior;foursuperior;fivesuperior;sixsuperior;sevensuperior;eightsuperior;ninesuperior;zeroinferior;oneinferior;twoinferior;threeinferior;fourinferior;fiveinferior;sixinferior;seveninferior;eightinferior;nineinferior;centinferior;dollarinferior;periodinferior;commainferior;Agravesmall;Aacutesmall;Acircumflexsmall;Atildesmall;Adieresissmall;Aringsmall;AEsmall;Ccedillasmall;Egravesmall;Eacutesmall;Ecircumflexsmall;Edieresissmall;Igravesmall;Iacutesmall;Icircumflexsmall;Idieresissmall;Ethsmall;Ntildesmall;Ogravesmall;Oacutesmall;Ocircumflexsmall;Otildesmall;Odieresissmall;OEsmall;Oslashsmall;Ugravesmall;Uacutesmall;Ucircumflexsmall;Udieresissmall;Yacutesmall;Thornsmall;Ydieresissmall;001.000;001.001;001.002;001.003;Black;Bold;Book;Light;Medium;Regular;Roman;Semibold".split(";"),
cffStandardEncoding="                                space exclam quotedbl numbersign dollar percent ampersand quoteright parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore quoteleft a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde                                   exclamdown cent sterling fraction yen florin section currency quotesingle quotedblleft guillemotleft guilsinglleft guilsinglright fi fl  endash dagger daggerdbl periodcentered  paragraph bullet quotesinglbase quotedblbase quotedblright guillemotright ellipsis perthousand  questiondown  grave acute circumflex tilde macron breve dotaccent dieresis  ring cedilla  hungarumlaut ogonek caron emdash                 AE  ordfeminine     Lslash Oslash OE ordmasculine      ae    dotlessi   lslash oslash oe germandbls".split(" "),
cffExpertEncoding="                                space exclamsmall Hungarumlautsmall  dollaroldstyle dollarsuperior ampersandsmall Acutesmall parenleftsuperior parenrightsuperior twodotenleader onedotenleader comma hyphen period fraction zerooldstyle oneoldstyle twooldstyle threeoldstyle fouroldstyle fiveoldstyle sixoldstyle sevenoldstyle eightoldstyle nineoldstyle colon semicolon commasuperior threequartersemdash periodsuperior questionsmall  asuperior bsuperior centsuperior dsuperior esuperior   isuperior   lsuperior msuperior nsuperior osuperior   rsuperior ssuperior tsuperior  ff fi fl ffi ffl parenleftinferior  parenrightinferior Circumflexsmall hyphensuperior Gravesmall Asmall Bsmall Csmall Dsmall Esmall Fsmall Gsmall Hsmall Ismall Jsmall Ksmall Lsmall Msmall Nsmall Osmall Psmall Qsmall Rsmall Ssmall Tsmall Usmall Vsmall Wsmall Xsmall Ysmall Zsmall colonmonetary onefitted rupiah Tildesmall                                   exclamdownsmall centoldstyle Lslashsmall   Scaronsmall Zcaronsmall Dieresissmall Brevesmall Caronsmall  Dotaccentsmall   Macronsmall   figuredash hypheninferior   Ogoneksmall Ringsmall Cedillasmall    onequarter onehalf threequarters questiondownsmall oneeighth threeeighths fiveeighths seveneighths onethird twothirds   zerosuperior onesuperior twosuperior threesuperior foursuperior fivesuperior sixsuperior sevensuperior eightsuperior ninesuperior zeroinferior oneinferior twoinferior threeinferior fourinferior fiveinferior sixinferior seveninferior eightinferior nineinferior centinferior dollarinferior periodinferior commainferior Agravesmall Aacutesmall Acircumflexsmall Atildesmall Adieresissmall Aringsmall AEsmall Ccedillasmall Egravesmall Eacutesmall Ecircumflexsmall Edieresissmall Igravesmall Iacutesmall Icircumflexsmall Idieresissmall Ethsmall Ntildesmall Ogravesmall Oacutesmall Ocircumflexsmall Otildesmall Odieresissmall OEsmall Oslashsmall Ugravesmall Uacutesmall Ucircumflexsmall Udieresissmall Yacutesmall Thornsmall Ydieresissmall".split(" "),
standardNames=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(" ");
DefaultEncoding.prototype.charToGlyphIndex=function(c){c=c.codePointAt(0);var glyphs=this.font.glyphs;if(glyphs)for(var i=0;i<glyphs.length;i+=1)for(var glyph=glyphs.get(i),j=0;j<glyph.unicodes.length;j+=1)if(glyph.unicodes[j]===c)return i;return null};CmapEncoding.prototype.charToGlyphIndex=function(c){return this.cmap.glyphIndexMap[c.codePointAt(0)]||0};CffEncoding.prototype.charToGlyphIndex=function(s){s=s.codePointAt(0);return this.charset.indexOf(this.encoding[s])};GlyphNames.prototype.nameToGlyphIndex=
function(name){return this.names.indexOf(name)};GlyphNames.prototype.glyphIndexToName=function(gid){return this.names[gid]};var draw={line:function(ctx,x1,y1,x2,y2){ctx.beginPath();ctx.moveTo(x1,y1);ctx.lineTo(x2,y2);ctx.stroke()}};Glyph.prototype.bindConstructorValues=function(options){this.index=options.index||0;this.name=options.name||null;this.unicode=options.unicode||void 0;this.unicodes=options.unicodes||void 0!==options.unicode?[options.unicode]:[];"xMin"in options&&(this.xMin=options.xMin);
"yMin"in options&&(this.yMin=options.yMin);"xMax"in options&&(this.xMax=options.xMax);"yMax"in options&&(this.yMax=options.yMax);"advanceWidth"in options&&(this.advanceWidth=options.advanceWidth);Object.defineProperty(this,"path",getPathDefinition(this,options.path))};Glyph.prototype.addUnicode=function(unicode){0===this.unicodes.length&&(this.unicode=unicode);this.unicodes.push(unicode)};Glyph.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Glyph.prototype.getPath=function(x,
y,fontSize,options,font){x=void 0!==x?x:0;y=void 0!==y?y:0;fontSize=void 0!==fontSize?fontSize:72;var hPoints;options||(options={});var xScale=options.xScale,yScale=options.yScale;options.hinting&&font&&font.hinting&&(hPoints=this.path&&font.hinting.exec(this,fontSize));hPoints?(options=font.hinting.getCommands(hPoints),x=Math.round(x),y=Math.round(y),xScale=yScale=1):(options=this.path.commands,fontSize*=1/(this.path.unitsPerEm||1E3),void 0===xScale&&(xScale=fontSize),void 0===yScale&&(yScale=fontSize));
fontSize=new Path;for(font=0;font<options.length;font+=1)hPoints=options[font],"M"===hPoints.type?fontSize.moveTo(x+hPoints.x*xScale,y+-hPoints.y*yScale):"L"===hPoints.type?fontSize.lineTo(x+hPoints.x*xScale,y+-hPoints.y*yScale):"Q"===hPoints.type?fontSize.quadraticCurveTo(x+hPoints.x1*xScale,y+-hPoints.y1*yScale,x+hPoints.x*xScale,y+-hPoints.y*yScale):"C"===hPoints.type?fontSize.curveTo(x+hPoints.x1*xScale,y+-hPoints.y1*yScale,x+hPoints.x2*xScale,y+-hPoints.y2*yScale,x+hPoints.x*xScale,y+-hPoints.y*
yScale):"Z"===hPoints.type&&fontSize.closePath();return fontSize};Glyph.prototype.getContours=function(){if(void 0===this.points)return[];for(var contours=[],currentContour=[],i=0;i<this.points.length;i+=1){var pt=this.points[i];currentContour.push(pt);pt.lastPointOfContour&&(contours.push(currentContour),currentContour=[])}check.argument(0===currentContour.length,"There are still points left in the current contour.");return contours};Glyph.prototype.getMetrics=function(){for(var commands=this.path.commands,
xCoords=[],yCoords=[],i=0;i<commands.length;i+=1){var cmd=commands[i];"Z"!==cmd.type&&(xCoords.push(cmd.x),yCoords.push(cmd.y));if("Q"===cmd.type||"C"===cmd.type)xCoords.push(cmd.x1),yCoords.push(cmd.y1);"C"===cmd.type&&(xCoords.push(cmd.x2),yCoords.push(cmd.y2))}commands={xMin:Math.min.apply(null,xCoords),yMin:Math.min.apply(null,yCoords),xMax:Math.max.apply(null,xCoords),yMax:Math.max.apply(null,yCoords),leftSideBearing:this.leftSideBearing};isFinite(commands.xMin)||(commands.xMin=0);isFinite(commands.xMax)||
(commands.xMax=this.advanceWidth);isFinite(commands.yMin)||(commands.yMin=0);isFinite(commands.yMax)||(commands.yMax=0);commands.rightSideBearing=this.advanceWidth-commands.leftSideBearing-(commands.xMax-commands.xMin);return commands};Glyph.prototype.draw=function(ctx,x,y,fontSize,options){this.getPath(x,y,fontSize,options).draw(ctx)};Glyph.prototype.drawPoints=function(ctx,x$jscomp$0,y$jscomp$0,fontSize){function drawCircles(l,x,y,scale){ctx.beginPath();for(var j=0;j<l.length;j+=1)ctx.moveTo(x+
l[j].x*scale,y+l[j].y*scale),ctx.arc(x+l[j].x*scale,y+l[j].y*scale,2,0,2*Math.PI,!1);ctx.closePath();ctx.fill()}x$jscomp$0=void 0!==x$jscomp$0?x$jscomp$0:0;y$jscomp$0=void 0!==y$jscomp$0?y$jscomp$0:0;fontSize=1/this.path.unitsPerEm*(void 0!==fontSize?fontSize:24);for(var blueCircles=[],redCircles=[],path=this.path,i=0;i<path.commands.length;i+=1){var cmd=path.commands[i];void 0!==cmd.x&&blueCircles.push({x:cmd.x,y:-cmd.y});void 0!==cmd.x1&&redCircles.push({x:cmd.x1,y:-cmd.y1});void 0!==cmd.x2&&redCircles.push({x:cmd.x2,
y:-cmd.y2})}ctx.fillStyle="blue";drawCircles(blueCircles,x$jscomp$0,y$jscomp$0,fontSize);ctx.fillStyle="red";drawCircles(redCircles,x$jscomp$0,y$jscomp$0,fontSize)};Glyph.prototype.drawMetrics=function(ctx,x,y,fontSize){x=void 0!==x?x:0;y=void 0!==y?y:0;fontSize=1/this.path.unitsPerEm*(void 0!==fontSize?fontSize:24);ctx.lineWidth=1;ctx.strokeStyle="black";draw.line(ctx,x,-1E4,x,1E4);draw.line(ctx,-1E4,y,1E4,y);var xMin=this.xMin||0,yMin=this.yMin||0,xMax=this.xMax||0,yMax=this.yMax||0,advanceWidth=
this.advanceWidth||0;ctx.strokeStyle="blue";draw.line(ctx,x+xMin*fontSize,-1E4,x+xMin*fontSize,1E4);draw.line(ctx,x+xMax*fontSize,-1E4,x+xMax*fontSize,1E4);draw.line(ctx,-1E4,y+-yMin*fontSize,1E4,y+-yMin*fontSize);draw.line(ctx,-1E4,y+-yMax*fontSize,1E4,y+-yMax*fontSize);ctx.strokeStyle="green";draw.line(ctx,x+advanceWidth*fontSize,-1E4,x+advanceWidth*fontSize,1E4)};GlyphSet.prototype.get=function(index){if(void 0===this.glyphs[index]){this.font._push(index);"function"===typeof this.glyphs[index]&&
(this.glyphs[index]=this.glyphs[index]());var glyph=this.glyphs[index],unicodeObj=this.font._IndexToUnicodeMap[index];if(unicodeObj)for(var j=0;j<unicodeObj.unicodes.length;j++)glyph.addUnicode(unicodeObj.unicodes[j]);this.font.cffEncoding?glyph.name=this.font.isCIDFont?"gid"+index:this.font.cffEncoding.charset[index]:this.font.glyphNames.names&&(glyph.name=this.font.glyphNames.glyphIndexToName(index));this.glyphs[index].advanceWidth=this.font._hmtxTableData[index].advanceWidth;this.glyphs[index].leftSideBearing=
this.font._hmtxTableData[index].leftSideBearing}else"function"===typeof this.glyphs[index]&&(this.glyphs[index]=this.glyphs[index]());return this.glyphs[index]};GlyphSet.prototype.push=function(index,loader){this.glyphs[index]=loader;this.length++};var glyphset={GlyphSet,glyphLoader:function(font,index){return new Glyph({index,font})},ttfGlyphLoader:function(font,index,parseGlyph,data,position,buildPath){return function(){var glyph=new Glyph({index,font});glyph.path=function(){parseGlyph(glyph,data,
position);var path=buildPath(font.glyphs,glyph);path.unitsPerEm=font.unitsPerEm;return path};defineDependentProperty(glyph,"xMin","_xMin");defineDependentProperty(glyph,"xMax","_xMax");defineDependentProperty(glyph,"yMin","_yMin");defineDependentProperty(glyph,"yMax","_yMax");return glyph}},cffGlyphLoader:function(font,index,parseCFFCharstring,charstring){return function(){var glyph=new Glyph({index,font});glyph.path=function(){var path=parseCFFCharstring(font,glyph,charstring);path.unitsPerEm=font.unitsPerEm;
return path};return glyph}}},TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",
value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:"real real real real real real".split(" "),value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",
value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],PRIVATE_DICT_META=
[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}],cff={parse:function(data,start$jscomp$0,font,opt){font.tables.cff={};var header=parseCFFHeader(data,start$jscomp$0);header=parseCFFIndex(data,header.endOffset,parse.bytesToString);var topDictIndex=parseCFFIndex(data,header.endOffset);header=parseCFFIndex(data,topDictIndex.endOffset,parse.bytesToString);var globalSubrIndex=parseCFFIndex(data,header.endOffset);
font.gsubrs=globalSubrIndex.objects;font.gsubrsBias=calcCFFSubroutineBias(font.gsubrs);topDictIndex=gatherCFFTopDicts(data,start$jscomp$0,topDictIndex.objects,header.objects);if(1!==topDictIndex.length)throw Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length \x3d "+topDictIndex.length);var topDict=topDictIndex[0];font.tables.cff.topDict=topDict;topDict._privateDict&&(font.defaultWidthX=topDict._privateDict.defaultWidthX,font.nominalWidthX=topDict._privateDict.nominalWidthX);
void 0!==topDict.ros[0]&&void 0!==topDict.ros[1]&&(font.isCIDFont=!0);if(font.isCIDFont){globalSubrIndex=topDict.fdArray;topDictIndex=topDict.fdSelect;if(0===globalSubrIndex||0===topDictIndex)throw Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");globalSubrIndex=parseCFFIndex(data,globalSubrIndex+start$jscomp$0);globalSubrIndex=gatherCFFTopDicts(data,start$jscomp$0,globalSubrIndex.objects,header.objects);topDict._fdArray=globalSubrIndex;topDict._fdSelect=parseCFFFDSelect(data,
topDictIndex+start$jscomp$0,font.numGlyphs,globalSubrIndex.length)}topDictIndex=start$jscomp$0+topDict.private[1];globalSubrIndex=parseCFFPrivateDict(data,topDictIndex,topDict.private[0],header.objects);font.defaultWidthX=globalSubrIndex.defaultWidthX;font.nominalWidthX=globalSubrIndex.nominalWidthX;0!==globalSubrIndex.subrs?(topDictIndex=parseCFFIndex(data,topDictIndex+globalSubrIndex.subrs),font.subrs=topDictIndex.objects,font.subrsBias=calcCFFSubroutineBias(font.subrs)):(font.subrs=[],font.subrsBias=
0);if(opt.lowMemory){var charStringsIndex=parseCFFIndexLowMemory(data,start$jscomp$0+topDict.charStrings);font.nGlyphs=charStringsIndex.offsets.length}else charStringsIndex=parseCFFIndex(data,start$jscomp$0+topDict.charStrings),font.nGlyphs=charStringsIndex.objects.length;header=parseCFFCharset(data,start$jscomp$0+topDict.charset,font.nGlyphs,header.objects);font.cffEncoding=0===topDict.encoding?new CffEncoding(cffStandardEncoding,header):1===topDict.encoding?new CffEncoding(cffExpertEncoding,header):
parseCFFEncoding(data,start$jscomp$0+topDict.encoding,header);font.encoding=font.encoding||font.cffEncoding;font.glyphs=new glyphset.GlyphSet(font);if(opt.lowMemory)font._push=function(i){var offsets=charStringsIndex.offsets,start=start$jscomp$0+topDict.charStrings,count=parse.getCard16(data,start),objectOffset=0;0!==count&&(objectOffset=parse.getByte(data,start+2),objectOffset=start+(count+1)*objectOffset+2);offsets=parse.getBytes(data,objectOffset+offsets[i],objectOffset+offsets[i+1]);font.glyphs.push(i,
glyphset.cffGlyphLoader(font,i,parseCFFCharstring,offsets))};else for(opt=0;opt<font.nGlyphs;opt+=1)font.glyphs.push(opt,glyphset.cffGlyphLoader(font,opt,parseCFFCharstring,charStringsIndex.objects[opt]))},make:function(glyphs,options){var t=new table.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},
{name:"privateDict",type:"RECORD"}]),fontScale=1/options.unitsPerEm;fontScale={version:options.version,fullName:options.fullName,familyName:options.familyName,weight:options.weightName,fontBBox:options.fontBBox||[0,0,0,0],fontMatrix:[fontScale,0,0,fontScale,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]};for(var glyphNames=[],glyph,i=1;i<glyphs.length;i+=1)glyph=glyphs.get(i),glyphNames.push(glyph.name);glyph=[];t.header=new table.Record("Header",[{name:"major",type:"Card8",value:1},
{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]);options=[options.postScriptName];i=new table.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);i.names=[];for(var i$jscomp$0=0;i$jscomp$0<options.length;i$jscomp$0+=1)i.names.push({name:"name_"+i$jscomp$0,type:"NAME",value:options[i$jscomp$0]});t.nameIndex=i;options=makeTopDict(fontScale,glyph);t.topDictIndex=makeTopDictIndex(options);t.globalSubrIndex=new table.Record("Global Subr INDEX",
[{name:"subrs",type:"INDEX",value:[]}]);options=new table.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(i=0;i<glyphNames.length;i+=1)i$jscomp$0=encodeString(glyphNames[i],glyph),options.fields.push({name:"glyph_"+i,type:"SID",value:i$jscomp$0});t.charsets=options;glyphNames=new table.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(options=0;options<glyphs.length;options+=1){i=glyphs.get(options);i$jscomp$0=[];var path=i.path;i$jscomp$0.push({name:"width",
type:"NUMBER",value:i.advanceWidth});for(var x=0,y=0,i$jscomp$1=0;i$jscomp$1<path.commands.length;i$jscomp$1+=1){var cmd=path.commands[i$jscomp$1];if("Q"===cmd.type){var _13=1/3,_23=2/3;cmd={type:"C",x:cmd.x,y:cmd.y,x1:_13*x+_23*cmd.x1,y1:_13*y+_23*cmd.y1,x2:_13*cmd.x+_23*cmd.x1,y2:_13*cmd.y+_23*cmd.y1}}if("M"===cmd.type)x=Math.round(cmd.x-x),y=Math.round(cmd.y-y),i$jscomp$0.push({name:"dx",type:"NUMBER",value:x}),i$jscomp$0.push({name:"dy",type:"NUMBER",value:y}),i$jscomp$0.push({name:"rmoveto",
type:"OP",value:21}),x=Math.round(cmd.x),y=Math.round(cmd.y);else if("L"===cmd.type)x=Math.round(cmd.x-x),y=Math.round(cmd.y-y),i$jscomp$0.push({name:"dx",type:"NUMBER",value:x}),i$jscomp$0.push({name:"dy",type:"NUMBER",value:y}),i$jscomp$0.push({name:"rlineto",type:"OP",value:5}),x=Math.round(cmd.x),y=Math.round(cmd.y);else if("C"===cmd.type){_13=Math.round(cmd.x1-x);_23=Math.round(cmd.y1-y);var dx2=Math.round(cmd.x2-cmd.x1),dy2=Math.round(cmd.y2-cmd.y1);x=Math.round(cmd.x-cmd.x2);y=Math.round(cmd.y-
cmd.y2);i$jscomp$0.push({name:"dx1",type:"NUMBER",value:_13});i$jscomp$0.push({name:"dy1",type:"NUMBER",value:_23});i$jscomp$0.push({name:"dx2",type:"NUMBER",value:dx2});i$jscomp$0.push({name:"dy2",type:"NUMBER",value:dy2});i$jscomp$0.push({name:"dx",type:"NUMBER",value:x});i$jscomp$0.push({name:"dy",type:"NUMBER",value:y});i$jscomp$0.push({name:"rrcurveto",type:"OP",value:8});x=Math.round(cmd.x);y=Math.round(cmd.y)}}i$jscomp$0.push({name:"endchar",type:"OP",value:14});glyphNames.charStrings.push({name:i.name,
type:"CHARSTRING",value:i$jscomp$0})}t.charStringsIndex=glyphNames;glyphs=new table.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);glyphs.dict=makeDict(PRIVATE_DICT_META,{},glyph);t.privateDict=glyphs;glyphs=new table.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);glyphs.strings=[];for(glyphNames=0;glyphNames<glyph.length;glyphNames+=1)glyphs.strings.push({name:"string_"+glyphNames,type:"STRING",value:glyph[glyphNames]});t.stringIndex=glyphs;glyphs=t.header.sizeOf()+
t.nameIndex.sizeOf()+t.topDictIndex.sizeOf()+t.stringIndex.sizeOf()+t.globalSubrIndex.sizeOf();fontScale.charset=glyphs;fontScale.encoding=0;fontScale.charStrings=fontScale.charset+t.charsets.sizeOf();fontScale.private[1]=fontScale.charStrings+t.charStringsIndex.sizeOf();options=makeTopDict(fontScale,glyph);t.topDictIndex=makeTopDictIndex(options);return t}},head={parse:function(data,start){var head={};data=new parse.Parser(data,start);head.version=data.parseVersion();head.fontRevision=Math.round(1E3*
data.parseFixed())/1E3;head.checkSumAdjustment=data.parseULong();head.magicNumber=data.parseULong();check.argument(1594834165===head.magicNumber,"Font header has wrong magic number.");head.flags=data.parseUShort();head.unitsPerEm=data.parseUShort();head.created=data.parseLongDateTime();head.modified=data.parseLongDateTime();head.xMin=data.parseShort();head.yMin=data.parseShort();head.xMax=data.parseShort();head.yMax=data.parseShort();head.macStyle=data.parseUShort();head.lowestRecPPEM=data.parseUShort();
head.fontDirectionHint=data.parseShort();head.indexToLocFormat=data.parseShort();head.glyphDataFormat=data.parseShort();return head},make:function(options){var timestamp=Math.round((new Date).getTime()/1E3)+2082844800,createdTimestamp=timestamp;options.createdTimestamp&&(createdTimestamp=options.createdTimestamp+2082844800);return new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",
type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1E3},{name:"created",type:"LONGDATETIME",value:createdTimestamp},{name:"modified",type:"LONGDATETIME",value:timestamp},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",
type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],options)}},hhea={parse:function(data,start){var hhea={};data=new parse.Parser(data,start);hhea.version=data.parseVersion();hhea.ascender=data.parseShort();hhea.descender=data.parseShort();hhea.lineGap=data.parseShort();hhea.advanceWidthMax=data.parseUShort();hhea.minLeftSideBearing=data.parseShort();hhea.minRightSideBearing=data.parseShort();hhea.xMaxExtent=data.parseShort();hhea.caretSlopeRise=data.parseShort();hhea.caretSlopeRun=
data.parseShort();hhea.caretOffset=data.parseShort();data.relativeOffset+=8;hhea.metricDataFormat=data.parseShort();hhea.numberOfHMetrics=data.parseUShort();return hhea},make:function(options){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",
type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],options)}},hmtx={parse:function(font,data,start,numMetrics,
numGlyphs,glyphs,opt){if(opt.lowMemory){font._hmtxTableData={};glyphs=new parse.Parser(data,start);for(var i=0;i<numGlyphs;i+=1){if(i<numMetrics){var advanceWidth=glyphs.parseUShort();var leftSideBearing=glyphs.parseShort()}font._hmtxTableData[i]={advanceWidth,leftSideBearing}}}else for(font=new parse.Parser(data,start),advanceWidth=0;advanceWidth<numGlyphs;advanceWidth+=1){if(advanceWidth<numMetrics){i=font.parseUShort();var leftSideBearing$jscomp$0=font.parseShort()}leftSideBearing=glyphs.get(advanceWidth);
leftSideBearing.advanceWidth=i;leftSideBearing.leftSideBearing=leftSideBearing$jscomp$0}},make:function(glyphs){for(var t=new table.Table("hmtx",[]),i=0;i<glyphs.length;i+=1){var glyph=glyphs.get(i),leftSideBearing=glyph.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+i,type:"USHORT",value:glyph.advanceWidth||0});t.fields.push({name:"leftSideBearing_"+i,type:"SHORT",value:leftSideBearing})}return t}},ltag={make:function(tags){for(var result=new table.Table("ltag",[{name:"version",type:"ULONG",
value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:tags.length}]),stringPool="",stringPoolOffset=12+4*tags.length,i=0;i<tags.length;++i){var pos=stringPool.indexOf(tags[i]);0>pos&&(pos=stringPool.length,stringPool+=tags[i]);result.fields.push({name:"offset "+i,type:"USHORT",value:stringPoolOffset+pos});result.fields.push({name:"length "+i,type:"USHORT",value:tags[i].length})}result.fields.push({name:"stringPool",type:"CHARARRAY",value:stringPool});return result},parse:function(data,
start){var p=new parse.Parser(data,start),tableVersion=p.parseULong();check.argument(1===tableVersion,"Unsupported ltag table version.");p.skip("uLong",1);tableVersion=p.parseULong();for(var tags=[],i=0;i<tableVersion;i++){for(var tag="",offset=start+p.parseUShort(),length=p.parseUShort(),j=offset;j<offset+length;++j)tag+=String.fromCharCode(data.getInt8(j));tags.push(tag)}return tags}},maxp={parse:function(data,start){var maxp={};data=new parse.Parser(data,start);maxp.version=data.parseVersion();
maxp.numGlyphs=data.parseUShort();1===maxp.version&&(maxp.maxPoints=data.parseUShort(),maxp.maxContours=data.parseUShort(),maxp.maxCompositePoints=data.parseUShort(),maxp.maxCompositeContours=data.parseUShort(),maxp.maxZones=data.parseUShort(),maxp.maxTwilightPoints=data.parseUShort(),maxp.maxStorage=data.parseUShort(),maxp.maxFunctionDefs=data.parseUShort(),maxp.maxInstructionDefs=data.parseUShort(),maxp.maxStackElements=data.parseUShort(),maxp.maxSizeOfInstructions=data.parseUShort(),maxp.maxComponentElements=
data.parseUShort(),maxp.maxComponentDepth=data.parseUShort());return maxp},make:function(numGlyphs){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:numGlyphs}])}},nameTableNames="copyright fontFamily fontSubfamily uniqueID fullName version postScriptName trademark manufacturer designer description manufacturerURL designerURL license licenseURL reserved preferredFamily preferredSubfamily compatibleFullName sampleText postScriptFindFontName wwsFamily wwsSubfamily".split(" "),
macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",
60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},
macLanguageToScript={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,
92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",
2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",
3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",
1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",
16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",
1130:"yo"},macScriptEncodings={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",
29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},macLanguageEncodings={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"},_name={parse:function(data,start,ltag){var name={};start=new parse.Parser(data,start);for(var format=start.parseUShort(),count=start.parseUShort(),stringOffset=start.offset+
start.parseUShort(),i=0;i<count;i++){var platformID=start.parseUShort(),encodingID=start.parseUShort(),languageID=start.parseUShort(),nameID=start.parseUShort();nameID=nameTableNames[nameID]||nameID;var byteLength=start.parseUShort(),offset=start.parseUShort();a:{switch(platformID){case 0:if(65535===languageID){var language="und";break a}if(ltag){language=ltag[languageID];break a}break;case 1:language=macLanguages[languageID];break a;case 3:language=windowsLanguages[languageID];break a}language=void 0}platformID=
getEncoding(platformID,encodingID,languageID);void 0!==platformID&&void 0!==language&&(platformID="utf-16"===platformID?decode.UTF16(data,stringOffset+offset,byteLength):decode.MACSTRING(data,stringOffset+offset,byteLength,platformID))&&(encodingID=name[nameID],void 0===encodingID&&(encodingID=name[nameID]={}),encodingID[language]=platformID)}1===format&&start.parseUShort();return name},make:function(names,ltag){var nameIDs=[],namesWithNumericKeys={},nameTableIds=reverseDict(nameTableNames);for(key in names){var nameID=
nameTableIds[key];void 0===nameID&&(nameID=key);nameID=parseInt(nameID);if(isNaN(nameID))throw Error('Name table entry "'+key+'" does not exist, see nameTableNames for complete list.');namesWithNumericKeys[nameID]=names[key];nameIDs.push(nameID)}var key=reverseDict(macLanguages);var windowsLanguageIds=reverseDict(windowsLanguages);names=[];nameTableIds=[];for(var i=0;i<nameIDs.length;i++){nameID=nameIDs[i];var translations=namesWithNumericKeys[nameID],lang;for(lang in translations){var text=translations[lang],
macPlatform=1,macLanguage=key[lang],macScript=macLanguageToScript[macLanguage],macEncoding=getEncoding(macPlatform,macScript,macLanguage);macEncoding=encode.MACSTRING(text,macEncoding);void 0===macEncoding&&(macPlatform=0,macLanguage=ltag.indexOf(lang),0>macLanguage&&(macLanguage=ltag.length,ltag.push(lang)),macScript=4,macEncoding=encode.UTF16(text));var macNameOffset=addStringToPool(macEncoding,nameTableIds);names.push(makeNameRecord(macPlatform,macScript,macLanguage,nameID,macEncoding.length,macNameOffset));
macPlatform=windowsLanguageIds[lang];void 0!==macPlatform&&(text=encode.UTF16(text),macLanguage=addStringToPool(text,nameTableIds),names.push(makeNameRecord(3,1,macPlatform,nameID,text.length,macLanguage)))}}names.sort(function(a,b){return a.platformID-b.platformID||a.encodingID-b.encodingID||a.languageID-b.languageID||a.nameID-b.nameID});ltag=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:names.length},{name:"stringOffset",type:"USHORT",value:6+12*
names.length}]);for(nameIDs=0;nameIDs<names.length;nameIDs++)ltag.fields.push({name:"record_"+nameIDs,type:"RECORD",value:names[nameIDs]});ltag.fields.push({name:"strings",type:"LITERAL",value:nameTableIds});return ltag}},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},
{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},
{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},
{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},
{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,
end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66E3,end:66047},{begin:66208,end:66271},{begin:127024,
end:127135}],os2={parse:function(data,start){var os2={};data=new parse.Parser(data,start);os2.version=data.parseUShort();os2.xAvgCharWidth=data.parseShort();os2.usWeightClass=data.parseUShort();os2.usWidthClass=data.parseUShort();os2.fsType=data.parseUShort();os2.ySubscriptXSize=data.parseShort();os2.ySubscriptYSize=data.parseShort();os2.ySubscriptXOffset=data.parseShort();os2.ySubscriptYOffset=data.parseShort();os2.ySuperscriptXSize=data.parseShort();os2.ySuperscriptYSize=data.parseShort();os2.ySuperscriptXOffset=
data.parseShort();os2.ySuperscriptYOffset=data.parseShort();os2.yStrikeoutSize=data.parseShort();os2.yStrikeoutPosition=data.parseShort();os2.sFamilyClass=data.parseShort();os2.panose=[];for(start=0;10>start;start++)os2.panose[start]=data.parseByte();os2.ulUnicodeRange1=data.parseULong();os2.ulUnicodeRange2=data.parseULong();os2.ulUnicodeRange3=data.parseULong();os2.ulUnicodeRange4=data.parseULong();os2.achVendID=String.fromCharCode(data.parseByte(),data.parseByte(),data.parseByte(),data.parseByte());
os2.fsSelection=data.parseUShort();os2.usFirstCharIndex=data.parseUShort();os2.usLastCharIndex=data.parseUShort();os2.sTypoAscender=data.parseShort();os2.sTypoDescender=data.parseShort();os2.sTypoLineGap=data.parseShort();os2.usWinAscent=data.parseUShort();os2.usWinDescent=data.parseUShort();1<=os2.version&&(os2.ulCodePageRange1=data.parseULong(),os2.ulCodePageRange2=data.parseULong());2<=os2.version&&(os2.sxHeight=data.parseShort(),os2.sCapHeight=data.parseShort(),os2.usDefaultChar=data.parseUShort(),
os2.usBreakChar=data.parseUShort(),os2.usMaxContent=data.parseUShort());return os2},make:function(options){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",
type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",
type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",
type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",
value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],options)},unicodeRanges,getUnicodeRange:function(unicode){for(var i=0;i<unicodeRanges.length;i+=1){var range=unicodeRanges[i];if(unicode>=range.begin&&unicode<range.end)return i}return-1}},post={parse:function(data,start){var post={};data=new parse.Parser(data,start);post.version=data.parseVersion();post.italicAngle=data.parseFixed();post.underlinePosition=
data.parseShort();post.underlineThickness=data.parseShort();post.isFixedPitch=data.parseULong();post.minMemType42=data.parseULong();post.maxMemType42=data.parseULong();post.minMemType1=data.parseULong();post.maxMemType1=data.parseULong();switch(post.version){case 1:post.names=standardNames.slice();break;case 2:post.numberOfGlyphs=data.parseUShort();post.glyphNameIndex=Array(post.numberOfGlyphs);for(start=0;start<post.numberOfGlyphs;start++)post.glyphNameIndex[start]=data.parseUShort();post.names=
[];for(start=0;start<post.numberOfGlyphs;start++)if(post.glyphNameIndex[start]>=standardNames.length){var nameLength=data.parseChar();post.names.push(data.parseString(nameLength))}break;case 2.5:for(post.numberOfGlyphs=data.parseUShort(),post.offset=Array(post.numberOfGlyphs),start=0;start<post.numberOfGlyphs;start++)post.offset[start]=data.parseChar()}return post},make:function(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",
type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},subtableParsers=Array(9);subtableParsers[1]=function(){var start=this.offset+this.relativeOffset,substFormat=this.parseUShort();if(1===substFormat)return{substFormat:1,coverage:this.parsePointer(Parser.coverage),deltaGlyphId:this.parseUShort()};
if(2===substFormat)return{substFormat:2,coverage:this.parsePointer(Parser.coverage),substitute:this.parseOffset16List()};check.assert(!1,"0x"+start.toString(16)+": lookup type 1 format must be 1 or 2.")};subtableParsers[2]=function(){var substFormat=this.parseUShort();check.argument(1===substFormat,"GSUB Multiple Substitution Subtable identifier-format must be 1");return{substFormat,coverage:this.parsePointer(Parser.coverage),sequences:this.parseListOfLists()}};subtableParsers[3]=function(){var substFormat=
this.parseUShort();check.argument(1===substFormat,"GSUB Alternate Substitution Subtable identifier-format must be 1");return{substFormat,coverage:this.parsePointer(Parser.coverage),alternateSets:this.parseListOfLists()}};subtableParsers[4]=function(){var substFormat=this.parseUShort();check.argument(1===substFormat,"GSUB ligature table identifier-format must be 1");return{substFormat,coverage:this.parsePointer(Parser.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),
components:this.parseUShortList(this.parseUShort()-1)}})}};var lookupRecordDesc={sequenceIndex:Parser.uShort,lookupListIndex:Parser.uShort};subtableParsers[5]=function(){var start=this.offset+this.relativeOffset,substFormat=this.parseUShort();if(1===substFormat)return{substFormat,coverage:this.parsePointer(Parser.coverage),ruleSets:this.parseListOfLists(function(){var glyphCount=this.parseUShort(),substCount=this.parseUShort();return{input:this.parseUShortList(glyphCount-1),lookupRecords:this.parseRecordList(substCount,
lookupRecordDesc)}})};if(2===substFormat)return{substFormat,coverage:this.parsePointer(Parser.coverage),classDef:this.parsePointer(Parser.classDef),classSets:this.parseListOfLists(function(){var glyphCount=this.parseUShort(),substCount=this.parseUShort();return{classes:this.parseUShortList(glyphCount-1),lookupRecords:this.parseRecordList(substCount,lookupRecordDesc)}})};if(3===substFormat){start=this.parseUShort();var substCount=this.parseUShort();return{substFormat,coverages:this.parseList(start,
Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(substCount,lookupRecordDesc)}}check.assert(!1,"0x"+start.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};subtableParsers[6]=function(){var start=this.offset+this.relativeOffset,substFormat=this.parseUShort();if(1===substFormat)return{substFormat:1,coverage:this.parsePointer(Parser.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-
1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(2===substFormat)return{substFormat:2,coverage:this.parsePointer(Parser.coverage),backtrackClassDef:this.parsePointer(Parser.classDef),inputClassDef:this.parsePointer(Parser.classDef),lookaheadClassDef:this.parsePointer(Parser.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};
if(3===substFormat)return{substFormat:3,backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),inputCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(lookupRecordDesc)};check.assert(!1,"0x"+start.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};subtableParsers[7]=function(){var substFormat=this.parseUShort();check.argument(1===substFormat,"GSUB Extension Substitution subtable identifier-format must be 1");
substFormat=this.parseUShort();var extensionParser=new Parser(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:substFormat,extension:subtableParsers[substFormat].call(extensionParser)}};subtableParsers[8]=function(){var substFormat=this.parseUShort();check.argument(1===substFormat,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1");return{substFormat,coverage:this.parsePointer(Parser.coverage),backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),
lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),substitutes:this.parseUShortList()}};var subtableMakers=Array(9);subtableMakers[1]=function(subtable){return 1===subtable.substFormat?new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)},{name:"deltaGlyphID",type:"USHORT",value:subtable.deltaGlyphId}]):new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},
{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.ushortList("substitute",subtable.substitute)))};subtableMakers[3]=function(subtable){check.assert(1===subtable.substFormat,"Lookup type 3 substFormat must be 1.");return new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.tableList("altSet",subtable.alternateSets,function(alternateSet){return new table.Table("alternateSetTable",
table.ushortList("alternate",alternateSet))})))};subtableMakers[4]=function(subtable){check.assert(1===subtable.substFormat,"Lookup type 4 substFormat must be 1.");return new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.tableList("ligSet",subtable.ligatureSets,function(ligatureSet){return new table.Table("ligatureSetTable",table.tableList("ligature",ligatureSet,function(ligature){return new table.Table("ligatureTable",
[{name:"ligGlyph",type:"USHORT",value:ligature.ligGlyph}].concat(table.ushortList("component",ligature.components,ligature.components.length+1)))}))})))};var gsub={parse:function(data,start){data=new Parser(data,start||0);start=data.parseVersion(1);check.argument(1===start||1.1===start,"Unsupported GSUB table version.");return 1===start?{version:start,scripts:data.parseScriptList(),features:data.parseFeatureList(),lookups:data.parseLookupList(subtableParsers)}:{version:start,scripts:data.parseScriptList(),
features:data.parseFeatureList(),lookups:data.parseLookupList(subtableParsers),variations:data.parseFeatureVariationsList()}},make:function(gsub){return new table.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(gsub.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(gsub.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(gsub.lookups,subtableMakers)}])}},meta={parse:function(data,start){var p=new parse.Parser(data,
start),tableVersion=p.parseULong();check.argument(1===tableVersion,"Unsupported META table version.");p.parseULong();p.parseULong();tableVersion=p.parseULong();for(var tags={},i=0;i<tableVersion;i++){var tag=p.parseTag(),dataOffset=p.parseULong(),dataLength=p.parseULong();dataOffset=decode.UTF8(data,start+dataOffset,dataLength);tags[tag]=dataOffset}return tags},make:function(tags){var numTags=Object.keys(tags).length,stringPool="",stringPoolOffset=16+12*numTags;numTags=new table.Table("meta",[{name:"version",
type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:stringPoolOffset},{name:"numTags",type:"ULONG",value:numTags}]);for(var tag in tags){var pos=stringPool.length;stringPool+=tags[tag];numTags.fields.push({name:"tag "+tag,type:"TAG",value:tag});numTags.fields.push({name:"offset "+tag,type:"ULONG",value:stringPoolOffset+pos});numTags.fields.push({name:"length "+tag,type:"ULONG",value:tags[tag].length})}numTags.fields.push({name:"stringPool",type:"CHARARRAY",
value:stringPool});return numTags}},sfnt={make:makeSfntTable,fontToTable:function(font){for(var xMins=[],yMins=[],xMaxs=[],yMaxs=[],advanceWidths=[],leftSideBearings=[],rightSideBearings=[],firstCharIndex,lastCharIndex=0,ulUnicodeRange1=0,ulUnicodeRange2=0,ulUnicodeRange3=0,ulUnicodeRange4=0,i=0;i<font.glyphs.length;i+=1){var glyph=font.glyphs.get(i),unicode=glyph.unicode|0;if(isNaN(glyph.advanceWidth))throw Error("Glyph "+glyph.name+" ("+i+"): advanceWidth is not a number.");(firstCharIndex>unicode||
void 0===firstCharIndex)&&0<unicode&&(firstCharIndex=unicode);lastCharIndex<unicode&&(lastCharIndex=unicode);unicode=os2.getUnicodeRange(unicode);if(32>unicode)ulUnicodeRange1|=1<<unicode;else if(64>unicode)ulUnicodeRange2|=1<<unicode-32;else if(96>unicode)ulUnicodeRange3|=1<<unicode-64;else if(123>unicode)ulUnicodeRange4|=1<<unicode-96;else throw Error("Unicode ranges bits \x3e 123 are reserved for internal usage");".notdef"!==glyph.name&&(unicode=glyph.getMetrics(),xMins.push(unicode.xMin),yMins.push(unicode.yMin),
xMaxs.push(unicode.xMax),yMaxs.push(unicode.yMax),leftSideBearings.push(unicode.leftSideBearing),rightSideBearings.push(unicode.rightSideBearing),advanceWidths.push(glyph.advanceWidth))}xMins=Math.min.apply(null,xMins);yMins=Math.min.apply(null,yMins);xMaxs=Math.max.apply(null,xMaxs);yMaxs=Math.max.apply(null,yMaxs);i=Math.max.apply(null,advanceWidths);for(unicode=glyph=0;unicode<advanceWidths.length;unicode+=1)glyph+=advanceWidths[unicode];yMaxs={xMin:xMins,yMin:yMins,xMax:xMaxs,yMax:yMaxs,advanceWidthMax:i,
advanceWidthAvg:glyph/advanceWidths.length,minLeftSideBearing:Math.min.apply(null,leftSideBearings),maxLeftSideBearing:Math.max.apply(null,leftSideBearings),minRightSideBearing:Math.min.apply(null,rightSideBearings)};yMaxs.ascender=font.ascender;yMaxs.descender=font.descender;advanceWidths=head.make({flags:3,unitsPerEm:font.unitsPerEm,xMin:yMaxs.xMin,yMin:yMaxs.yMin,xMax:yMaxs.xMax,yMax:yMaxs.yMax,lowestRecPPEM:3,createdTimestamp:font.createdTimestamp});leftSideBearings=hhea.make({ascender:yMaxs.ascender,
descender:yMaxs.descender,advanceWidthMax:yMaxs.advanceWidthMax,minLeftSideBearing:yMaxs.minLeftSideBearing,minRightSideBearing:yMaxs.minRightSideBearing,xMaxExtent:yMaxs.maxLeftSideBearing+(yMaxs.xMax-yMaxs.xMin),numberOfHMetrics:font.glyphs.length});rightSideBearings=maxp.make(font.glyphs.length);firstCharIndex=os2.make(Object.assign({xAvgCharWidth:Math.round(yMaxs.advanceWidthAvg),usFirstCharIndex:firstCharIndex,usLastCharIndex:lastCharIndex,ulUnicodeRange1,ulUnicodeRange2,ulUnicodeRange3,ulUnicodeRange4,
sTypoAscender:yMaxs.ascender,sTypoDescender:yMaxs.descender,sTypoLineGap:0,usWinAscent:yMaxs.yMax,usWinDescent:Math.abs(yMaxs.yMin),ulCodePageRange1:1,sxHeight:metricsForChar(font,"xyvw",{yMax:Math.round(yMaxs.ascender/2)}).yMax,sCapHeight:metricsForChar(font,"HIKLEFJMNTZBDPRAGOQSUVWXY",yMaxs).yMax,usDefaultChar:font.hasChar(" ")?32:0,usBreakChar:font.hasChar(" ")?32:0},font.tables.os2));lastCharIndex=hmtx.make(font.glyphs);ulUnicodeRange1=cmap.make(font.glyphs);ulUnicodeRange2=font.getEnglishName("fontFamily");
ulUnicodeRange3=font.getEnglishName("fontSubfamily");ulUnicodeRange4=ulUnicodeRange2+" "+ulUnicodeRange3;(xMaxs=font.getEnglishName("postScriptName"))||(xMaxs=ulUnicodeRange2.replace(/\s/g,"")+"-"+ulUnicodeRange3);yMins={};for(var n in font.names)yMins[n]=font.names[n];yMins.uniqueID||(yMins.uniqueID={en:font.getEnglishName("manufacturer")+":"+ulUnicodeRange4});yMins.postScriptName||(yMins.postScriptName={en:xMaxs});yMins.preferredFamily||(yMins.preferredFamily=font.names.fontFamily);yMins.preferredSubfamily||
(yMins.preferredSubfamily=font.names.fontSubfamily);xMins=[];n=_name.make(yMins,xMins);yMins=0<xMins.length?ltag.make(xMins):void 0;xMins=post.make();ulUnicodeRange3=cff.make(font.glyphs,{version:font.getEnglishName("version"),fullName:ulUnicodeRange4,familyName:ulUnicodeRange2,weightName:ulUnicodeRange3,postScriptName:xMaxs,unitsPerEm:font.unitsPerEm,fontBBox:[0,yMaxs.yMin,yMaxs.ascender,yMaxs.advanceWidthMax]});ulUnicodeRange2=font.metas&&0<Object.keys(font.metas).length?meta.make(font.metas):void 0;
n=[advanceWidths,leftSideBearings,rightSideBearings,firstCharIndex,n,ulUnicodeRange1,xMins,ulUnicodeRange3,lastCharIndex];yMins&&n.push(yMins);font.tables.gsub&&n.push(gsub.make(font.tables.gsub));ulUnicodeRange2&&n.push(ulUnicodeRange2);font=makeSfntTable(n);n=font.encode();n=computeCheckSum(n);firstCharIndex=font.fields;lastCharIndex=!1;for(ulUnicodeRange1=0;ulUnicodeRange1<firstCharIndex.length;ulUnicodeRange1+=1)if("head table"===firstCharIndex[ulUnicodeRange1].name){firstCharIndex[ulUnicodeRange1].value.checkSumAdjustment=
2981146554-n;lastCharIndex=!0;break}if(!lastCharIndex)throw Error("Could not find head table with checkSum to adjust.");return font},computeCheckSum};Layout.prototype={searchTag,binSearch,getTable:function(create){var layout=this.font.tables[this.tableName];!layout&&create&&(layout=this.font.tables[this.tableName]=this.createDefaultTable());return layout},getScriptNames:function(){var layout=this.getTable();return layout?layout.scripts.map(function(script){return script.tag}):[]},getDefaultScriptName:function(){var layout=
this.getTable();if(layout){for(var hasLatn=!1,i=0;i<layout.scripts.length;i++){var name=layout.scripts[i].tag;if("DFLT"===name)return name;"latn"===name&&(hasLatn=!0)}if(hasLatn)return"latn"}},getScriptTable:function(script,create){var layout=this.getTable(create);if(layout){script=script||"DFLT";var scripts=layout.scripts;layout=searchTag(layout.scripts,script);if(0<=layout)return scripts[layout].script;if(create)return script={tag:script,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,
featureIndexes:[]},langSysRecords:[]}},scripts.splice(-1-layout,0,script),script.script}},getLangSysTable:function(script,language,create){if(script=this.getScriptTable(script,create)){if(!language||"dflt"===language||"DFLT"===language)return script.defaultLangSys;var pos=searchTag(script.langSysRecords,language);if(0<=pos)return script.langSysRecords[pos].langSys;if(create)return language={tag:language,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}},script.langSysRecords.splice(-1-
pos,0,language),language.langSys}},getFeatureTable:function(script,language,feature,create){if(script=this.getLangSysTable(script,language,create)){language=script.featureIndexes;for(var allFeatures=this.font.tables[this.tableName].features,i=0;i<language.length;i++)if(script=allFeatures[language[i]],script.tag===feature)return script.feature;if(create)return create=allFeatures.length,check.assert(0===create||feature>=allFeatures[create-1].tag,"Features must be added in alphabetical order."),script=
{tag:feature,feature:{params:0,lookupListIndexes:[]}},allFeatures.push(script),language.push(create),script.feature}},getLookupTables:function(script,language,feature,lookupType,create){language=this.getFeatureTable(script,language,feature,create);script=[];if(language){feature=language.lookupListIndexes;for(var allLookups=this.font.tables[this.tableName].lookups,i=0;i<feature.length;i++)language=allLookups[feature[i]],language.lookupType===lookupType&&script.push(language);if(0===script.length&&
create)return language={lookupType,lookupFlag:0,subtables:[],markFilteringSet:void 0},lookupType=allLookups.length,allLookups.push(language),feature.push(lookupType),[language]}return script},getGlyphClass:function(classDefTable,glyphIndex){switch(classDefTable.format){case 1:return classDefTable.startGlyph<=glyphIndex&&glyphIndex<classDefTable.startGlyph+classDefTable.classes.length?classDefTable.classes[glyphIndex-classDefTable.startGlyph]:0;case 2:return(classDefTable=searchRange(classDefTable.ranges,
glyphIndex))?classDefTable.classId:0}},getCoverageIndex:function(coverageTable,glyphIndex){switch(coverageTable.format){case 1:return glyphIndex=binSearch(coverageTable.glyphs,glyphIndex),0<=glyphIndex?glyphIndex:-1;case 2:return(coverageTable=searchRange(coverageTable.ranges,glyphIndex))?coverageTable.index+glyphIndex-coverageTable.start:-1}},expandCoverage:function(coverageTable){if(1===coverageTable.format)return coverageTable.glyphs;var glyphs=[];coverageTable=coverageTable.ranges;for(var i=0;i<
coverageTable.length;i++){var range=coverageTable[i],end=range.end;for(range=range.start;range<=end;range++)glyphs.push(range)}return glyphs}};Position.prototype=Layout.prototype;Position.prototype.init=function(){var script=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(script)};Position.prototype.getKerningValue=function(kerningLookups,leftIndex,rightIndex){for(var i=0;i<kerningLookups.length;i++)for(var subtables=kerningLookups[i].subtables,j=0;j<subtables.length;j++){var subtable=
subtables[j],covIndex=this.getCoverageIndex(subtable.coverage,leftIndex);if(!(0>covIndex))switch(subtable.posFormat){case 1:subtable=subtable.pairSets[covIndex];for(covIndex=0;covIndex<subtable.length;covIndex++){var pair=subtable[covIndex];if(pair.secondGlyph===rightIndex)return pair.value1&&pair.value1.xAdvance||0}break;case 2:return kerningLookups=this.getGlyphClass(subtable.classDef1,leftIndex),rightIndex=this.getGlyphClass(subtable.classDef2,rightIndex),rightIndex=subtable.classRecords[kerningLookups][rightIndex],
rightIndex.value1&&rightIndex.value1.xAdvance||0}}return 0};Position.prototype.getKerningTables=function(script,language){if(this.font.tables.gpos)return this.getLookupTables(script,language,"kern",2)};Substitution.prototype=Layout.prototype;Substitution.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Substitution.prototype.getSingle=function(feature,
script,language){var substitutions=[];feature=this.getLookupTables(script,language,feature,1);for(script=0;script<feature.length;script++){language=feature[script].subtables;for(var i=0;i<language.length;i++){var subtable=language[i],glyphs=this.expandCoverage(subtable.coverage);if(1===subtable.substFormat){var delta=subtable.deltaGlyphId;for(subtable=0;subtable<glyphs.length;subtable++){var glyph=glyphs[subtable];substitutions.push({sub:glyph,by:glyph+delta})}}else for(delta=subtable.substitute,
subtable=0;subtable<glyphs.length;subtable++)substitutions.push({sub:glyphs[subtable],by:delta[subtable]})}}return substitutions};Substitution.prototype.getAlternates=function(feature,script,language){var alternates=[];feature=this.getLookupTables(script,language,feature,3);for(script=0;script<feature.length;script++){language=feature[script].subtables;for(var i=0;i<language.length;i++){var subtable=language[i],glyphs=this.expandCoverage(subtable.coverage);subtable=subtable.alternateSets;for(var j=
0;j<glyphs.length;j++)alternates.push({sub:glyphs[j],by:subtable[j]})}}return alternates};Substitution.prototype.getLigatures=function(feature,script,language){var ligatures=[];feature=this.getLookupTables(script,language,feature,4);for(script=0;script<feature.length;script++){language=feature[script].subtables;for(var i=0;i<language.length;i++){var subtable=language[i],glyphs=this.expandCoverage(subtable.coverage);subtable=subtable.ligatureSets;for(var j=0;j<glyphs.length;j++)for(var startGlyph=
glyphs[j],ligSet=subtable[j],k=0;k<ligSet.length;k++){var lig=ligSet[k];ligatures.push({sub:[startGlyph].concat(lig.components),by:lig.ligGlyph})}}}return ligatures};Substitution.prototype.addSingle=function(feature,substitution,script,language){feature=this.getLookupTables(script,language,feature,1,!0)[0];feature=getSubstFormat(feature,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});check.assert(1===feature.coverage.format,"Ligature: unable to modify coverage table format "+feature.coverage.format);
script=substitution.sub;language=this.binSearch(feature.coverage.glyphs,script);0>language&&(language=-1-language,feature.coverage.glyphs.splice(language,0,script),feature.substitute.splice(language,0,0));feature.substitute[language]=substitution.by};Substitution.prototype.addAlternate=function(feature,substitution,script,language){feature=this.getLookupTables(script,language,feature,3,!0)[0];feature=getSubstFormat(feature,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});check.assert(1===
feature.coverage.format,"Ligature: unable to modify coverage table format "+feature.coverage.format);script=substitution.sub;language=this.binSearch(feature.coverage.glyphs,script);0>language&&(language=-1-language,feature.coverage.glyphs.splice(language,0,script),feature.alternateSets.splice(language,0,0));feature.alternateSets[language]=substitution.by};Substitution.prototype.addLigature=function(feature,ligature,script,language){feature=this.getLookupTables(script,language,feature,4,!0)[0];script=
feature.subtables[0];script||(script={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},feature.subtables[0]=script);check.assert(1===script.coverage.format,"Ligature: unable to modify coverage table format "+script.coverage.format);language=ligature.sub[0];feature=ligature.sub.slice(1);ligature={ligGlyph:ligature.by,components:feature};var pos=this.binSearch(script.coverage.glyphs,language);if(0<=pos){script=script.ligatureSets[pos];for(language=0;language<script.length;language++){a:{pos=
script[language].components;var n=pos.length;if(n!==feature.length)pos=!1;else{for(var i=0;i<n;i++)if(pos[i]!==feature[i]){pos=!1;break a}pos=!0}}if(pos)return}script.push(ligature)}else pos=-1-pos,script.coverage.glyphs.splice(pos,0,language),script.ligatureSets.splice(pos,0,[ligature])};Substitution.prototype.getFeature=function(feature,script,language){if(/ss\d\d/.test(feature))return this.getSingle(feature,script,language);switch(feature){case "aalt":case "salt":return this.getSingle(feature,
script,language).concat(this.getAlternates(feature,script,language));case "dlig":case "liga":case "rlig":return this.getLigatures(feature,script,language)}};Substitution.prototype.add=function(feature,sub,script,language){if(/ss\d\d/.test(feature))return this.addSingle(feature,sub,script,language);switch(feature){case "aalt":case "salt":return"number"===typeof sub.by?this.addSingle(feature,sub,script,language):this.addAlternate(feature,sub,script,language);case "dlig":case "liga":case "rlig":return this.addLigature(feature,
sub,script,language)}};var glyf={getPath,parse:function(data,start,loca,font,opt){if(opt.lowMemory)return parseGlyfTableOnLowMemory(data,start,loca,font);opt=new glyphset.GlyphSet(font);for(var i=0;i<loca.length-1;i+=1){var offset=loca[i];offset!==loca[i+1]?opt.push(i,glyphset.ttfGlyphLoader(font,i,parseGlyph,data,start+offset,buildPath)):opt.push(i,glyphset.glyphLoader(font,i))}return opt}},roundSuper=function(v){var period=this.srPeriod,phase=this.srPhase,threshold=this.srThreshold,sign=1;0>v&&
(v=-v,sign=-1);v=Math.trunc((v+(threshold-phase))/period)*period;v+=phase;return 0>v?phase*sign:v*sign},xUnitVector={x:1,y:0,axis:"x",distance:function(p1,p2,o1,o2){return(o1?p1.xo:p1.x)-(o2?p2.xo:p2.x)},interpolate:function(p,rp1,rp2,pv){if(pv&&pv!==this){var do1=pv.distance(p,rp1,!0,!0);var do2=pv.distance(p,rp2,!0,!0);rp1=pv.distance(rp1,rp1,!1,!0);rp2=pv.distance(rp2,rp2,!1,!0);do1=Math.abs(do1);do2=Math.abs(do2);var dt=do1+do2;0===dt?xUnitVector.setRelative(p,p,(rp1+rp2)/2,pv,!0):xUnitVector.setRelative(p,
p,(rp1*do2+rp2*do1)/dt,pv,!0)}else do1=p.xo-rp1.xo,do2=p.xo-rp2.xo,rp1=rp1.x-rp1.xo,rp2=rp2.x-rp2.xo,do1=Math.abs(do1),do2=Math.abs(do2),dt=do1+do2,p.x=0===dt?p.xo+(rp1+rp2)/2:p.xo+(rp1*do2+rp2*do1)/dt},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(p,rp,d,pv,org){p.x=pv&&pv!==this?(org?rp.xo:rp.x)+d*pv.x+(p.y-((org?rp.yo:rp.y)+d*pv.y))/pv.normalSlope:(org?rp.xo:rp.x)+d},slope:0,touch:function(p){p.xTouched=!0},touched:function(p){return p.xTouched},untouch:function(p){p.xTouched=!1}},
yUnitVector={x:0,y:1,axis:"y",distance:function(p1,p2,o1,o2){return(o1?p1.yo:p1.y)-(o2?p2.yo:p2.y)},interpolate:function(p,rp1,rp2,pv){if(pv&&pv!==this){var do1=pv.distance(p,rp1,!0,!0);var do2=pv.distance(p,rp2,!0,!0);rp1=pv.distance(rp1,rp1,!1,!0);rp2=pv.distance(rp2,rp2,!1,!0);do1=Math.abs(do1);do2=Math.abs(do2);var dt=do1+do2;0===dt?yUnitVector.setRelative(p,p,(rp1+rp2)/2,pv,!0):yUnitVector.setRelative(p,p,(rp1*do2+rp2*do1)/dt,pv,!0)}else do1=p.yo-rp1.yo,do2=p.yo-rp2.yo,rp1=rp1.y-rp1.yo,rp2=rp2.y-
rp2.yo,do1=Math.abs(do1),do2=Math.abs(do2),dt=do1+do2,p.y=0===dt?p.yo+(rp1+rp2)/2:p.yo+(rp1*do2+rp2*do1)/dt},normalSlope:0,setRelative:function(p,rp,d,pv,org){p.y=pv&&pv!==this?(org?rp.yo:rp.y)+d*pv.y+pv.normalSlope*(p.x-((org?rp.xo:rp.x)+d*pv.x)):(org?rp.yo:rp.y)+d},slope:Number.POSITIVE_INFINITY,touch:function(p){p.yTouched=!0},touched:function(p){return p.yTouched},untouch:function(p){p.yTouched=!1}};Object.freeze(xUnitVector);Object.freeze(yUnitVector);UnitVector.prototype.distance=function(p1,
p2,o1,o2){return this.x*xUnitVector.distance(p1,p2,o1,o2)+this.y*yUnitVector.distance(p1,p2,o1,o2)};UnitVector.prototype.interpolate=function(p,rp1,rp2,pv){var do1=pv.distance(p,rp1,!0,!0);var do2=pv.distance(p,rp2,!0,!0);rp1=pv.distance(rp1,rp1,!1,!0);rp2=pv.distance(rp2,rp2,!1,!0);do1=Math.abs(do1);do2=Math.abs(do2);var dt=do1+do2;0===dt?this.setRelative(p,p,(rp1+rp2)/2,pv,!0):this.setRelative(p,p,(rp1*do2+rp2*do1)/dt,pv,!0)};UnitVector.prototype.setRelative=function(p,rp,d,pv,org){pv=pv||this;
var pvns=pv.normalSlope,fvs=this.slope,px=p.x,py=p.y;p.x=(fvs*px-pvns*((org?rp.xo:rp.x)+d*pv.x)+((org?rp.yo:rp.y)+d*pv.y)-py)/(fvs-pvns);p.y=fvs*(p.x-px)+py};UnitVector.prototype.touch=function(p){p.xTouched=!0;p.yTouched=!0};HPoint.prototype.nextTouched=function(v){for(var p=this.nextPointOnContour;!v.touched(p)&&p!==this;)p=p.nextPointOnContour;return p};HPoint.prototype.prevTouched=function(v){for(var p=this.prevPointOnContour;!v.touched(p)&&p!==this;)p=p.prevPointOnContour;return p};var HPZero=
Object.freeze(new HPoint(0,0)),defaultState={cvCutIn:1.0625,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};Hinting.prototype.exec=function(glyph,ppem){if("number"!==typeof ppem)throw Error("Point size is not a number!");if(!(2<this._errorState)){var font=this.font,prepState=this._prepState;if(!prepState||prepState.ppem!==ppem){prepState=this._fpgmState;if(!prepState){State.prototype=defaultState;prepState=this._fpgmState=new State("fpgm",font.tables.fpgm);prepState.funcs=[];prepState.font=
font;exports.DEBUG&&(console.log("---EXEC FPGM---"),prepState.step=-1);try{exec(prepState)}catch(e){console.log("Hinting error in FPGM:"+e);this._errorState=3;return}}State.prototype=prepState;prepState=this._prepState=new State("prep",font.tables.prep);prepState.ppem=ppem;var oCvt=font.tables.cvt;if(oCvt){var cvt=prepState.cvt=Array(oCvt.length);ppem/=font.unitsPerEm;for(font=0;font<oCvt.length;font++)cvt[font]=oCvt[font]*ppem}else prepState.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),
prepState.step=-1);try{exec(prepState)}catch(e){2>this._errorState&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(1<this._errorState))try{return execGlyph(glyph,prepState)}catch(e){1>this._errorState&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var execGlyph=function(glyph,prepState){var xScale=prepState.ppem/prepState.font.unitsPerEm,components=glyph.components;State.prototype=prepState;if(components){var font=
prepState.font;var gZone=[];prepState=[];for(var i=0;i<components.length;i++){var c=components[i],cg=font.glyphs.get(c.glyphIndex);var state=new State("glyf",cg.instructions);exports.DEBUG&&(console.log("---EXEC COMP "+i+"---"),state.step=-1);execComponent(cg,state,xScale,xScale);cg=Math.round(c.dx*xScale);var dy=Math.round(c.dy*xScale),gz=state.gZone;c=state.contours;for(var pi=0;pi<gz.length;pi++){var p=gz[pi];p.xTouched=p.yTouched=!1;p.xo=p.x+=cg;p.yo=p.y+=dy}cg=gZone.length;gZone.push.apply(gZone,
gz);for(gz=0;gz<c.length;gz++)prepState.push(c[gz]+cg)}glyph.instructions&&!state.inhibitGridFit&&(state=new State("glyf",glyph.instructions),state.gZone=state.z0=state.z1=state.z2=gZone,state.contours=prepState,gZone.push(new HPoint(0,0),new HPoint(Math.round(glyph.advanceWidth*xScale),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),state.step=-1),exec(state),gZone.length-=2)}else state=new State("glyf",glyph.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),state.step=-1),execComponent(glyph,
state,xScale,xScale),gZone=state.gZone;return gZone};var execComponent=function(glyph,state,xScale,yScale){for(var points=glyph.points||[],pLen=points.length,gZone=state.gZone=state.z0=state.z1=state.z2=[],contours=state.contours=[],cp,i=0;i<pLen;i++)cp=points[i],gZone[i]=new HPoint(cp.x*xScale,cp.y*yScale,cp.lastPointOfContour,cp.onCurve);for(points=0;points<pLen;points++){cp=gZone[points];if(!sp){var sp=cp;contours.push(points)}cp.lastPointOfContour?(cp.nextPointOnContour=sp,sp.prevPointOnContour=
cp,sp=void 0):(yScale=gZone[points+1],cp.nextPointOnContour=yScale,yScale.prevPointOnContour=cp)}if(!state.inhibitGridFit){if(exports.DEBUG)for(console.log("PROCESSING GLYPH",state.stack),contours=0;contours<pLen;contours++)console.log(contours,gZone[contours].x,gZone[contours].y);gZone.push(new HPoint(0,0),new HPoint(Math.round(glyph.advanceWidth*xScale),0));exec(state);gZone.length-=2;if(exports.DEBUG)for(console.log("FINISHED GLYPH",state.stack),glyph=0;glyph<pLen;glyph++)console.log(glyph,gZone[glyph].x,
gZone[glyph].y)}};var exec=function(state){var prog=state.prog;if(prog){var pLen=prog.length;for(state.ip=0;state.ip<pLen;state.ip++){exports.DEBUG&&state.step++;var ins=instructionTable[prog[state.ip]];if(!ins)throw Error("unknown instruction: 0x"+Number(prog[state.ip]).toString(16));ins(state)}}};var instructionTable=[SVTCA.bind(void 0,yUnitVector),SVTCA.bind(void 0,xUnitVector),SPVTCA.bind(void 0,yUnitVector),SPVTCA.bind(void 0,xUnitVector),SFVTCA.bind(void 0,yUnitVector),SFVTCA.bind(void 0,xUnitVector),
SPVTL.bind(void 0,0),SPVTL.bind(void 0,1),SFVTL.bind(void 0,0),SFVTL.bind(void 0,1),function(state){var stack=state.stack,y=stack.pop();stack=stack.pop();exports.DEBUG&&console.log(state.step,"SPVFS[]",y,stack);state.pv=state.dpv=getUnitVector(stack,y)},function(state){var stack=state.stack,y=stack.pop();stack=stack.pop();exports.DEBUG&&console.log(state.step,"SPVFS[]",y,stack);state.fv=getUnitVector(stack,y)},function(state){var stack=state.stack,pv=state.pv;exports.DEBUG&&console.log(state.step,
"GPV[]");stack.push(16384*pv.x);stack.push(16384*pv.y)},function(state){var stack=state.stack,fv=state.fv;exports.DEBUG&&console.log(state.step,"GFV[]");stack.push(16384*fv.x);stack.push(16384*fv.y)},function(state){state.fv=state.pv;exports.DEBUG&&console.log(state.step,"SFVTPV[]")},function(state){var stack=state.stack,pa0i=stack.pop(),pa1i=stack.pop(),pb0i=stack.pop(),pb1i=stack.pop(),pi=stack.pop(),z0=state.z0;stack=state.z1;var pa0=z0[pa0i],pa1=z0[pa1i];z0=stack[pb0i];stack=stack[pb1i];state=
state.z2[pi];exports.DEBUG&&console.log("ISECT[], ",pa0i,pa1i,pb0i,pb1i,pi);pa0i=pa0.x;pa1i=pa0.y;pb0i=pa1.x;pa1=pa1.y;pb1i=z0.x;z0=z0.y;pa0=stack.x;stack=stack.y;pi=(pa0i-pb0i)*(z0-stack)-(pa1i-pa1)*(pb1i-pa0);var f1=pa0i*pa1-pa1i*pb0i,f2=pb1i*stack-z0*pa0;state.x=(f1*(pb1i-pa0)-f2*(pa0i-pb0i))/pi;state.y=(f1*(z0-stack)-f2*(pa1i-pa1))/pi},function(state){state.rp0=state.stack.pop();exports.DEBUG&&console.log(state.step,"SRP0[]",state.rp0)},function(state){state.rp1=state.stack.pop();exports.DEBUG&&
console.log(state.step,"SRP1[]",state.rp1)},function(state){state.rp2=state.stack.pop();exports.DEBUG&&console.log(state.step,"SRP2[]",state.rp2)},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SZP0[]",n);state.zp0=n;switch(n){case 0:state.tZone||initTZone(state);state.z0=state.tZone;break;case 1:state.z0=state.gZone;break;default:throw Error("Invalid zone pointer");}},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SZP1[]",n);state.zp1=
n;switch(n){case 0:state.tZone||initTZone(state);state.z1=state.tZone;break;case 1:state.z1=state.gZone;break;default:throw Error("Invalid zone pointer");}},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SZP2[]",n);state.zp2=n;switch(n){case 0:state.tZone||initTZone(state);state.z2=state.tZone;break;case 1:state.z2=state.gZone;break;default:throw Error("Invalid zone pointer");}},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SZPS[]",
n);state.zp0=state.zp1=state.zp2=n;switch(n){case 0:state.tZone||initTZone(state);state.z0=state.z1=state.z2=state.tZone;break;case 1:state.z0=state.z1=state.z2=state.gZone;break;default:throw Error("Invalid zone pointer");}},function(state){state.loop=state.stack.pop();exports.DEBUG&&console.log(state.step,"SLOOP[]",state.loop)},function(state){exports.DEBUG&&console.log(state.step,"RTG[]");state.round=roundToGrid},function(state){exports.DEBUG&&console.log(state.step,"RTHG[]");state.round=roundToHalfGrid},
function(state){var d=state.stack.pop();exports.DEBUG&&console.log(state.step,"SMD[]",d);state.minDis=d/64},function(state){exports.DEBUG&&console.log(state.step,"ELSE[]");skip(state,!1)},function(state){var o=state.stack.pop();exports.DEBUG&&console.log(state.step,"JMPR[]",o);state.ip+=o-1},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SCVTCI[]",n);state.cvCutIn=n/64},void 0,void 0,function(state){var stack=state.stack;exports.DEBUG&&console.log(state.step,"DUP[]");
stack.push(stack[stack.length-1])},POP,function(state){exports.DEBUG&&console.log(state.step,"CLEAR[]");state.stack.length=0},function(state){var stack=state.stack,a=stack.pop(),b=stack.pop();exports.DEBUG&&console.log(state.step,"SWAP[]");stack.push(a);stack.push(b)},function(state){var stack=state.stack;exports.DEBUG&&console.log(state.step,"DEPTH[]");stack.push(stack.length)},function(state){var stack=state.stack,k=stack.pop();exports.DEBUG&&console.log(state.step,"CINDEX[]",k);stack.push(stack[stack.length-
k])},function(state){var stack=state.stack,k=stack.pop();exports.DEBUG&&console.log(state.step,"MINDEX[]",k);stack.push(stack.splice(stack.length-k,1)[0])},void 0,void 0,void 0,function(state){var stack=state.stack,fn=stack.pop();stack=stack.pop();exports.DEBUG&&console.log(state.step,"LOOPCALL[]",fn,stack);var cip=state.ip,cprog=state.prog;state.prog=state.funcs[fn];for(fn=0;fn<stack;fn++)exec(state),exports.DEBUG&&console.log(++state.step,fn+1<stack?"next loopcall":"done loopcall",fn);state.ip=
cip;state.prog=cprog},function(state){var fn=state.stack.pop();exports.DEBUG&&console.log(state.step,"CALL[]",fn);var cip=state.ip,cprog=state.prog;state.prog=state.funcs[fn];exec(state);state.ip=cip;state.prog=cprog;exports.DEBUG&&console.log(++state.step,"returning from",fn)},function(state){if("fpgm"!==state.env)throw Error("FDEF not allowed here");var prog=state.prog,ip=state.ip,fn=state.stack.pop(),ipBegin=ip;for(exports.DEBUG&&console.log(state.step,"FDEF[]",fn);45!==prog[++ip];);state.ip=ip;
state.funcs[fn]=prog.slice(ipBegin+1,ip)},void 0,MDAP.bind(void 0,0),MDAP.bind(void 0,1),IUP.bind(void 0,yUnitVector),IUP.bind(void 0,xUnitVector),SHP.bind(void 0,0),SHP.bind(void 0,1),SHC.bind(void 0,0),SHC.bind(void 0,1),SHZ.bind(void 0,0),SHZ.bind(void 0,1),function(state){for(var stack=state.stack,loop=state.loop,fv=state.fv,d=stack.pop()/64,z2=state.z2;loop--;){var pi=stack.pop(),p=z2[pi];exports.DEBUG&&console.log(state.step,(1<state.loop?"loop "+(state.loop-loop)+": ":"")+"SHPIX[]",pi,d);fv.setRelative(p,
p,d);fv.touch(p)}state.loop=1},function(state){for(var stack=state.stack,rp1i=state.rp1,rp2i=state.rp2,loop=state.loop,rp1=state.z0[rp1i],rp2=state.z1[rp2i],fv=state.fv,pv=state.dpv,z2=state.z2;loop--;){var pi=stack.pop(),p=z2[pi];exports.DEBUG&&console.log(state.step,(1<state.loop?"loop "+(state.loop-loop)+": ":"")+"IP[]",pi,rp1i,"\x3c-\x3e",rp2i);fv.interpolate(p,rp1,rp2,pv);fv.touch(p)}state.loop=1},MSIRP.bind(void 0,0),MSIRP.bind(void 0,1),function(state){for(var stack=state.stack,rp0=state.z0[state.rp0],
loop=state.loop,fv=state.fv,pv=state.pv,z1=state.z1;loop--;){var pi=stack.pop(),p=z1[pi];exports.DEBUG&&console.log(state.step,(1<state.loop?"loop "+(state.loop-loop)+": ":"")+"ALIGNRP[]",pi);fv.setRelative(p,rp0,0,pv);fv.touch(p)}state.loop=1},function(state){exports.DEBUG&&console.log(state.step,"RTDG[]");state.round=roundToDoubleGrid},MIAP.bind(void 0,0),MIAP.bind(void 0,1),function(state){var prog=state.prog,ip=state.ip,stack=state.stack,n=prog[++ip];exports.DEBUG&&console.log(state.step,"NPUSHB[]",
n);for(var i=0;i<n;i++)stack.push(prog[++ip]);state.ip=ip},function(state){var ip=state.ip,prog=state.prog,stack=state.stack,n=prog[++ip];exports.DEBUG&&console.log(state.step,"NPUSHW[]",n);for(var i=0;i<n;i++){var w=prog[++ip]<<8|prog[++ip];w&32768&&(w=-((w^65535)+1));stack.push(w)}state.ip=ip},function(state){var stack=state.stack,store=state.store;store||(store=state.store=[]);var v=stack.pop();stack=stack.pop();exports.DEBUG&&console.log(state.step,"WS",v,stack);store[stack]=v},function(state){var stack=
state.stack,store=state.store,l=stack.pop();exports.DEBUG&&console.log(state.step,"RS",l);stack.push(store&&store[l]||0)},function(state){var stack=state.stack,v=stack.pop();stack=stack.pop();exports.DEBUG&&console.log(state.step,"WCVTP",v,stack);state.cvt[stack]=v/64},function(state){var stack=state.stack,cvte=stack.pop();exports.DEBUG&&console.log(state.step,"RCVT",cvte);stack.push(64*state.cvt[cvte])},GC.bind(void 0,0),GC.bind(void 0,1),void 0,MD.bind(void 0,0),MD.bind(void 0,1),function(state){exports.DEBUG&&
console.log(state.step,"MPPEM[]");state.stack.push(state.ppem)},void 0,function(state){exports.DEBUG&&console.log(state.step,"FLIPON[]");state.autoFlip=!0},void 0,void 0,function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"LT[]",e2,e1);stack.push(e1<e2?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"LTEQ[]",e2,e1);stack.push(e1<=e2?1:0)},function(state){var stack=state.stack,e2=stack.pop(),
e1=stack.pop();exports.DEBUG&&console.log(state.step,"GT[]",e2,e1);stack.push(e1>e2?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"GTEQ[]",e2,e1);stack.push(e1>=e2?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"EQ[]",e2,e1);stack.push(e2===e1?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"NEQ[]",e2,e1);
stack.push(e2!==e1?1:0)},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"ODD[]",n);stack.push(Math.trunc(n)%2?1:0)},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"EVEN[]",n);stack.push(Math.trunc(n)%2?0:1)},function(state){var test=state.stack.pop();exports.DEBUG&&console.log(state.step,"IF[]",test);test||(skip(state,!0),exports.DEBUG&&console.log(state.step,"EIF[]"))},function(state){exports.DEBUG&&console.log(state.step,
"EIF[]")},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"AND[]",e2,e1);stack.push(e2&&e1?1:0)},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"OR[]",e2,e1);stack.push(e2||e1?1:0)},function(state){var stack=state.stack,e=stack.pop();exports.DEBUG&&console.log(state.step,"NOT[]",e);stack.push(e?0:1)},DELTAP123.bind(void 0,1),function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,
"SDB[]",n);state.deltaBase=n},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SDS[]",n);state.deltaShift=Math.pow(.5,n)},function(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"ADD[]",n2,n1);stack.push(n1+n2)},function(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"SUB[]",n2,n1);stack.push(n1-n2)},function(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&
console.log(state.step,"DIV[]",n2,n1);stack.push(64*n1/n2)},function(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"MUL[]",n2,n1);stack.push(n1*n2/64)},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"ABS[]",n);stack.push(Math.abs(n))},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"NEG[]",n);stack.push(-n)},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&
console.log(state.step,"FLOOR[]",n);stack.push(64*Math.floor(n/64))},function(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"CEILING[]",n);stack.push(64*Math.ceil(n/64))},ROUND.bind(void 0,0),ROUND.bind(void 0,1),ROUND.bind(void 0,2),ROUND.bind(void 0,3),void 0,void 0,void 0,void 0,function(state){var stack=state.stack,v=stack.pop();stack=stack.pop();exports.DEBUG&&console.log(state.step,"WCVTF[]",v,stack);state.cvt[stack]=v*state.ppem/state.font.unitsPerEm},DELTAP123.bind(void 0,
2),DELTAP123.bind(void 0,3),DELTAC123.bind(void 0,1),DELTAC123.bind(void 0,2),DELTAC123.bind(void 0,3),function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SROUND[]",n);state.round=roundSuper;switch(n&192){case 0:var period=.5;break;case 64:period=1;break;case 128:period=2;break;default:throw Error("invalid SROUND value");}state.srPeriod=period;switch(n&48){case 0:state.srPhase=0;break;case 16:state.srPhase=.25*period;break;case 32:state.srPhase=.5*period;break;case 48:state.srPhase=
.75*period;break;default:throw Error("invalid SROUND value");}n&=15;state.srThreshold=0===n?0:(n/8-.5)*period},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"S45ROUND[]",n);state.round=roundSuper;switch(n&192){case 0:var period=Math.sqrt(2)/2;break;case 64:period=Math.sqrt(2);break;case 128:period=2*Math.sqrt(2);break;default:throw Error("invalid S45ROUND value");}state.srPeriod=period;switch(n&48){case 0:state.srPhase=0;break;case 16:state.srPhase=.25*period;break;
case 32:state.srPhase=.5*period;break;case 48:state.srPhase=.75*period;break;default:throw Error("invalid S45ROUND value");}n&=15;state.srThreshold=0===n?0:(n/8-.5)*period},void 0,void 0,function(state){exports.DEBUG&&console.log(state.step,"ROFF[]");state.round=roundOff},void 0,function(state){exports.DEBUG&&console.log(state.step,"RUTG[]");state.round=roundUpToGrid},function(state){exports.DEBUG&&console.log(state.step,"RDTG[]");state.round=roundDownToGrid},POP,POP,void 0,void 0,void 0,void 0,void 0,
function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SCANCTRL[]",n)},SDPVTL.bind(void 0,0),SDPVTL.bind(void 0,1),function(state){var stack=state.stack,sel=stack.pop(),r=0;exports.DEBUG&&console.log(state.step,"GETINFO[]",sel);sel&1&&(r=35);sel&32&&(r|=4096);stack.push(r)},void 0,function(state){var stack=state.stack,a=stack.pop(),b=stack.pop(),c=stack.pop();exports.DEBUG&&console.log(state.step,"ROLL[]");stack.push(b);stack.push(a);stack.push(c)},function(state){var stack=
state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"MAX[]",e2,e1);stack.push(Math.max(e1,e2))},function(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"MIN[]",e2,e1);stack.push(Math.min(e1,e2))},function(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SCANTYPE[]",n)},function(state){var s=state.stack.pop(),v=state.stack.pop();exports.DEBUG&&console.log(state.step,"INSTCTRL[]",s,v);switch(s){case 1:state.inhibitGridFit=
!!v;break;case 2:state.ignoreCvt=!!v;break;default:throw Error("invalid INSTCTRL[] selector");}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,PUSHB.bind(void 0,1),PUSHB.bind(void 0,2),PUSHB.bind(void 0,3),PUSHB.bind(void 0,4),PUSHB.bind(void 0,5),PUSHB.bind(void 0,6),PUSHB.bind(void 0,7),PUSHB.bind(void 0,8),PUSHW.bind(void 0,
1),PUSHW.bind(void 0,2),PUSHW.bind(void 0,3),PUSHW.bind(void 0,4),PUSHW.bind(void 0,5),PUSHW.bind(void 0,6),PUSHW.bind(void 0,7),PUSHW.bind(void 0,8),MDRP_MIRP.bind(void 0,0,0,0,0,0),MDRP_MIRP.bind(void 0,0,0,0,0,1),MDRP_MIRP.bind(void 0,0,0,0,0,2),MDRP_MIRP.bind(void 0,0,0,0,0,3),MDRP_MIRP.bind(void 0,0,0,0,1,0),MDRP_MIRP.bind(void 0,0,0,0,1,1),MDRP_MIRP.bind(void 0,0,0,0,1,2),MDRP_MIRP.bind(void 0,0,0,0,1,3),MDRP_MIRP.bind(void 0,0,0,1,0,0),MDRP_MIRP.bind(void 0,0,0,1,0,1),MDRP_MIRP.bind(void 0,
0,0,1,0,2),MDRP_MIRP.bind(void 0,0,0,1,0,3),MDRP_MIRP.bind(void 0,0,0,1,1,0),MDRP_MIRP.bind(void 0,0,0,1,1,1),MDRP_MIRP.bind(void 0,0,0,1,1,2),MDRP_MIRP.bind(void 0,0,0,1,1,3),MDRP_MIRP.bind(void 0,0,1,0,0,0),MDRP_MIRP.bind(void 0,0,1,0,0,1),MDRP_MIRP.bind(void 0,0,1,0,0,2),MDRP_MIRP.bind(void 0,0,1,0,0,3),MDRP_MIRP.bind(void 0,0,1,0,1,0),MDRP_MIRP.bind(void 0,0,1,0,1,1),MDRP_MIRP.bind(void 0,0,1,0,1,2),MDRP_MIRP.bind(void 0,0,1,0,1,3),MDRP_MIRP.bind(void 0,0,1,1,0,0),MDRP_MIRP.bind(void 0,0,1,1,
0,1),MDRP_MIRP.bind(void 0,0,1,1,0,2),MDRP_MIRP.bind(void 0,0,1,1,0,3),MDRP_MIRP.bind(void 0,0,1,1,1,0),MDRP_MIRP.bind(void 0,0,1,1,1,1),MDRP_MIRP.bind(void 0,0,1,1,1,2),MDRP_MIRP.bind(void 0,0,1,1,1,3),MDRP_MIRP.bind(void 0,1,0,0,0,0),MDRP_MIRP.bind(void 0,1,0,0,0,1),MDRP_MIRP.bind(void 0,1,0,0,0,2),MDRP_MIRP.bind(void 0,1,0,0,0,3),MDRP_MIRP.bind(void 0,1,0,0,1,0),MDRP_MIRP.bind(void 0,1,0,0,1,1),MDRP_MIRP.bind(void 0,1,0,0,1,2),MDRP_MIRP.bind(void 0,1,0,0,1,3),MDRP_MIRP.bind(void 0,1,0,1,0,0),MDRP_MIRP.bind(void 0,
1,0,1,0,1),MDRP_MIRP.bind(void 0,1,0,1,0,2),MDRP_MIRP.bind(void 0,1,0,1,0,3),MDRP_MIRP.bind(void 0,1,0,1,1,0),MDRP_MIRP.bind(void 0,1,0,1,1,1),MDRP_MIRP.bind(void 0,1,0,1,1,2),MDRP_MIRP.bind(void 0,1,0,1,1,3),MDRP_MIRP.bind(void 0,1,1,0,0,0),MDRP_MIRP.bind(void 0,1,1,0,0,1),MDRP_MIRP.bind(void 0,1,1,0,0,2),MDRP_MIRP.bind(void 0,1,1,0,0,3),MDRP_MIRP.bind(void 0,1,1,0,1,0),MDRP_MIRP.bind(void 0,1,1,0,1,1),MDRP_MIRP.bind(void 0,1,1,0,1,2),MDRP_MIRP.bind(void 0,1,1,0,1,3),MDRP_MIRP.bind(void 0,1,1,1,
0,0),MDRP_MIRP.bind(void 0,1,1,1,0,1),MDRP_MIRP.bind(void 0,1,1,1,0,2),MDRP_MIRP.bind(void 0,1,1,1,0,3),MDRP_MIRP.bind(void 0,1,1,1,1,0),MDRP_MIRP.bind(void 0,1,1,1,1,1),MDRP_MIRP.bind(void 0,1,1,1,1,2),MDRP_MIRP.bind(void 0,1,1,1,1,3)];Token.prototype.setState=function(key,value){this.state[key]=value;return this.activeState={key,value:this.state[key]}};Token.prototype.getState=function(stateId){return this.state[stateId]||null};Tokenizer.prototype.inboundIndex=function(index){return 0<=index&&index<
this.tokens.length};Tokenizer.prototype.composeRUD=function(RUDs){var this$1=this;RUDs=RUDs.map(function(RUD){return this$1[RUD[0]].apply(this$1,RUD.slice(1).concat(!0))});var hasFAILObject=function(obj){return"object"===typeof obj&&obj.hasOwnProperty("FAIL")};if(RUDs.every(hasFAILObject))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:RUDs.filter(hasFAILObject)};this.dispatch("composeRUD",[RUDs.filter(function(op){return!hasFAILObject(op)})])};Tokenizer.prototype.replaceRange=
function(startIndex,offset,tokens,silent){offset=null!==offset?offset:this.tokens.length;var isTokenType=tokens.every(function(token){return token instanceof Token});return!isNaN(startIndex)&&this.inboundIndex(startIndex)&&isTokenType?(isTokenType=this.tokens.splice.apply(this.tokens,[startIndex,offset].concat(tokens)),silent||this.dispatch("replaceToken",[startIndex,offset,tokens]),[isTokenType,tokens]):{FAIL:"replaceRange: invalid tokens or startIndex."}};Tokenizer.prototype.replaceToken=function(index,
token,silent){if(!isNaN(index)&&this.inboundIndex(index)&&token instanceof Token){var replaced=this.tokens.splice(index,1,token);silent||this.dispatch("replaceToken",[index,token]);return[replaced[0],token]}return{FAIL:"replaceToken: invalid token or index."}};Tokenizer.prototype.removeRange=function(startIndex,offset,silent){offset=isNaN(offset)?this.tokens.length:offset;var tokens=this.tokens.splice(startIndex,offset);silent||this.dispatch("removeRange",[tokens,startIndex,offset]);return tokens};
Tokenizer.prototype.removeToken=function(index,silent){if(!isNaN(index)&&this.inboundIndex(index)){var token=this.tokens.splice(index,1);silent||this.dispatch("removeToken",[token,index]);return token}return{FAIL:"removeToken: invalid token index."}};Tokenizer.prototype.insertToken=function(tokens,index,silent){return tokens.every(function(token){return token instanceof Token})?(this.tokens.splice.apply(this.tokens,[index,0].concat(tokens)),silent||this.dispatch("insertToken",[tokens,index]),tokens):
{FAIL:"insertToken: invalid token(s)."}};Tokenizer.prototype.registerModifier=function(modifierId,condition,modifier){this.events.newToken.subscribe(function(token,contextParams){var conditionParams=[token,contextParams];conditionParams=null===condition||!0===condition.apply(this,conditionParams);contextParams=[token,contextParams];conditionParams&&(contextParams=modifier.apply(this,contextParams),token.setState(modifierId,contextParams))});this.registeredModifiers.push(modifierId)};Event.prototype.subscribe=
function(eventHandler){return"function"===typeof eventHandler?this.subscribers.push(eventHandler)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};Event.prototype.unsubscribe=function(subsId){this.subscribers.splice(subsId,1)};ContextParams.prototype.setCurrentIndex=function(index){this.index=index;this.current=this.context[index];this.backtrack=this.context.slice(0,index);this.lookahead=this.context.slice(index+1)};ContextParams.prototype.get=function(offset){switch(!0){case 0===offset:return this.current;
case 0>offset&&Math.abs(offset)<=this.backtrack.length:return this.backtrack.slice(offset)[0];case 0<offset&&offset<=this.lookahead.length:return this.lookahead[offset-1];default:return null}};Tokenizer.prototype.rangeToText=function(range){if(range instanceof ContextRange)return this.getRangeTokens(range).map(function(token){return token.char}).join("")};Tokenizer.prototype.getText=function(){return this.tokens.map(function(token){return token.char}).join("")};Tokenizer.prototype.getContext=function(contextName){return(contextName=
this.registeredContexts[contextName])?contextName:null};Tokenizer.prototype.on=function(eventName,eventHandler){return(eventName=this.events[eventName])?eventName.subscribe(eventHandler):null};Tokenizer.prototype.dispatch=function(eventName,args){var this$1=this;eventName=this.events[eventName];eventName instanceof Event&&eventName.subscribers.forEach(function(subscriber){subscriber.apply(this$1,args||[])})};Tokenizer.prototype.registerContextChecker=function(contextName,contextStartCheck,contextEndCheck){if(this.getContext(contextName))return{FAIL:"context name '"+
contextName+"' is already registered."};if("function"!==typeof contextStartCheck)return{FAIL:"missing context start check."};if("function"!==typeof contextEndCheck)return{FAIL:"missing context end check."};contextStartCheck=new ContextChecker(contextName,contextStartCheck,contextEndCheck);this.registeredContexts[contextName]=contextStartCheck;this.contextCheckers.push(contextStartCheck);return contextStartCheck};Tokenizer.prototype.getRangeTokens=function(range){return[].concat(this.tokens.slice(range.startIndex,
range.startIndex+range.endOffset))};Tokenizer.prototype.getContextRanges=function(contextName){var context=this.getContext(contextName);return context?context.ranges:{FAIL:"context checker '"+contextName+"' is not registered."}};Tokenizer.prototype.resetContextsRanges=function(){var registeredContexts=this.registeredContexts,contextName;for(contextName in registeredContexts)registeredContexts.hasOwnProperty(contextName)&&(registeredContexts[contextName].ranges=[])};Tokenizer.prototype.updateContextsRanges=
function(){this.resetContextsRanges();for(var chars=this.tokens.map(function(token){return token.char}),i=0;i<chars.length;i++){var contextParams=new ContextParams(chars,i);this.runContextCheck(contextParams)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Tokenizer.prototype.setEndOffset=function(offset,contextName){var startIndex=this.getContext(contextName).openRange.startIndex;offset=new ContextRange(startIndex,offset,contextName);startIndex=this.getContext(contextName).ranges;
offset.rangeId=contextName+"."+startIndex.length;startIndex.push(offset);this.getContext(contextName).openRange=null;return offset};Tokenizer.prototype.runContextCheck=function(contextParams){var this$1=this,index=contextParams.index;this.contextCheckers.forEach(function(contextChecker){var contextName=contextChecker.contextName,openRange=this$1.getContext(contextName).openRange;!openRange&&contextChecker.checkStart(contextParams)&&(openRange=new ContextRange(index,null,contextName),this$1.getContext(contextName).openRange=
openRange,this$1.dispatch("contextStart",[contextName,index]));openRange&&contextChecker.checkEnd(contextParams)&&(contextChecker=this$1.setEndOffset(index-openRange.startIndex+1,contextName),this$1.dispatch("contextEnd",[contextName,contextChecker]))})};Tokenizer.prototype.tokenize=function(text){this.tokens=[];this.resetContextsRanges();text=Array.from(text);this.dispatch("start");for(var i=0;i<text.length;i++){var char=text[i],contextParams=new ContextParams(text,i);this.dispatch("next",[contextParams]);
this.runContextCheck(contextParams);char=new Token(char);this.tokens.push(char);this.dispatch("newToken",[char,contextParams])}this.dispatch("end",[this.tokens]);return this.tokens};FeatureQuery.prototype.getDefaultScriptFeaturesIndexes=function(){for(var scripts=this.font.tables.gsub.scripts,s=0;s<scripts.length;s++){var script=scripts[s];if("DFLT"===script.tag)return script.script.defaultLangSys.featureIndexes}return[]};FeatureQuery.prototype.getScriptFeaturesIndexes=function(scriptTag){if(!this.font.tables.gsub)return[];
if(!scriptTag)return this.getDefaultScriptFeaturesIndexes();for(var scripts=this.font.tables.gsub.scripts,i=0;i<scripts.length;i++){var script=scripts[i];if(script.tag===scriptTag&&script.script.defaultLangSys)return script.script.defaultLangSys.featureIndexes;if(script=script.langSysRecords)for(var j=0;j<script.length;j++){var langSysRecord=script[j];if(langSysRecord.tag===scriptTag)return langSysRecord.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()};FeatureQuery.prototype.mapTagsToFeatures=
function(features,scriptTag){for(var tags={},i=0;i<features.length;i++)tags[features[i].tag]=features[i].feature;this.features[scriptTag].tags=tags};FeatureQuery.prototype.getScriptFeatures=function(scriptTag){var features=this.features[scriptTag];if(this.features.hasOwnProperty(scriptTag))return features;features=this.getScriptFeaturesIndexes(scriptTag);if(!features)return null;var gsub=this.font.tables.gsub;features=features.map(function(index){return gsub.features[index]});this.features[scriptTag]=
features;this.mapTagsToFeatures(features,scriptTag);return features};FeatureQuery.prototype.getSubstitutionType=function(lookupTable,subtable){return lookupTable.lookupType.toString()+subtable.substFormat.toString()};FeatureQuery.prototype.getLookupMethod=function(lookupTable,subtable){var this$1=this;switch(this.getSubstitutionType(lookupTable,subtable)){case "11":return function(glyphIndex){return singleSubstitutionFormat1.apply(this$1,[glyphIndex,subtable])};case "12":return function(glyphIndex){return singleSubstitutionFormat2.apply(this$1,
[glyphIndex,subtable])};case "63":return function(contextParams){return chainingSubstitutionFormat3.apply(this$1,[contextParams,subtable])};case "41":return function(contextParams){return ligatureSubstitutionFormat1.apply(this$1,[contextParams,subtable])};case "21":return function(glyphIndex){return decompositionSubstitutionFormat1.apply(this$1,[glyphIndex,subtable])};default:throw Error("lookupType: "+lookupTable.lookupType+" - substFormat: "+subtable.substFormat+" is not yet supported");}};FeatureQuery.prototype.lookupFeature=
function(query){var contextParams=query.contextParams,currentIndex=contextParams.index,feature=this.getFeature({tag:query.tag,script:query.script});if(!feature)return Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+query.tag+"' for script '"+query.script+"'.");feature=this.getFeatureLookups(feature);for(var substitutions=[].concat(contextParams.context),l=0;l<feature.length;l++)for(var lookupTable=feature[l],subtables=this.getLookupSubtables(lookupTable),s=0;s<subtables.length;s++){var subtable=
subtables[s],substType=this.getSubstitutionType(lookupTable,subtable);subtable=this.getLookupMethod(lookupTable,subtable);var substitution=void 0;switch(substType){case "11":(substitution=subtable(contextParams.current))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:11,tag:query.tag,substitution}));break;case "12":(substitution=subtable(contextParams.current))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:12,tag:query.tag,substitution}));break;case "63":substitution=
subtable(contextParams);Array.isArray(substitution)&&substitution.length&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:63,tag:query.tag,substitution}));break;case "41":(substitution=subtable(contextParams))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:41,tag:query.tag,substitution}));break;case "21":(substitution=subtable(contextParams.current))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:21,tag:query.tag,substitution}))}contextParams=new ContextParams(substitutions,
currentIndex);Array.isArray(substitution)}return substitutions.length?substitutions:null};FeatureQuery.prototype.supports=function(query){if(!query.script)return!1;this.getScriptFeatures(query.script);var supportedScript=this.features.hasOwnProperty(query.script);if(!query.tag)return supportedScript;var supportedFeature=this.features[query.script].some(function(feature){return feature.tag===query.tag});return supportedScript&&supportedFeature};FeatureQuery.prototype.getLookupSubtables=function(lookupTable){return lookupTable.subtables||
null};FeatureQuery.prototype.getLookupByIndex=function(index){return this.font.tables.gsub.lookups[index]||null};FeatureQuery.prototype.getFeatureLookups=function(feature){return feature.lookupListIndexes.map(this.getLookupByIndex.bind(this))};FeatureQuery.prototype.getFeature=function(query){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(query.script)||this.getScriptFeatures(query.script);var scriptFeatures=this.features[query.script];return scriptFeatures?scriptFeatures.tags[query.tag]?
this.features[query.script].tags[query.tag]:null:{FAIL:"No feature for script "+query.script}};var SUBSTITUTIONS={11:function(action,tokens,index){tokens[index].setState(action.tag,action.substitution)},12:function(action,tokens,index){tokens[index].setState(action.tag,action.substitution)},63:function(action,tokens,index){action.substitution.forEach(function(subst,offset){tokens[index+offset].setState(action.tag,subst)})},41:function(action,tokens,index){var token=tokens[index];token.setState(action.tag,
action.substitution.ligGlyph);action=action.substitution.components.length;for(var i=0;i<action;i++)token=tokens[index+i+1],token.setState("deleted",!0)}};Bidi.prototype.setText=function(text){this.text=text};Bidi.prototype.contextChecks={latinWordCheck:{startCheck:function(contextParams){var char=contextParams.current;contextParams=contextParams.get(-1);return null===contextParams&&/[A-z]/.test(char)||!/[A-z]/.test(contextParams)&&/[A-z]/.test(char)},endCheck:function(contextParams){contextParams=
contextParams.get(1);return null===contextParams||!/[A-z]/.test(contextParams)}},arabicWordCheck:{startCheck:function(contextParams){var char=contextParams.current;contextParams=contextParams.get(-1);return null===contextParams&&isArabicChar(char)||!isArabicChar(contextParams)&&isArabicChar(char)},endCheck:function(contextParams){contextParams=contextParams.get(1);return null===contextParams||!isArabicChar(contextParams)}},arabicSentenceCheck:{startCheck:function(contextParams){var char=contextParams.current;
contextParams=contextParams.get(-1);return(isArabicChar(char)||isTashkeelArabicChar(char))&&!isArabicChar(contextParams)},endCheck:function(contextParams){var nextChar=contextParams.get(1);switch(!0){case null===nextChar:return!0;case !isArabicChar(nextChar)&&!isTashkeelArabicChar(nextChar):nextChar=/\s/.test(nextChar);if(!nextChar||nextChar&&(nextChar=!1,nextChar=contextParams.lookahead.some(function(c){return isArabicChar(c)||isTashkeelArabicChar(c)}),!nextChar))return!0;break;default:return!1}}}};
Bidi.prototype.registerFeatures=function(script,tags){var this$1=this;tags=tags.filter(function(tag){return this$1.query.supports({script,tag})});this.featuresTags.hasOwnProperty(script)?this.featuresTags[script]=this.featuresTags[script].concat(tags):this.featuresTags[script]=tags};Bidi.prototype.applyFeatures=function(font,features){if(!font)throw Error("No valid font was provided to apply features");this.query||(this.query=new FeatureQuery(font));for(font=0;font<features.length;font++){var feature=
features[font];this.query.supports({script:feature.script})&&this.registerFeatures(feature.script,feature.tags)}};Bidi.prototype.registerModifier=function(modifierId,condition,modifier){this.tokenizer.registerModifier(modifierId,condition,modifier)};Bidi.prototype.checkContextReady=function(contextId){return!!this.tokenizer.getContext(contextId)};Bidi.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(applyArabicPresentationForms.call(this),applyArabicRequireLigatures.call(this));
this.checkContextReady("latinWord")&&applyLatinLigatures.call(this);this.checkContextReady("arabicSentence")&&reverseArabicSentences.call(this)};Bidi.prototype.processText=function(text){this.text&&this.text===text||(this.setText(text),registerContextChecker.call(this,"latinWord"),registerContextChecker.call(this,"arabicWord"),registerContextChecker.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text),this.applyFeaturesToContexts())};Bidi.prototype.getBidiText=function(text){this.processText(text);
return this.tokenizer.getText()};Bidi.prototype.getTextGlyphs=function(text){this.processText(text);text=[];for(var i=0;i<this.tokenizer.tokens.length;i++){var token=this.tokenizer.tokens[i];token.state.deleted||(token=token.activeState.value,text.push(Array.isArray(token)?token[0]:token))}return text};Font.prototype.hasChar=function(c){return null!==this.encoding.charToGlyphIndex(c)};Font.prototype.charToGlyphIndex=function(s){return this.encoding.charToGlyphIndex(s)};Font.prototype.charToGlyph=
function(c){c=this.charToGlyphIndex(c);(c=this.glyphs.get(c))||(c=this.glyphs.get(0));return c};Font.prototype.updateFeatures=function(options){return this.defaultRenderOptions.features.map(function(feature){return"latn"===feature.script?{script:"latn",tags:feature.tags.filter(function(tag){return options[tag]})}:feature})};Font.prototype.stringToGlyphs=function(s,options){var this$1=this,bidi=new Bidi;bidi.registerModifier("glyphIndex",null,function(token){return this$1.charToGlyphIndex(token.char)});
options=options?this.updateFeatures(options.features):this.defaultRenderOptions.features;bidi.applyFeatures(this,options);s=bidi.getTextGlyphs(s);bidi=s.length;options=Array(bidi);for(var notdef=this.glyphs.get(0),i=0;i<bidi;i+=1)options[i]=this.glyphs.get(s[i])||notdef;return options};Font.prototype.nameToGlyphIndex=function(name){return this.glyphNames.nameToGlyphIndex(name)};Font.prototype.nameToGlyph=function(name){name=this.nameToGlyphIndex(name);(name=this.glyphs.get(name))||(name=this.glyphs.get(0));
return name};Font.prototype.glyphIndexToName=function(gid){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(gid):""};Font.prototype.getKerningValue=function(leftGlyph,rightGlyph){leftGlyph=leftGlyph.index||leftGlyph;rightGlyph=rightGlyph.index||rightGlyph;var gposKerning=this.position.defaultKerningTables;return gposKerning?this.position.getKerningValue(gposKerning,leftGlyph,rightGlyph):this.kerningPairs[leftGlyph+","+rightGlyph]||0};Font.prototype.defaultRenderOptions={kerning:!0,
features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Font.prototype.forEachGlyph=function(text,x,y,fontSize,options,callback){x=void 0!==x?x:0;y=void 0!==y?y:0;fontSize=void 0!==fontSize?fontSize:72;options=Object.assign({},this.defaultRenderOptions,options);var fontScale=1/this.unitsPerEm*fontSize;text=this.stringToGlyphs(text,options);if(options.kerning){var kerningLookups=options.script||this.position.getDefaultScriptName();kerningLookups=this.position.getKerningTables(kerningLookups,
options.language)}for(var i=0;i<text.length;i+=1){var glyph=text[i];callback.call(this,glyph,x,y,fontSize,options);glyph.advanceWidth&&(x+=glyph.advanceWidth*fontScale);options.kerning&&i<text.length-1&&(glyph=kerningLookups?this.position.getKerningValue(kerningLookups,glyph.index,text[i+1].index):this.getKerningValue(glyph,text[i+1]),x+=glyph*fontScale);options.letterSpacing?x+=options.letterSpacing*fontSize:options.tracking&&(x+=options.tracking/1E3*fontSize)}return x};Font.prototype.getPath=function(text,
x,y,fontSize,options){var fullPath=new Path;this.forEachGlyph(text,x,y,fontSize,options,function(glyph,gX,gY,gFontSize){glyph=glyph.getPath(gX,gY,gFontSize,options,this);fullPath.extend(glyph)});return fullPath};Font.prototype.getPaths=function(text,x,y,fontSize,options){var glyphPaths=[];this.forEachGlyph(text,x,y,fontSize,options,function(glyph,gX,gY,gFontSize){glyph=glyph.getPath(gX,gY,gFontSize,options,this);glyphPaths.push(glyph)});return glyphPaths};Font.prototype.getAdvanceWidth=function(text,
fontSize,options){return this.forEachGlyph(text,0,0,fontSize,options,function(){})};Font.prototype.draw=function(ctx,text,x,y,fontSize,options){this.getPath(text,x,y,fontSize,options).draw(ctx)};Font.prototype.drawPoints=function(ctx,text,x,y,fontSize,options){this.forEachGlyph(text,x,y,fontSize,options,function(glyph,gX,gY,gFontSize){glyph.drawPoints(ctx,gX,gY,gFontSize)})};Font.prototype.drawMetrics=function(ctx,text,x,y,fontSize,options){this.forEachGlyph(text,x,y,fontSize,options,function(glyph,
gX,gY,gFontSize){glyph.drawMetrics(ctx,gX,gY,gFontSize)})};Font.prototype.getEnglishName=function(name){if(name=this.names[name])return name.en};Font.prototype.validate=function(){function assertNamePresent(name){(name=_this.getEnglishName(name))&&name.trim()}var _this=this;assertNamePresent("fontFamily");assertNamePresent("weightName");assertNamePresent("manufacturer");assertNamePresent("copyright");assertNamePresent("version")};Font.prototype.toTables=function(){return sfnt.fontToTable(this)};Font.prototype.toBuffer=
function(){console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead.");return this.toArrayBuffer()};Font.prototype.toArrayBuffer=function(){for(var bytes=this.toTables().encode(),buffer=new ArrayBuffer(bytes.length),intArray=new Uint8Array(buffer),i=0;i<bytes.length;i++)intArray[i]=bytes[i];return buffer};Font.prototype.download=function(fileName){var familyName=this.getEnglishName("fontFamily"),styleName=this.getEnglishName("fontSubfamily");fileName=fileName||familyName.replace(/\s/g,
"")+"-"+styleName+".otf";var arrayBuffer=this.toArrayBuffer();if("undefined"!==typeof window)window.URL=window.URL||window.webkitURL,window.URL?(familyName=new DataView(arrayBuffer),styleName=new Blob([familyName],{type:"font/opentype"}),familyName=document.createElement("a"),familyName.href=window.URL.createObjectURL(styleName),familyName.download=fileName,fileName=document.createEvent("MouseEvents"),fileName.initEvent("click",!0,!1),familyName.dispatchEvent(fileName)):console.warn("Font file could not be downloaded. Try using a different browser.");
else{familyName=require("shadow$empty");styleName=new Buffer(arrayBuffer.byteLength);arrayBuffer=new Uint8Array(arrayBuffer);for(var i=0;i<styleName.length;++i)styleName[i]=arrayBuffer[i];familyName.writeFileSync(fileName,styleName)}};Font.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Font.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,
EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Font.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var fvar={make:function(fvar,names){var result=new table.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:fvar.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",
type:"USHORT",value:fvar.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*fvar.axes.length}]);result.offsetToData=result.sizeOf();for(var i=0;i<fvar.axes.length;i++)result.fields=result.fields.concat(makeFvarAxis(i,fvar.axes[i],names));for(i=0;i<fvar.instances.length;i++)result.fields=result.fields.concat(makeFvarInstance(i,fvar.instances[i],fvar.axes,names));return result},parse:function(data,start,names){var p=new parse.Parser(data,start),tableVersion=p.parseULong();check.argument(65536===
tableVersion,"Unsupported fvar table version.");var offsetToData=p.parseOffset16();p.skip("uShort",1);var axisCount=p.parseUShort(),axisSize=p.parseUShort();tableVersion=p.parseUShort();p=p.parseUShort();for(var axes=[],i=0;i<axisCount;i++)axes.push(parseFvarAxis(data,start+offsetToData+i*axisSize,names));i=[];start=start+offsetToData+axisCount*axisSize;for(offsetToData=0;offsetToData<tableVersion;offsetToData++)i.push(parseFvarInstance(data,start+offsetToData*p,axes,names));return{axes,instances:i}}},
subtableParsers$1=Array(10);subtableParsers$1[1]=function(){var start=this.offset+this.relativeOffset,posformat=this.parseUShort();if(1===posformat)return{posFormat:1,coverage:this.parsePointer(Parser.coverage),value:this.parseValueRecord()};if(2===posformat)return{posFormat:2,coverage:this.parsePointer(Parser.coverage),values:this.parseValueRecordList()};check.assert(!1,"0x"+start.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};subtableParsers$1[2]=function(){var start=this.offset+this.relativeOffset,
posFormat=this.parseUShort();check.assert(1===posFormat||2===posFormat,"0x"+start.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");start=this.parsePointer(Parser.coverage);var valueFormat1=this.parseUShort(),valueFormat2=this.parseUShort();if(1===posFormat)return{posFormat,coverage:start,valueFormat1,valueFormat2,pairSets:this.parseList(Parser.pointer(Parser.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(valueFormat1),value2:this.parseValueRecord(valueFormat2)}})))};
if(2===posFormat){var classDef1=this.parsePointer(Parser.classDef),classDef2=this.parsePointer(Parser.classDef),class1Count=this.parseUShort(),class2Count=this.parseUShort();return{posFormat,coverage:start,valueFormat1,valueFormat2,classDef1,classDef2,class1Count,class2Count,classRecords:this.parseList(class1Count,Parser.list(class2Count,function(){return{value1:this.parseValueRecord(valueFormat1),value2:this.parseValueRecord(valueFormat2)}}))}}};subtableParsers$1[3]=function(){return{error:"GPOS Lookup 3 not supported"}};
subtableParsers$1[4]=function(){return{error:"GPOS Lookup 4 not supported"}};subtableParsers$1[5]=function(){return{error:"GPOS Lookup 5 not supported"}};subtableParsers$1[6]=function(){return{error:"GPOS Lookup 6 not supported"}};subtableParsers$1[7]=function(){return{error:"GPOS Lookup 7 not supported"}};subtableParsers$1[8]=function(){return{error:"GPOS Lookup 8 not supported"}};subtableParsers$1[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var subtableMakers$1=Array(10),gpos={parse:function(data,
start){data=new Parser(data,start||0);start=data.parseVersion(1);check.argument(1===start||1.1===start,"Unsupported GPOS table version "+start);return 1===start?{version:start,scripts:data.parseScriptList(),features:data.parseFeatureList(),lookups:data.parseLookupList(subtableParsers$1)}:{version:start,scripts:data.parseScriptList(),features:data.parseFeatureList(),lookups:data.parseLookupList(subtableParsers$1),variations:data.parseFeatureVariationsList()}},make:function(gpos){return new table.Table("GPOS",
[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(gpos.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(gpos.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(gpos.lookups,subtableMakers$1)}])}},kern={parse:function(data,start){data=new parse.Parser(data,start);start=data.parseUShort();if(0===start){start={};data.skip("uShort");var subtableVersion=data.parseUShort();check.argument(0===subtableVersion,"Unsupported kern sub-table version.");
data.skip("uShort",2);subtableVersion=data.parseUShort();data.skip("uShort",3);for(var i=0;i<subtableVersion;i+=1){var leftIndex=data.parseUShort(),rightIndex=data.parseUShort(),value=data.parseShort();start[leftIndex+","+rightIndex]=value}return start}if(1===start){start={};data.skip("uShort");1<data.parseULong()&&console.warn("Only the first kern subtable is supported.");data.skip("uLong");subtableVersion=data.parseUShort()&255;data.skip("uShort");if(0===subtableVersion)for(subtableVersion=data.parseUShort(),
data.skip("uShort",3),i=0;i<subtableVersion;i+=1)leftIndex=data.parseUShort(),rightIndex=data.parseUShort(),value=data.parseShort(),start[leftIndex+","+rightIndex]=value;return start}throw Error("Unsupported kern table version ("+start+").");}},loca={parse:function(data,start,numGlyphs,shortVersion){data=new parse.Parser(data,start);start=shortVersion?data.parseUShort:data.parseULong;for(var glyphOffsets=[],i=0;i<numGlyphs+1;i+=1){var glyphOffset=start.call(data);shortVersion&&(glyphOffset*=2);glyphOffsets.push(glyphOffset)}return glyphOffsets}},
opentype=Object.freeze({__proto__:null,Font,Glyph,Path,BoundingBox,_parse:parse,parse:parseBuffer,load,loadSync});exports.BoundingBox=BoundingBox;exports.Font=Font;exports.Glyph=Glyph;exports.Path=Path;exports._parse=parse;exports.default=opentype;exports.load=load;exports.loadSync=loadSync;exports.parse=parseBuffer;Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$opentype_DOT_js$dist$opentype.js.map
